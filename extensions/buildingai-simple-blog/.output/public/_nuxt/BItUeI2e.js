const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./C0zBGZ_a.js","./DX1yWKBN.js","./CD9n9mvV.js","./lxH6zW9O.js","./CqkleIqs.js","./DNOnu79J.js","./jyUpPKtB.js","./CtrVJqF2.js","./DC_dfpV6.js","./BKXIIz62.js","./DainPixS.js","./Bpcbx4eE.js","./BPHjYMA3.js","./DVjl-Vjq.js","./DgnpL2IB.js","./CgIjJYO7.js","./B8JASgNR.js","./IEJmkex5.js","./BMSQkwth.js","./ClXbGpdg.js","./DPUUrc9V.js","./eQ0A_bk-.js","./Lkhga0op.js","./DlAUqK2U.js","./bHLwCD_d.js","./CkFSApSf.js","./DtJrBhUs.js"])))=>i.map(i=>d[i]);
import{v as g,b3 as D,a6 as F,m as S,h as R,i as j,d as p,Q as d,x as w,D as u,A as B,M as t,R as y,S as C,a7 as E,o as m,E as I,q as L,_ as U}from"#entry";import{b as $,c as z}from"./BqooJc1P.js";import{u as b}from"./DtJrBhUs.js";import{A as M}from"./bHLwCD_d.js";function O(i,r){return Object.keys(i).forEach(c=>{const s=c,e=r[s];e!==void 0&&(typeof e=="object"&&e!==null?Object.keys(e).length>0&&(i[s]=e):i[s]=e)}),i}const P={class:"article-edit-container relative"},T={class:"bg-background sticky top-0 z-10 mb-4 flex w-full items-center justify-baseline pb-2"},V={class:"text-base font-medium"},q={class:"ml-4 text-xl font-bold"},N={key:0,class:"flex items-center justify-center py-10"},J=g({__name:"edit",setup(i){const r=L(()=>U(()=>import("./C0zBGZ_a.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),import.meta.url)),{query:c}=D(),s=E(),e=F(),{t:n}=S(),f=R({title:"",content:"",summary:"",cover:"",status:M.DRAFT,sort:0,categoryId:void 0}),l=c.id,{lockFn:k,isLock:v}=b(async()=>{if(c.id)try{const a=await $(l);O(f,a)}catch(a){console.error("获取详情失败:",a),e.error(n("article.edit.messages.fetchDetailFailed"))}}),{lockFn:h}=b(async a=>{try{await z(l,a),e.success(n("article.edit.messages.updateSuccess")),setTimeout(()=>s.back(),1e3)}catch(o){console.error("更新失败:",o),e.error(n("article.edit.messages.updateFailed"))}});return j(()=>k()),(a,o)=>{const _=I,x=C;return m(),p("div",P,[d("div",T,[u(x,{color:"neutral",variant:"soft",onClick:o[0]||(o[0]=A=>t(s).back())},{default:B(()=>[u(_,{name:"i-lucide-arrow-left",class:"size-5 cursor-pointer"}),d("span",V,y(t(n)("article.edit.navigation.back")),1)]),_:1}),d("h1",q,y(t(n)("article.edit.title")),1)]),t(v)?(m(),p("div",N,[u(_,{name:"i-lucide-loader-2",class:"size-8 animate-spin"})])):(m(),w(t(r),{key:1,id:t(l),"initial-data":t(f),onSubmit:t(h),onCancel:o[1]||(o[1]=A=>t(s).back())},null,8,["id","initial-data","onSubmit"]))])}}});export{J as default};
