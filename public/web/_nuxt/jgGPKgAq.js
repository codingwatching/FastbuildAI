import{d as I,ap as O,aJ as V,e as R,i as g,aN as q,s as Q,aK as k,j as A,k as w,o as a,l as i,c as l,q as e,m as r,z as J,t,v as C,D as K,x as s,y as p,_ as G,F as H,C as P}from"#entry";import{_ as W}from"./CsY35JUW.js";import{_ as X}from"./B-p4_8pw.js";import{_ as Y}from"./BYm23QKU.js";import{b as Z,a as ee}from"./CbK4UO9G.js";import"./DBwQYu6J.js";import"./DnFVE45b.js";import"./DegKy-XA.js";import"./DSCppvl0.js";import"./7d3iyZ8h.js";import"./DGUAW_1C.js";import"./DDJ79SjH.js";import"./Ti3HjCpC.js";import"./B1TeSxwV.js";import"./RmzZBBRE.js";import"./C4jlvBh2.js";import"./C-XPfH0G.js";const te={key:0,class:"flex items-center justify-center",style:{height:"400px"}},oe={key:1,class:"max-h-200"},se={class:"flex justify-between pb-4"},ne={class:"flex items-center gap-4"},ce={class:"text-secondary-foreground flex items-center text-base font-semibold"},ae={class:"line-clamp-1"},ie={class:"bg-muted rounded-lg p-4 pb-4"},de={class:"text-muted-foreground text-sm"},re={class:"grid grid-cols-1 gap-x-6 gap-y-4 py-4 pb-4 md:grid-cols-2"},le={class:"text-muted-foreground text-sm"},me={class:"max-w-100"},ue={class:"text-secondary-foreground mt-1 truncate font-medium"},pe={class:"text-muted-foreground text-sm"},_e={class:"text-secondary-foreground mt-1 font-medium"},fe={class:"text-muted-foreground text-sm"},xe={class:"text-secondary-foreground mt-1 font-medium"},ve={class:"flex items-center gap-2"},ye={class:"text-sm font-medium"},he={class:"text-muted-foreground text-sm"},be={class:"text-secondary-foreground mt-1 font-medium"},ge={class:"text-muted-foreground text-sm"},ke={class:"text-secondary-foreground mt-1 font-medium"},we={class:"text-muted-foreground text-sm"},Ce={class:"text-secondary-foreground mt-1 font-medium"},Te={class:"text-muted-foreground text-sm"},Me={key:0,class:"text-error mt-1 text-sm font-medium"},Be={key:1,class:"mt-1 text-sm font-medium"},De={key:0,class:"pb-4"},$e={class:"text-secondary-foreground mb-2 text-base font-medium"},Ue={class:"max-h-80 space-y-2 overflow-y-auto"},je={class:"text-secondary-foreground font-medium"},Ee={class:"text-muted-foreground mt-1 text-sm"},We=I({__name:"detail",props:{id:{},isView:{type:Boolean},isJsonImport:{type:Boolean}},emits:["close"],setup(T,{emit:M}){const B=M,D=T,x=O(),$=V(),{t:n}=R(),v=g(()=>D.id||$.query.id||null),o=q({id:"",name:"",providerName:"",description:"",icon:"",isDisabled:!1,url:"",sortOrder:0,type:"",tools:[],connectable:!1,connectError:"",isQuickMenu:!1,communicationType:""}),y=Q(!1),{lockFn:h,isLock:U}=k(async()=>{try{const c=await Z(v.value);Object.keys(o).forEach(m=>{const u=m,d=c[u];d!==void 0&&(typeof d=="object"&&d!==null?Object.keys(d).length>0&&(o[u]=d):o[u]=d)})}catch(c){console.error("获取供应商详情失败:",c)}}),{lockFn:j,isLock:E}=k(async()=>{try{const c=await ee(o.id);c.connectable?(x.success(c.message),h(),y.value=!0):x.error(c.message)}catch(c){console.error("重新链接失败:",c)}}),F=c=>{B("close",c)},L=g(()=>o.communicationType.includes("-")?o.communicationType.replace("-"," ").toUpperCase():o.communicationType?.toUpperCase());return A(async()=>v.value&&await h()),(c,m)=>{const u=J,d=K,b=W,_=X,N=G,S=Y;return a(),w(S,{title:e(n)("ai-mcp.backend.detailTitle"),description:e(n)("ai-mcp.backend.detailTitle"),ui:{content:"max-w-2xl overflow-y-auto h-fit"},onClose:m[1]||(m[1]=f=>F(e(y)))},{default:i(()=>[e(U)?(a(),l("div",te,[r(u,{name:"i-lucide-loader-2",class:"size-8 animate-spin"})])):(a(),l("div",oe,[t("div",se,[t("div",ne,[r(d,{src:e(o).icon,alt:e(o).name,size:"3xl",ui:{root:"rounded-lg"}},null,8,["src","alt"]),t("div",null,[t("h3",ce,[r(b,{text:e(o).name,delay:0},{default:i(()=>[t("span",ae,s(e(o).name),1)]),_:1},8,["text"])]),r(_,{color:e(o).type==="user"?"info":"primary"},{default:i(()=>[p(s(e(o).type==="user"?e(n)("console-common.tab.custom"):e(n)("console-common.tab.system")),1)]),_:1},8,["color"])])]),!e(o).connectable&&e(o).type==="system"?(a(),w(N,{key:0,class:"h-fit",loading:e(E),icon:"tabler:reload",ui:{leadingIcon:"size-4"},variant:"soft",size:"md",color:"error",onClick:m[0]||(m[0]=f=>e(j)())},{default:i(()=>[p(s(e(n)("ai-mcp.backend.detail.reconnect")),1)]),_:1},8,["loading"])):C("",!0)]),t("div",ie,[t("p",de,s(e(o).description||e(n)("ai-mcp.backend.detail.noDescription")),1)]),t("div",re,[t("div",null,[t("div",le,s(e(n)("ai-mcp.backend.detail.url")),1),r(b,{ui:{content:"max-w-100 !whitespace-pre-wrap !break-all leading-relaxed h-fit p-2"},"delay-duration":0},{content:i(()=>[t("div",me,s(e(o).url),1)]),default:i(()=>[t("div",ue,s(e(o).url),1)]),_:1})]),t("div",null,[t("div",pe,s(e(n)("ai-mcp.backend.detail.sortOrder")),1),t("div",_e,s(e(o).sortOrder),1)]),t("div",null,[t("div",fe,s(e(n)("ai-mcp.backend.form.isQuickMenu")),1),t("div",xe,[t("div",ve,[t("span",ye,s(e(o).isQuickMenu?e(n)("ai-mcp.backend.detail.quickMenu"):e(n)("ai-mcp.backend.detail.normalMenu")),1)])])]),t("div",null,[t("div",he,s(e(n)("ai-mcp.backend.detail.isActive")),1),t("div",be,[r(_,{color:e(o).isDisabled?"error":"success"},{default:i(()=>[p(s(e(o).isDisabled?e(n)("ai-mcp.backend.detail.disabled"):e(n)("ai-mcp.backend.detail.enabled")),1)]),_:1},8,["color"])])]),t("div",null,[t("div",ge,s(e(n)("ai-mcp.backend.detail.connectStatus")),1),t("div",ke,[r(_,{color:e(o).connectable?"success":"error"},{default:i(()=>[p(s(e(o).connectable?e(n)("ai-mcp.backend.detail.connectSuccess"):e(n)("ai-mcp.backend.detail.connectFailed")),1)]),_:1},8,["color"])])]),t("div",null,[t("div",we,s(e(n)("ai-mcp.backend.detail.communicationType")),1),t("div",Ce,[r(_,{color:"neutral",variant:"soft"},{default:i(()=>[p(s(e(L)),1)]),_:1})])]),t("div",null,[t("div",Te,s(e(n)("ai-mcp.backend.detail.connectError")),1),e(o).connectError?(a(),l("div",Me,s(e(o).connectError),1)):(a(),l("div",Be,"-"))])]),e(o).tools&&e(o).tools.length>0?(a(),l("div",De,[t("h4",$e,s(e(n)("ai-mcp.backend.detail.tools")),1),t("div",Ue,[(a(!0),l(H,null,P(e(o).tools,(f,z)=>(a(),l("div",{key:z,class:"border-muted rounded-lg border p-4"},[t("div",je,s(f.name),1),t("div",Ee,s(f.description),1)]))),128))])])):C("",!0)]))]),_:1},8,["title","description"])}}});export{We as default};
