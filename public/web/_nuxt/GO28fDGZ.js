import{d as $,aJ as w,i as u,r as v,w as k,H as m,j as y,ag as U,aY as b,c as E,k as R,q as c,o as x,aH as T}from"#entry";const W=["src","title"],H=$({__name:"[...all]",setup(B){const o=w(),r=u(()=>o.path.includes("/console")),t=u(()=>r.value?"":o.fullPath.match(/\/buildingai\/extension\/([^/]+)/)?.[1]||""),d=u(()=>{const e=o.params.all;return Array.isArray(e)&&e.length>1?e.slice(1).join("/"):""}),g=u(()=>{const e=`/extension/${t.value}/`;return d.value?`${e}${d.value}`:e}),a=v(null),f=v(!1),i=v(!1),p=e=>e?`/buildingai/extension/${t.value}/${e}`:`/buildingai/extension/${t.value}`,h=e=>{o.path!==e&&(i.value=!0,window.history.replaceState({...window.history.state},"",e),m(()=>{i.value=!1}))},_=()=>{if(!(r.value||!a.value?.contentWindow||f.value||i.value))try{const{pathname:e,search:n,hash:s}=a.value.contentWindow.location,l=(e+n+s).match(/^\/extension\/[^/]+\/(.*)$/);h(p(l?.[1]||""))}catch{}};return k(()=>d.value,e=>{if(r.value||!a.value||i.value)return;const n=e?`/extension/${t.value}/${e}`:`/extension/${t.value}/`;a.value.src.endsWith(n)||(f.value=!0,a.value.src=n,m(()=>{f.value=!1}))}),y(()=>{const e=n=>{const{type:s,path:l}=n.data||{};s!=="extension-navigation"||l.startsWith("console")||h(p(l))};window.addEventListener("message",e),U(()=>window.removeEventListener("message",e))}),b({title:`Extension: ${t.value}`,meta:[{name:"description",content:`Extension frontend: ${t.value}`}]}),(e,n)=>{const s=T;return c(r)?(x(),R(s,{key:1})):(x(),E("iframe",{key:0,ref_key:"iframeRef",ref:a,src:c(g),class:"h-full w-full border-0",title:`Extension Frontend: ${c(t)}`,onLoad:n[0]||(n[0]=()=>("nextTick"in e?e.nextTick:c(m))(_))},null,40,W))}}});export{H as default};
