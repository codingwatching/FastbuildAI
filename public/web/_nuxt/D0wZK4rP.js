import{_ as P}from"./DwzRPK54.js";import{d as M,e as S,r as A,i as F,aK as Q,j,c as s,o as n,q as l,F as _,C as y,m as g,t as a,z as B,x as p,A as I,v as $}from"#entry";import{j as q}from"./DkAujwQK.js";import{L as v}from"./BdFcdM0V.js";import"./CDSfhndf.js";const z={class:"micropage-provider flex h-full flex-col"},E={key:0,class:"flex flex-none flex-wrap gap-3 p-6"},G={key:1,class:"flex flex-1 items-center justify-center"},N={class:"mx-auto max-w-sm text-center"},O={class:"text-foreground mb-2 text-lg font-semibold"},V={class:"text-muted-foreground text-sm"},K={key:2,class:"flex-1 overflow-y-auto p-6"},R={class:"flex flex-wrap gap-3"},U=["onClick"],D={class:"min-w-0 flex-1"},T={class:"text-foreground mb-1 flex items-center truncate text-base font-semibold"},H={key:0,class:"absolute top-0 right-0 flex-none"},ee=M({__name:"micropage-provider",props:{searchQuery:{default:""},selected:{default:null}},emits:["select"],setup(d,{emit:k}){const{t:c}=S(),i=d,w=k,m=A([]),f=F(()=>{if(!i.searchQuery)return m.value;const e=i.searchQuery.toLowerCase();return m.value.filter(o=>o.name?.toLowerCase().includes(e)||o.path?.toLowerCase().includes(e))}),{lockFn:C,isLock:b}=Q(async()=>{try{const o=(await q()).map(r=>({type:v.MICROPAGE,name:r.name,path:`/micropage/${r.id}`,query:{}}));o.sort((r,u)=>{const t=r.name||"",x=u.name||"";return t.localeCompare(x)}),m.value=o}catch(e){console.error(c("console-common.loadingFailed"),e),m.value=[]}}),L=e=>{w("select",e)},h=e=>i.selected?.path===e.path&&i.selected?.type===v.MICROPAGE;return j(()=>C()),(e,o)=>{const r=P,u=B;return n(),s("div",z,[l(b)?(n(),s("div",E,[(n(),s(_,null,y(6,t=>g(r,{class:"h-18 w-44 rounded-xl",key:t})),64))])):f.value.length===0?(n(),s("div",G,[a("div",N,[g(u,{name:"i-heroicons-document-text",class:"text-muted-foreground/50 mx-auto mb-4 h-16 w-16"}),a("h3",O,p(d.searchQuery?l(c)("console-common.linkPicker.emptyState.noMatchingPages"):l(c)("console-common.linkPicker.emptyState.noMicropages")),1),a("p",V,p(d.searchQuery?l(c)("console-common.linkPicker.emptyState.tryOtherKeywords"):l(c)("console-common.linkPicker.emptyState.contactAdmin")),1)])])):(n(),s("div",K,[a("div",R,[(n(!0),s(_,null,y(f.value,t=>(n(),s("div",{key:t.path,class:I(["group relative flex cursor-pointer items-center gap-4 rounded-xl px-4 py-3 transition-all duration-200",h(t)?"bg-primary/5 shadow-sm":"bg-accent hover:bg-primary/5"]),onClick:x=>L(t)},[a("div",D,[a("div",T,p(t.name),1)]),h(t)?(n(),s("div",H,[...o[0]||(o[0]=[a("div",{class:"bg-primary flex size-3 items-center justify-center rounded-full"},null,-1)])])):$("",!0)],10,U))),128))])]))])}}});export{ee as default};
