import C from"./CDSfhndf.js";import{_ as N}from"./Brlt-NDg.js";import{d as U,e as q,ap as K,r as g,i as k,w as M,k as F,o as I,l as s,t as c,m as u,q as e,bB as L,p as R,B as h,x as d,_ as S,y as w,$ as T}from"#entry";import{_ as j}from"./BYm23QKU.js";import"./DoL5-2Ox.js";import"./DGUAW_1C.js";import"./DDJ79SjH.js";import"./Ti3HjCpC.js";import"./DegKy-XA.js";import"./B1TeSxwV.js";import"./RmzZBBRE.js";import"./C4jlvBh2.js";import"./C-XPfH0G.js";import"./7d3iyZ8h.js";const z={class:"py-2"},D={class:"text-muted-foreground mt-2 text-xs"},O={class:"flex justify-end gap-2"},ne=U({__name:"nickname-modal",props:{currentValue:{},loading:{type:Boolean}},emits:["success"],setup(f,{emit:V}){const m=f,y=V,{t}=q(),x=K(),r=g(!1),n=g(m.currentValue||""),i=k(()=>{const o=n.value.trim();return o?o.length>20?t("user.frontend.profile.nicknameTooLong"):"":t("user.frontend.profile.nicknameRequired")}),p=k(()=>{const o=m.currentValue||"";return n.value.trim()!==o.trim()});M(()=>r.value,o=>{o&&(n.value=m.currentValue||"")});async function _(){if(i.value){x.warning(i.value);return}if(!p.value)return;const o=n.value.trim();y("success",o),r.value=!1}return(o,a)=>{const B=C,$=N,v=S,b=j;return I(),F(b,{open:e(r),"onUpdate:open":a[2]||(a[2]=l=>h(r)?r.value=l:null),title:e(t)("user.frontend.profile.editNickname"),width:"sm","show-footer":!0},{trigger:s(()=>[T(o.$slots,"default")]),footer:s(()=>[c("div",O,[u(v,{variant:"soft",onClick:a[1]||(a[1]=l=>r.value=!1)},{default:s(()=>[w(d(e(t)("console-common.cancel")),1)]),_:1}),u(v,{disabled:!e(p)||!!e(i),color:"primary",loading:f.loading,onClick:_},{default:s(()=>[w(d(e(t)("console-common.save")),1)]),_:1},8,["disabled","loading"])])]),default:s(()=>[c("div",z,[u($,{label:e(t)("user.frontend.profile.nickname"),size:"lg",required:"",error:e(i)},{default:s(()=>[u(B,{modelValue:e(n),"onUpdate:modelValue":a[0]||(a[0]=l=>h(n)?n.value=l:null),placeholder:e(t)("user.frontend.profile.nicknamePlaceholder"),maxlength:"20",ui:{root:"w-full"},onKeydown:L(R(_,["prevent"]),["enter"])},null,8,["modelValue","placeholder","onKeydown"])]),_:1},8,["label","error"]),c("div",D,d(e(t)("user.frontend.profile.nicknameLength")),1)])]),_:3},8,["open","title"])}}});export{ne as default};
