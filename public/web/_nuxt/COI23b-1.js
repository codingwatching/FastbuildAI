const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BQjuU1b_.js","./Dgvg0_To.js","./DJ9SNVgt.js","./CgMDXot0.js","./DVSiT9pd.js","./CZsOHrUj.js","./DegKy-XA.js","./DaC7Nksz.js","./cwT2REE1.js","./CXk2IlXx.js","./D_1uxSdv.js","./DoL5-2Ox.js"])))=>i.map(i=>d[i]);
import{d as j,aX as D,f as O,e as K,au as W,aK as X,i as d,k as Z,o as c,l as i,m as o,c as p,v as h,t as m,bU as G,A as v,x as u,z as q,F as H,C as J,y as f,q as n,R as Q,_ as Y,U as ee,bW as te}from"#entry";import se from"./CDSfhndf.js";import{_ as oe}from"./Brlt-NDg.js";import{_ as re}from"./C9inLFuJ.js";import{_ as ae}from"./CvZB4bI9.js";import{_ as ne}from"./Ds48qA85.js";import{c as ie,a as x,f as le}from"./BUyfW8JT.js";import{u as me}from"./HHGKx3uz.js";import"./DoL5-2Ox.js";import"./KiG0a5S-.js";import"./CXk2IlXx.js";import"./kRIii9yh.js";import"./DBwQYu6J.js";import"./B1TeSxwV.js";import"./C6Y-ieo6.js";import"./Ti3HjCpC.js";import"./CyS2mNdj.js";import"./BaKvIqXP.js";import"./cwT2REE1.js";import"./DaC7Nksz.js";import"./DegKy-XA.js";import"./DnFVE45b.js";import"./DaWZu8wl.js";import"./DcxZIiHI.js";const ce={key:0,class:"mt-2"},ue={class:"inline-flex cursor-help items-center","aria-label":"Password requirements"},de={class:"space-y-1 p-2","aria-label":"Password requirements"},pe={class:"text-xs font-light"},ge={class:"sr-only"},fe={class:"flex items-center gap-1 text-xs"},_e={key:0,class:"mt-8 mb-4 text-left"},je=j({__name:"register",emits:["switchComponent","success"],setup(we,{emit:U}){const z=Q(()=>ee(()=>import("./BQjuU1b_.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url)),b=U,P=D(),$=O(),{t:e}=K(),{ensureAgreementAccepted:C}=me({width:"!w-[420px]"},q),L=ie({username:x().required(e("login.validation.accountRequired")).min(3,e("login.validation.accountMinLength")).max(20,e("login.validation.accountMaxLength")),password:x().required(e("login.validation.passwordRequired")).min(6,e("login.validation.passwordMinLength")).max(25,e("login.validation.passwordMaxLength")).matches(/^(?=.*[a-z])(?=.*[0-9!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?])/,e("login.validation.passwordFormat")),confirmPassword:x().required(e("login.validation.confirmPasswordRequired")).oneOf([le("password")],e("login.validation.passwordMismatch"))}),a=W({username:"",password:"",confirmPassword:""}),{lockFn:F,isLock:R}=X(async()=>{if(await C())try{const s=await te({terminal:"1",...a});b("success",{...s,...s.user})}catch(s){console.log(e("login.messages.registerFailed"),s)}});function M(t){return[{regex:/.{8,}/,text:e("login.requirements.minLength8")},{regex:/\d/,text:e("login.requirements.number")},{regex:/[a-z]/,text:e("login.requirements.lowercase")},{regex:/[A-Z]/,text:e("login.requirements.uppercase")}].map(g=>({met:g.regex.test(t),text:g.text}))}const y=d(()=>M(a.password)),l=d(()=>y.value.filter(t=>t.met).length),k=d(()=>l.value===0?"neutral":l.value<=1?"error":l.value<=2||l.value===3?"warning":"success"),V=d(()=>l.value===0?"":l.value<=1?e("login.strength.weak"):l.value<=3?e("login.strength.medium"):e("login.strength.strong")),B=d(()=>{const t=k.value;return t==="error"?"text-error":t==="warning"?"text-warning":t==="success"?"text-success":"text-muted"});return(t,s)=>{const g=se,_=oe,S=re,T=G,w=q,I=ae,A=Y,N=ne;return c(),Z(N,{schema:n(L),state:a,onSubmit:n(F)},{default:i(()=>[o(_,{label:t.$t("login.account"),name:"username",required:""},{default:i(()=>[o(g,{modelValue:a.username,"onUpdate:modelValue":s[0]||(s[0]=r=>a.username=r),class:"w-full",size:"lg",ui:{base:"bg-transparent p-3"},placeholder:t.$t("login.placeholders.enterAccount")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(_,{label:t.$t("login.password"),name:"password",class:"mt-2",required:""},{default:i(()=>[o(S,{modelValue:a.password,"onUpdate:modelValue":s[1]||(s[1]=r=>a.password=r),class:"w-full",type:"password",size:"lg",ui:{base:"bg-transparent p-3"},placeholder:t.$t("login.placeholders.enterPassword")},null,8,["modelValue","placeholder"]),a.password?(c(),p("div",ce,[o(T,{color:k.value,"model-value":l.value,max:4,size:"sm"},null,8,["color","model-value"]),V.value?(c(),p("div",{key:0,class:v(["mt-1 flex items-center gap-1 text-xs font-medium",B.value])},[m("span",null,u(V.value),1),o(I,{mode:"hover"},{content:i(()=>[m("ul",de,[(c(!0),p(H,null,J(y.value,(r,E)=>(c(),p("li",{key:E,class:v(["flex items-center gap-0.5",r.met?"text-success":"text-muted"])},[o(w,{name:r.met?"i-lucide-circle-check":"i-lucide-circle-x",class:"size-4 shrink-0"},null,8,["name"]),m("span",pe,[f(u(r.text)+" ",1),m("span",ge,u(r.met?n(e)("login.strength.met"):n(e)("login.strength.notMet")),1)])],2))),128))])]),default:i(()=>[m("span",ue,[o(w,{name:"i-lucide-help-circle",class:"size-3.5"})])]),_:1})],2)):h("",!0)])):h("",!0)]),_:1},8,["label"]),o(_,{label:t.$t("login.confirmPassword"),name:"confirmPassword",class:"mt-2",required:""},{help:i(()=>[m("div",fe,[o(w,{name:"tabler:alert-circle",size:"14"}),f(" "+u(t.$t("login.passwordRule")),1)])]),default:i(()=>[o(S,{modelValue:a.confirmPassword,"onUpdate:modelValue":s[2]||(s[2]=r=>a.confirmPassword=r),class:"w-full",type:"password",size:"lg",ui:{base:"bg-transparent p-3"},placeholder:t.$t("login.placeholders.enterPasswordAgain")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(P).loginSettings?.showPolicyAgreement?(c(),p("div",_e,[o(n(z),{modelValue:n($).isAgreed,"onUpdate:modelValue":s[3]||(s[3]=r=>n($).isAgreed=r)},null,8,["modelValue"])])):h("",!0),m("div",{class:v(["flex flex-1 gap-4 pb-8",{"mt-8":!n(P).loginSettings?.showPolicyAgreement}])},[o(A,{variant:"outline",color:"primary",size:"lg",ui:{base:"flex-1 justify-center p-3"},onClick:s[4]||(s[4]=r=>b("switchComponent","account-login"))},{default:i(()=>[f(u(t.$t("login.backToLogin")),1)]),_:1}),o(A,{color:"primary",type:"submit",size:"lg",loading:n(R),ui:{base:"flex-1 justify-center p-3"}},{default:i(()=>[f(u(t.$t("login.registerNow")),1)]),_:1},8,["loading"])],2)]),_:1},8,["schema","state","onSubmit"])}}});export{je as default};
