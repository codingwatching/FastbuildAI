import{d as g,r as l,w as _,j as v,ag as x,c as s,o as r,$ as y,t as i,v as M,m as b,z as w,x as c,n as k}from"#entry";const B={key:0,class:"flex items-center justify-center gap-1"},$={class:"text-secondary-foreground text-sm"},I={key:1,class:"text-secondary-foreground text-sm"},R=g({inheritAttrs:!1,__name:"index",props:{loading:{type:Boolean,default:!1},hasMore:{type:Boolean,default:!0},threshold:{default:200},loadingText:{default:"loading..."},noMoreText:{default:"No more data"}},emits:["loadMore"],setup(d,{emit:f}){const e=d,u=f,m=l(null),n=l(null);let t=null;function a(){!window.IntersectionObserver||!n.value||!e.hasMore||e.loading||(t=new IntersectionObserver(o=>{o[0]?.isIntersecting&&u("loadMore")},{root:null,rootMargin:`${e.threshold}px`,threshold:0}),t.observe(n.value))}function p(){t&&(t.disconnect(),t=null),Promise.resolve().then(()=>{a()})}return _(()=>[e.loading,e.hasMore],()=>{p()}),v(()=>{a()}),x(()=>{t&&(t.disconnect(),t=null)}),(o,N)=>{const h=w;return r(),s("div",k({ref_key:"containerRef",ref:m},o.$attrs,{class:"h-full w-full"}),[y(o.$slots,"default"),i("div",{ref_key:"loadingRef",ref:n,class:"flex h-8 w-full items-center justify-center"},[e.loading?(r(),s("div",B,[b(h,{name:"i-ph-spinner-gap-bold",size:"16",class:"text-secondary-foreground animate-spin"}),i("span",$,c(e.loadingText),1)])):e.hasMore?M("",!0):(r(),s("div",I,c(e.noMoreText),1))],512)],16)}}});export{R as _};
