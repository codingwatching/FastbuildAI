import{d as b,i as M,c as f,o as c,m as r,l as h,$ as R,n as P,q as e,Y as T,k as j,u as N,t as n,x as v,D as E,ar as Q,e as Y,aN as H,s as w,a$ as I,w as J,v as S,I as K,b0 as B,z as O,aW as X,F as Z,C as ee}from"#entry";import te from"./CDSfhndf.js";import{u as se,P as ae,_ as ne}from"./CR9qioUt.js";import{_ as oe}from"./DlAUqK2U.js";import{_ as ie}from"./DRoDiArK.js";import{n as le}from"./BI1JbAYD.js";import"./BRI4D6WA.js";var re=b({inheritAttrs:!1,__name:"AspectRatio",props:{ratio:{type:Number,required:!1,default:1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const a=s,{forwardRef:o}=se(),p=M(()=>1/a.ratio*100);return(i,t)=>(c(),f("div",{style:T(`position: relative; width: 100%; padding-bottom: ${p.value}%`),"data-reka-aspect-ratio-wrapper":""},[r(e(ae),P({ref:e(o),"as-child":i.asChild,as:i.as,style:{position:"absolute",inset:"0px"}},i.$attrs),{default:h(()=>[R(i.$slots,"default",{aspect:p.value})]),_:3},16,["as-child","as"])],4))}}),ce=re;const de=b({inheritAttrs:!1,__name:"index",props:{ratio:{default:16/9}},setup(s){const a=s;return(o,p)=>(c(),j(e(ce),P({ratio:a.ratio,class:"bd-aspect-ratio"},o.$attrs),{default:h(()=>[R(o.$slots,"default",{},void 0,!0)]),_:3},16,["ratio"]))}}),ue=oe(de,[["__scopeId","data-v-b74f39d5"]]);function pe(){return N("/apps-decorate")}function D(s){return N("/extension",s)}const me={class:"flex flex-row justify-between gap-3"},fe={class:"min-w-0 flex-1"},_e={class:"text-foreground truncate text-lg font-semibold"},ge={class:"text-muted-foreground mt-1 line-clamp-2 h-10 text-sm"},he={class:"border-default bg-background flex size-18 flex-none items-center justify-center overflow-hidden rounded-lg border"},xe=b({__name:"app-card",props:{extension:{}},emits:["click"],setup(s,{emit:a}){const o=s,p=a,i=()=>{p("click",o.extension)};return(t,m)=>{const d=E;return c(),f("div",{class:"group bg-muted border-border cursor-pointer rounded-lg border px-4 py-6 transition-all duration-200 hover:shadow-md",onClick:i},[n("div",me,[n("div",fe,[n("h3",_e,v(s.extension.alias||s.extension.name),1),n("p",ge,v(s.extension.description||t.$t("extensions.manage.noDescription")),1)]),n("div",he,[r(d,{src:s.extension.icon,alt:s.extension.name,icon:"i-lucide-puzzle",ui:{root:`size-full rounded-md ${s.extension.icon?"":"bg-primary"}`,icon:"size-7 text-white"}},null,8,["src","alt","ui"])])])])}}}),ve={class:"container mx-auto flex h-full flex-col overflow-hidden"},be={class:"bg-background flex flex-none flex-col gap-3 p-4"},ye={class:"flex items-center justify-between"},we={class:"hidden flex-none font-bold sm:block sm:text-base lg:text-lg"},$e={class:"relative flex justify-center"},ke={class:"min-h-0 flex-1"},Ae={key:0,class:"grid grid-cols-1 gap-6 px-4 pt-2 pb-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},Ce={key:1},ze={class:"flex h-full min-h-[50vh] w-full items-center justify-center"},Ie={class:"flex flex-col items-center gap-3"},Se={class:"text-muted-foreground"},Ve=b({__name:"index",async setup(s){let a,o;const p=Q(),{t:i}=Y(),t=H({name:"",page:1,pageSize:20}),m=w(!1),d=w(!0),_=w([]),$=()=>({name:t.name,page:t.page,pageSize:t.pageSize}),{data:g}=([a,o]=I(()=>B("apps-decorate",()=>pe())),a=await a,o(),a),{data:y,pending:k}=([a,o]=I(()=>B("public-apps-initial",()=>D($()))),a=await a,o(),a);y.value&&(_.value=y.value.items||[],d.value=y.value.totalPages>(t.page||1));const A=async(u=!1)=>{if(!m.value){m.value=!0,u&&(t.page=1,_.value=[],d.value=!0);try{const l=await D($());u?_.value=l.items||[]:_.value.push(...l.items||[]),d.value=l.totalPages>(t.page||1)}catch(l){console.error("获取应用列表失败:",l),d.value=!1}finally{m.value=!1}}},U=async()=>{!d.value||m.value||(t.page=(t.page||1)+1,await A())},C=K(()=>A(!0),500);J(()=>t.name,C);const V=u=>{u.identifier&&p.push(`/buildingai/extension/${u.identifier}`)};return(u,l)=>{const z=O,F=te,W=X,q=ue,L=ie,G=ne;return c(),f("div",ve,[n("div",be,[n("div",ye,[n("h2",we,v(e(i)("menu.apps")),1),n("div",$e,[r(F,{modelValue:e(t).name,"onUpdate:modelValue":l[0]||(l[0]=x=>e(t).name=x),placeholder:e(i)("extensions.manage.search"),class:"sm:w-full lg:w-md",variant:"soft",onInput:e(C)},{leading:h(()=>[r(z,{name:"i-lucide-search"})]),_:1},8,["modelValue","placeholder","onInput"])])])]),e(g)?.enabled&&e(g)?.heroImageUrl?(c(),f("div",{key:0,class:"flex-none cursor-pointer overflow-hidden px-4 pb-4",onClick:l[1]||(l[1]=x=>e(g)?.link&&("navigateToWeb"in u?u.navigateToWeb:e(le))(e(g).link))},[r(q,{ratio:1488/170},{default:h(()=>[r(W,{src:e(g).heroImageUrl,alt:e(g).title||"banner",class:"h-full w-full rounded-lg object-contain"},null,8,["src","alt"])]),_:1})])):S("",!0),n("div",ke,[r(G,{class:"h-full"},{default:h(()=>[r(L,{loading:e(m)||e(k),"has-more":e(d),"no-more-text":e(t).page===1?" ":"",onLoadMore:U},{default:h(()=>[e(_).length>0?(c(),f("div",Ae,[(c(!0),f(Z,null,ee(e(_),x=>(c(),j(xe,{key:x.id,extension:x,onClick:V},null,8,["extension"]))),128))])):!e(m)&&!e(k)?(c(),f("div",Ce,[n("div",ze,[n("div",Ie,[r(z,{name:"i-lucide-box",class:"text-muted-foreground size-12"}),n("span",Se,v(e(i)("extensions.manage.empty.title")),1)])])])):S("",!0)]),_:1},8,["loading","has-more","no-more-text"])]),_:1})])])}}});export{Ve as default};
