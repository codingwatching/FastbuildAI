const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CGhM5h65.js","./CDSfhndf.js","./Dgvg0_To.js","./B-p4_8pw.js","./BYm23QKU.js","./DGUAW_1C.js","./DDJ79SjH.js","./Ti3HjCpC.js","./DegKy-XA.js","./B1TeSxwV.js","./RmzZBBRE.js","./C4jlvBh2.js","./C-XPfH0G.js","./7d3iyZ8h.js","./DyY5B2r8.js","./DcxZIiHI.js"])))=>i.map(i=>d[i]);
import{d as E,Q as L,s as y,w as C,aT as M,k,o as s,l as p,$ as j,m as o,_ as A,c as u,z as D,q as a,x as d,t as f,B as b,v as _,F as x,C as F,y as q,R as G,U as Q}from"#entry";import H from"./CDSfhndf.js";import{_ as J}from"./CGkf3lDq.js";import{_ as K}from"./CvZB4bI9.js";import{a as W,b as X}from"./DyY5B2r8.js";const Y={key:0,class:"text-sm"},Z={key:1,class:"text-dimmed text-sm"},ee={class:"flex flex-col gap-2 p-2"},ae={class:"pt-1"},te={key:1,class:"flex flex-col gap-1"},se={key:2,class:"flex h-30 flex-col items-center justify-center gap-2"},ne={class:"text-muted text-sm"},de=E({__name:"tag-create",props:{modelValue:{default:()=>[]},type:{default:"app"}},emits:["update:modelValue","change","close"],setup(U,{emit:z}){const B=G(()=>Q(()=>import("./CGhM5h65.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url)),w=z,g=U,r=M(g,"modelValue",w),O=L(),v=y(!1),c=y([]),i=y([]),n=y(""),T=async()=>{const e=await W({type:g.type});c.value=e,$()},P=e=>{i.value.includes(e)?i.value=i.value.filter(l=>l.id!==e.id):i.value.push(e),r.value=i.value.map(l=>l.id),w("change",e)},S=async()=>{await X({name:n.value,type:g.type}),n.value="",await T()},I=async()=>{await O.create(B).open({type:g.type}).result,await T()},$=()=>{if(!c.value?.length){i.value=[];return}i.value=c.value.filter(e=>r.value?.includes(e.id))};return C(()=>r.value,()=>{$()},{deep:!1}),C(v,e=>{e?T():w("close")}),(e,l)=>{const m=D,h=A,N=H,V=J,R=K;return s(),k(R,{open:a(v),"onUpdate:open":l[1]||(l[1]=t=>b(v)?v.value=t:null),content:{align:"center",side:"bottom",sideOffset:8}},{content:p(()=>[f("div",ee,[o(N,{modelValue:a(n),"onUpdate:modelValue":l[0]||(l[0]=t=>b(n)?n.value=t:null),placeholder:e.$t("common.tag.searchOrCreate"),clearable:"",icon:"i-lucide-search",variant:"soft",color:"neutral",ui:{root:"w-full",base:"w-full",trailing:"pr-1"}},null,8,["modelValue","placeholder"]),f("div",ae,[!a(c).filter(t=>t.name===a(n)).length&&a(n)?(s(),u(x,{key:0},[o(h,{color:"neutral",variant:"ghost",ui:{base:"gap-2 w-full"},onClick:S},{default:p(()=>[o(m,{name:"i-lucide-plus",class:"size-4"}),f("span",null,d(e.$t("common.tag.createTag",{name:a(n)})),1)]),_:1}),a(c).length>0?(s(),k(V,{key:0,type:"dashed",class:"py-2"})):_("",!0)],64)):_("",!0),a(c).length>0?(s(),u("div",te,[(s(!0),u(x,null,F(a(c),t=>(s(),k(h,{key:t.id,color:"neutral",variant:"ghost",ui:{base:"justify-between"},onClick:le=>P(t)},{default:p(()=>[q(d(t.name)+" ",1),a(r).includes(t.id)?(s(),k(m,{key:0,name:"i-lucide-check",class:"size-4"})):_("",!0)]),_:2},1032,["onClick"]))),128))])):_("",!0),a(c).length===0&&!a(n)?(s(),u("div",se,[o(m,{name:"i-lucide-tags",class:"size-5"}),f("span",ne,d(e.$t("common.tag.noTags")),1)])):_("",!0)]),o(V,{type:"dashed"}),f("div",null,[o(h,{label:e.$t("common.tag.manageTags"),color:"neutral",variant:"ghost",icon:"i-lucide-tags",ui:{base:"w-full"},onClick:I},null,8,["label"])])])]),default:p(()=>[j(e.$slots,"trigger",{item:a(i)},()=>[o(h,{color:"neutral",variant:"outline"},{default:p(()=>[o(m,{name:"i-lucide-tag",class:"size-4"}),a(r).length>0?(s(),u("span",Y,d(a(r).length)+d(e.$t("common.tag.tags")),1)):(s(),u("span",Z,d(e.$t("common.tag.allTags")),1)),o(m,{name:"i-lucide-chevron-down",class:"text-dimmed size-4 shrink-0"})]),_:1})])]),_:3},8,["open"])}}});export{de as _};
