import{d as C,e as K,ap as N,h as m,z as F,i as M,aK as A,k as I,o as f,l as r,m as l,q as i,t as a,x as s,_ as z,y as g,c as x,aW as D}from"#entry";import{_ as j}from"./CvZB4bI9.js";import J from"./CDSfhndf.js";import{_ as O}from"./Brlt-NDg.js";import{_ as q}from"./BhyXixVX.js";import{_ as P}from"./CEOm-hjj.js";import{_ as W}from"./Ds48qA85.js";import{_ as G}from"./BYm23QKU.js";import{d as H}from"./VsqYQVjX.js";import"./KiG0a5S-.js";import"./CXk2IlXx.js";import"./kRIii9yh.js";import"./DBwQYu6J.js";import"./B1TeSxwV.js";import"./C6Y-ieo6.js";import"./Ti3HjCpC.js";import"./CyS2mNdj.js";import"./BaKvIqXP.js";import"./cwT2REE1.js";import"./DaC7Nksz.js";import"./DegKy-XA.js";import"./DnFVE45b.js";import"./DoL5-2Ox.js";import"./B-p4_8pw.js";import"./CR9qioUt.js";import"./BRI4D6WA.js";import"./DlAUqK2U.js";import"./B0g9CpkI.js";import"./DGUAW_1C.js";import"./DDJ79SjH.js";import"./RmzZBBRE.js";import"./C4jlvBh2.js";import"./C-XPfH0G.js";import"./7d3iyZ8h.js";import"./DJ9SNVgt.js";import"./CgMDXot0.js";import"./DVSiT9pd.js";import"./CZsOHrUj.js";import"./D_1uxSdv.js";import"./12pJH7Js.js";import"./BstbYvQo.js";import"./6WwfWHXT.js";import"./DSCppvl0.js";import"./Bjbrn0__.js";import"./BNMwDuRp.js";import"./DyTskiS5.js";import"./Dswg8GCv.js";import"./ClGKrygo.js";import"./DaWZu8wl.js";import"./zDgZcZqa.js";import"./DcxZIiHI.js";const Q={class:"flex flex-row items-center gap-4"},X={class:"text-lg font-semibold"},Y={class:"text-muted-foreground text-sm"},Z={class:"text-muted-foreground flex items-center gap-2 text-sm"},ee={key:0,class:"flex-none"},oe={key:1,class:"flex-none"},te={class:"flex w-full items-center gap-2"},ie={class:"text-muted-foreground text-sm"},re={class:"flex w-full items-center gap-2"},le={class:"flex w-full justify-end gap-2 pt-3.5"},io=C({__name:"model-billing-setting",props:{models:{},provider:{}},emits:["close"],setup(n,{emit:y}){const b=n,p=y,{t:o}=K(),k=N(),_=F,w=j,$=[{accessorKey:"name",header:o("ai-provider.backend.model.batchEdit.name")},{accessorKey:"modelType",header:o("ai-provider.backend.model.form.modelType")},{accessorKey:"billingRule",header:o("ai-provider.backend.model.batchEdit.billingRule")},{accessorKey:"membershipLevel",header:()=>m("div",{class:"flex items-center gap-1"},[m("span",o("ai-provider.backend.model.batchEdit.membershipLevel")),m(w,{mode:"hover"},{default:()=>m(_,{name:"i-lucide-circle-help",class:"size-4 cursor-pointer text-muted-foreground"}),content:()=>m("p",{class:"text-sm py-2 px-4 w-64"},o("ai-provider.backend.model.batchEdit.membershipLevelTip"))})])}],u=M(()=>b.models.size===0?[]:JSON.parse(JSON.stringify([...b.models]))),{lockFn:U,isLock:L}=A(async()=>{try{const c=u.value.map(e=>({id:e.id,name:e.name,model:e.model,maxContext:e.maxContext,isActive:e.isActive,billingRule:e.billingRule,membershipLevel:e.membershipLevel}));await H(c),k.success("设置成功"),p("close",!0)}catch(c){console.error("批量编辑失败:",c)}});return(c,e)=>{const V=D,R=J,h=O,B=q,E=P,v=z,S=W,T=G;return f(),I(T,{ui:{content:"max-w-4xl overflow-y-auto h-fit"},onClose:e[1]||(e[1]=t=>p("close",!1))},{title:r(()=>[a("div",null,[a("div",Q,[a("h3",X,s(i(o)("ai-provider.backend.model.batchEdit.dialogTitle")),1),a("p",Y,s(i(o)("ai-provider.backend.model.batchEdit.dialogDescription")),1)]),a("div",Z,[n.provider?.iconUrl?(f(),x("div",ee,[l(V,{src:n.provider.iconUrl,alt:n.provider.name,class:"h-4 w-4 rounded object-cover"},null,8,["src","alt"])])):(f(),x("div",oe,[l(i(_),{name:"i-lucide-building-office",class:"h-4 w-4"})])),a("span",null,s(n.provider?.name),1)])])]),default:r(()=>[l(S,{state:i(u),onSubmit:i(U)},{default:r(()=>[l(E,{columns:$,data:i(u),sticky:"",class:"h-120",ui:{base:"table-fixed border-separate border-spacing-0",thead:"[&>tr]:bg-elevated/50 [&>tr]:after:content-none",tbody:"[&>tr]:last:[&>td]:border-b-0",th:"py-2 whitespace-nowrap first:rounded-l-lg last:rounded-r-lg border-y border-default first:border-l last:border-r [&:nth-child(4)]:min-w-22",td:"border-b border-default cursor-pointer [&:nth-child(4)]:min-w-22",tr:"[&:has(>td[colspan])]:hidden"}},{"billingRule-cell":r(({row:t})=>[a("div",te,[l(h,{name:`rows.${t.index}.billingRule.power`,class:"flex-1"},{default:r(()=>[l(R,{modelValue:t.original.billingRule.power,"onUpdate:modelValue":d=>t.original.billingRule.power=d,modelModifiers:{number:!0},type:"number",placeholder:"",min:0,ui:{base:"pr-32"},onBlur:d=>{t.original.billingRule.power<0&&(t.original.billingRule.power=0)},class:"w-68"},{trailing:r(()=>[a("span",ie,s(i(o)("ai-provider.backend.model.form.power"))+"/ 1K Tokens ",1)]),_:1},8,["modelValue","onUpdate:modelValue","onBlur"])]),_:2},1032,["name"])])]),"membershipLevel-cell":r(({row:t})=>[a("div",re,[l(h,{name:`rows.${t.index}.membershipLevel`,class:"flex-1"},{default:r(()=>[l(B,{modelValue:t.original.membershipLevel,"onUpdate:modelValue":d=>t.original.membershipLevel=d,multiple:!0,placeholder:i(o)("ai-provider.backend.model.batchEdit.membershipLevelAll"),"button-ui":{variant:"outline",class:"w-full"}},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["name"])])]),_:1},8,["data"]),a("div",le,[l(v,{color:"neutral",variant:"soft",onClick:e[0]||(e[0]=t=>p("close",!1))},{default:r(()=>[g(s(i(o)("console-common.cancel")),1)]),_:1}),l(v,{color:"primary",type:"submit",loading:i(L)},{default:r(()=>[g(s(i(o)("console-common.save")),1)]),_:1},8,["loading"])])]),_:1},8,["state","onSubmit"])]),_:1})}}});export{io as default};
