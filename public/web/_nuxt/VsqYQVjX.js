const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DT-6rzPL.js","./Dgvg0_To.js","./BYm23QKU.js","./DGUAW_1C.js","./DDJ79SjH.js","./Ti3HjCpC.js","./DegKy-XA.js","./B1TeSxwV.js","./RmzZBBRE.js","./C4jlvBh2.js","./C-XPfH0G.js","./7d3iyZ8h.js","./CDSfhndf.js","./DJ9SNVgt.js","./CgMDXot0.js","./DVSiT9pd.js","./CZsOHrUj.js","./DaC7Nksz.js","./cwT2REE1.js","./CXk2IlXx.js","./D_1uxSdv.js","./DoL5-2Ox.js","./12pJH7Js.js","./DBwQYu6J.js","./CyS2mNdj.js","./BaKvIqXP.js","./BstbYvQo.js","./6WwfWHXT.js","./KiG0a5S-.js","./kRIii9yh.js","./C6Y-ieo6.js","./DnFVE45b.js","./DSCppvl0.js","./Bjbrn0__.js","./B-p4_8pw.js","./BNMwDuRp.js","./CvZB4bI9.js","./DyTskiS5.js","./Dswg8GCv.js","./ClGKrygo.js","./DaWZu8wl.js","./zDgZcZqa.js","./DcxZIiHI.js","./Dzt0S2LQ.js","./Brlt-NDg.js","./CEOm-hjj.js","./Ds48qA85.js","./Dj9RoBxL.js","./BhyXixVX.js","./CR9qioUt.js","./BRI4D6WA.js","./DlAUqK2U.js","./B0g9CpkI.js"])))=>i.map(i=>d[i]);
import{aC as P,aG as C,aF as ge,aB as be,d as ye,ap as ke,e as xe,Q as we,s as N,au as Me,r as q,j as Ae,aK as S,i as I,w as K,I as ze,c as k,o as m,t as c,v as x,k as w,m as r,q as o,y,x as d,l as p,_ as Se,F as Q,C as H,A as R,D as Ce,z as De,B as Ue,R as E,U as F}from"#entry";import Te from"./CDSfhndf.js";import{_ as Ve}from"./DJ9SNVgt.js";import{_ as Be}from"./12pJH7Js.js";import{_ as $e}from"./6WwfWHXT.js";import{_ as Ie}from"./Bjbrn0__.js";import{_ as Re}from"./B-p4_8pw.js";import{_ as Ee}from"./BNMwDuRp.js";import{_ as Fe}from"./CvZB4bI9.js";import{_ as Pe}from"./DyTskiS5.js";import{e as Le}from"./Dswg8GCv.js";import{D as Oe}from"./ClGKrygo.js";import{u as Ge}from"./zDgZcZqa.js";import{u as je}from"./DcxZIiHI.js";function Ne(n){return P("/ai-models",n)}function Do(n){return P(`/ai-models/${n}`)}function Uo(n){return be("/ai-models",n)}function To(n,b){return C(`/ai-models/${n}`,b)}function qe(n,b){return C(`/ai-models/${n}/toggle-active`,{isActive:b})}function Vo(n){return C("/ai-models/batch/update",{models:n})}function Ke(n,b){return C("/ai-models/batch-toggle-active",{ids:n,isActive:b})}function Qe(n){return ge("/ai-models",{ids:n})}function He(n){return C("/ai-models/batch/sort",{sort:n})}function Bo(n){return P("/ai-models/type-father/list",n)}const Je={class:"w-full space-y-2 px-5 pb-6"},We={class:"mb-4 pl-2"},Xe={class:"mb-4 flex items-center justify-between pl-2"},Ye={class:"flex items-center gap-3"},Ze={class:"text-xs font-medium"},eo={key:0,class:"text-primary"},oo={class:"flex items-center gap-2"},to={key:0,class:"space-y-3"},ao={class:"flex-none"},so={class:"min-w-0 flex-1"},lo={class:"mb-1 flex items-center gap-2"},no={class:"hover:text-primary cursor-pointer truncate text-sm font-medium text-gray-900 transition-colors dark:text-gray-100"},io={class:"flex gap-1"},ro={key:0,class:"text-muted-foreground flex items-center gap-2 text-xs"},co={class:"flex flex-none items-center gap-3"},uo={key:2,class:"py-12 text-center"},mo={class:"text-foreground mb-2 text-lg font-medium"},po={class:"text-muted-foreground text-sm"},vo=ye({__name:"model-list",props:{provider:{}},setup(n){const b=E(()=>F(()=>import("./DT-6rzPL.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42]),import.meta.url)),J=E(()=>F(()=>import("./Dzt0S2LQ.js"),__vite__mapDeps([43,1,12,44,21,37,15,20,45,46,2,3,4,5,6,7,8,9,10,11,13,14,16,17,18,19,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,38,39,40,41,42]),import.meta.url)),W=E(()=>F(()=>import("./Dj9RoBxL.js"),__vite__mapDeps([47,1,36,28,19,29,23,7,30,5,24,25,18,17,6,31,12,44,21,48,34,49,50,51,52,45,46,2,3,4,8,9,10,11,13,14,15,16,20,22,26,27,32,33,35,37,38,39,40,41,42]),import.meta.url)),f=n,D=ke(),{t:a}=xe(),U=we(),{hasAccessByCodes:T}=Ge(),u=N([]),h=Me({modelType:"all",search:""}),s=q(new Set),_=q(new Set),L=N([]),X=async()=>{try{const e=await Le();L.value=[{label:a("ai-provider.backend.model.modelTypes.all"),value:"all"},...e.map(t=>({label:t.label,value:t.value}))]}catch(e){console.error("获取模型类型列表失败:",e)}};Ae(()=>{X()});const{lockFn:v,isLock:O}=S(async()=>{if(f.provider?.id)try{const e=await Ne({providerId:f.provider.id,isActive:void 0,keyword:h.search?.trim()||void 0,modelType:h.modelType==="all"?void 0:h.modelType});u.value=e||[]}catch(e){console.error("获取模型列表失败:",e)}}),{lockFn:Y}=S(async(e,t)=>{try{await qe(e,t);const i=u.value.find(g=>g.id===e);i&&(i.isActive=t),v()}catch(i){console.error("切换模型状态失败:",i)}}),Z=async e=>{await U.create(b).open({id:e.id,provider:f.provider}).result&&v()},ee=async()=>{await U.create(b).open({id:null,provider:f.provider}).result&&v()},oe=async()=>{if(s.value.size===0)return;await U.create(J).open({models:_.value,provider:f.provider}).result&&v(),s.value.clear(),_.value.clear()},te=async()=>{if(s.value.size===0){D.warning(a("ai-provider.backend.messages.selectModel"));return}await U.create(W).open({models:_.value,provider:f.provider}).result&&v(),s.value.clear(),_.value.clear()},{lockFn:G}=S(async e=>{if(s.value.size===0)return;const t=Array.from(s.value);try{await Ke(t,e),D.success(a(e?"ai-provider.backend.model.messages.isActiveEnabled":"ai-provider.backend.model.messages.isActiveDisabled")),s.value.clear(),_.value.clear(),v()}catch(i){console.error("Toggle model active failed:",i)}}),{lockFn:ae}=S(async()=>{if(s.value.size===0)return;const e=Array.from(s.value);try{await je({title:a("ai-provider.backend.model.messages.deleteTitle"),description:a("ai-provider.backend.model.messages.deleteMsg"),color:"error"}),await Qe(e),D.success(a("console-common.batchDeleteSuccess")),s.value.clear(),_.value.clear(),v()}catch(t){console.error("批量删除失败:",t),D.error(a("console-common.batchDeleteFailed"))}}),{lockFn:se,isLock:j}=S(async()=>{if(u.value.length!==0)try{const e=u.value.map(t=>t.id);await He(e),await v()}catch(e){console.error("更新排序失败:",e),await v()}}),B=I({get:()=>u.value,set:e=>{u.value=e,se()}}),le=()=>{const e=[];return T(["ai-models:update"])&&(e.push({label:a("console-common.batchEnable"),icon:"i-lucide-eye",color:"neutral",onSelect:()=>G(!0)}),e.push({label:a("console-common.batchDisable"),icon:"i-lucide-eye-off",color:"neutral",onSelect:()=>G(!1)}),e.push({label:a("console-common.batchEdit"),icon:"i-lucide-edit",color:"neutral",onSelect:()=>oe()})),T(["ai-models:delete"])&&e.push({label:a("console-common.batchDelete"),icon:"i-heroicons-trash",color:"error",onSelect:()=>ae()}),e},ne=e=>{const t=e.id,i=new Set(s.value),g=new Set(_.value);i.has(t)?(i.delete(t),g.delete(e)):(i.add(t),g.add(e)),s.value=i,_.value=g},ie=()=>{if(s.value.size===u.value.length)s.value.clear(),_.value.clear();else{const e=new Set,t=new Set;u.value.forEach(i=>{i.id&&(e.add(i.id),t.add(i))}),s.value=e,_.value=t}},re=I(()=>u.value.length>0&&s.value.size===u.value.length),ce=I(()=>s.value.size>0&&s.value.size<u.value.length),de=e=>{const t=[];return e&&t.push(e.toUpperCase().replaceAll("-"," ")),t};K(()=>f.provider?.id,()=>v(),{immediate:!0});const ue=ze(()=>{v()},300);return K(()=>h,()=>ue()),(e,t)=>{const i=Te,g=Ve,me=Be,A=Se,pe=$e,$=Ie,ve=Ce,z=Re,V=De,fe=Ee,_e=Fe,he=Pe;return m(),k("div",Je,[c("div",We,[r(i,{modelValue:o(h).search,"onUpdate:modelValue":t[0]||(t[0]=l=>o(h).search=l),variant:"soft",placeholder:o(a)("ai-provider.backend.model.searchPlaceholder"),ui:{root:"w-full",base:"bg-accent"}},null,8,["modelValue","placeholder"])]),c("div",Xe,[c("div",Ye,[r(g,{"model-value":o(re),indeterminate:o(ce),"onUpdate:modelValue":ie},null,8,["model-value","indeterminate"]),c("h3",Ze,[y(d(o(a)("ai-provider.backend.model.allModels"))+" "+d(o(u).length)+" "+d(o(a)("ai-provider.backend.model.unit"))+" ",1),o(s).size>0?(m(),k("span",eo," ("+d(o(a)("ai-provider.backend.model.selected"))+" "+d(o(s).size)+" "+d(o(a)("ai-provider.backend.model.unit"))+") ",1)):x("",!0)])]),c("div",oo,[r(me,{modelValue:o(h).modelType,"onUpdate:modelValue":t[1]||(t[1]=l=>o(h).modelType=l),items:o(L),"label-key":"label","value-key":"value",placeholder:o(a)("ai-provider.backend.model.modelTypeFilter"),size:"sm",class:"w-30",onChange:o(v)},null,8,["modelValue","items","placeholder","onChange"]),o(T)(["ai-models:delete"])||o(T)(["ai-models:update"])?(m(),w(pe,{key:0,items:le(),size:"sm",content:{align:"start",side:"bottom",sideOffset:8}},{default:p(()=>[r(A,{color:"neutral",variant:"outline",icon:"i-lucide-list-checks",size:"sm",label:o(a)("ai-provider.backend.model.batchOperation",{count:o(s).size})},null,8,["label"])]),_:1},8,["items"])):x("",!0),r($,{codes:["membership:setting"]},{default:p(()=>[r(A,{color:"primary",variant:"soft",size:"sm",onClick:t[2]||(t[2]=()=>te())},{default:p(()=>[y(d(o(a)("ai-provider.backend.model.billingSetting")),1)]),_:1})]),_:1}),r($,{codes:["ai-models:create"]},{default:p(()=>[r(A,{color:"primary",variant:"soft",icon:"i-lucide-plus",size:"sm",onClick:t[3]||(t[3]=()=>ee())},{default:p(()=>[y(d(o(a)("ai-provider.backend.model.addModel")),1)]),_:1})]),_:1})])]),o(O)&&o(h).search.trim()===""&&o(u).length===0?(m(),k("div",to,[(m(),k(Q,null,H(10,l=>c("div",{key:l,class:"bg-muted flex items-center gap-4 rounded-lg p-8"})),64))])):x("",!0),o(u).length>0?(m(),w(o(Oe),{key:1,modelValue:o(B),"onUpdate:modelValue":t[4]||(t[4]=l=>Ue(B)?B.value=l:null),disabled:o(j),handle:".drag-handle","item-key":"id",animation:"200",class:"space-y-0"},{item:p(({element:l})=>[c("div",{class:R(["group hover:bg-muted flex items-center gap-3 rounded-lg p-2 transition-colors",{"bg-primary/5":o(s).has(l.id)}])},[c("div",{class:R(["flex-none opacity-0 group-hover:opacity-100",{"opacity-100":o(s).has(l.id)}])},[r(g,{"model-value":o(s).has(l.id),"onUpdate:modelValue":M=>ne(l)},null,8,["model-value","onUpdate:modelValue"])],2),c("div",ao,[r(ve,{src:f.provider?.iconUrl,alt:f.provider?.name,ui:{root:"rounded bg-transparent size-8",fallback:"text-inverted"},class:R([f.provider?.iconUrl?"":"bg-primary"])},null,8,["src","alt","class"])]),r(_e,{mode:"hover",content:{align:"center",side:"left",sideOffset:10}},{content:p(()=>[r(fe,{model:l,provider:f.provider,"show-billing-rule":!0},null,8,["model","provider"])]),default:p(()=>[c("div",so,[c("div",lo,[c("h4",no,d(l.name),1),c("div",io,[(m(!0),k(Q,null,H(de(l.modelType),M=>(m(),w(z,{variant:"soft",color:"neutral",key:M,size:"xs"},{default:p(()=>[y(d(M),1)]),_:2},1024))),128)),l.features?.includes("vision")?(m(),w(z,{key:0,variant:"soft",color:"info",size:"xs"},{default:p(()=>[r(V,{name:"i-lucide-image-play",size:"xs"}),y(" "+d(e.$t("common.ai.vision")),1)]),_:1})):x("",!0),l.features?.includes("video")?(m(),w(z,{key:1,variant:"soft",color:"warning",size:"xs"},{default:p(()=>[r(V,{name:"i-lucide-video",class:"mr-1",size:"xs"}),y(" "+d(e.$t("common.ai.video")),1)]),_:1})):x("",!0),l.features?.includes("audio")?(m(),w(z,{key:2,variant:"soft",color:"success",size:"xs"},{default:p(()=>[r(V,{name:"i-lucide-audio-lines",class:"mr-1",size:"xs"}),y(" "+d(e.$t("common.ai.audio")),1)]),_:1})):x("",!0)])]),l.billingRule.power>0?(m(),k("div",ro,[c("span",null,d(l.billingRule?.power||0)+" "+d(o(a)("ai-provider.backend.model.points")),1),t[5]||(t[5]=c("span",null,"•",-1)),c("span",null,d(l.billingRule?.tokens||0)+" "+d(o(a)("ai-provider.backend.model.tokens")),1)])):(m(),w(z,{key:1,variant:"soft",color:"primary",size:"sm"},{default:p(()=>[...t[6]||(t[6]=[y(" Free ",-1)])]),_:1}))])]),_:2},1024),c("div",co,[r($,{codes:["ai-models:update"]},{default:p(()=>[r(A,{color:"primary",variant:"ghost",icon:"i-lucide-edit",size:"sm",onClick:M=>Z(l)},null,8,["onClick"]),r(he,{size:"sm","model-value":l.isActive,"onUpdate:modelValue":M=>o(Y)(l.id,M)},null,8,["model-value","onUpdate:modelValue"]),r(A,{class:"drag-handle cursor-move",color:"neutral",variant:"ghost",icon:"i-lucide-grip-vertical",size:"sm",disabled:o(j)},null,8,["disabled"])]),_:2},1024)])],2)]),_:1},8,["modelValue","disabled"])):!o(O)&&o(u).length===0?(m(),k("div",uo,[r(V,{name:"i-lucide-brain",class:"mx-auto mb-4 h-12 w-12 text-gray-400"}),c("h3",mo,d(o(a)("ai-provider.backend.model.noModels")),1),c("p",po,d(o(a)("ai-provider.backend.model.noModelsDescription")),1)])):x("",!0)])}}}),$o=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"}));export{Do as a,To as b,Uo as c,Vo as d,Bo as e,$o as m};
