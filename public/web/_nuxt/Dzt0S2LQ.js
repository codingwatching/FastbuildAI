import{d as E,e as N,ap as F,i as K,aK as I,k as M,o as f,l as t,m as o,q as l,t as m,_ as T,y as h,x as c,c as v,aW as j,z}from"#entry";import D from"./CDSfhndf.js";import{_ as J}from"./Brlt-NDg.js";import{_ as L}from"./DyTskiS5.js";import{_ as O}from"./CEOm-hjj.js";import{_ as R}from"./Ds48qA85.js";import{_ as q}from"./BYm23QKU.js";import{d as W}from"./VsqYQVjX.js";import"./DoL5-2Ox.js";import"./DVSiT9pd.js";import"./D_1uxSdv.js";import"./DGUAW_1C.js";import"./DDJ79SjH.js";import"./Ti3HjCpC.js";import"./DegKy-XA.js";import"./B1TeSxwV.js";import"./RmzZBBRE.js";import"./C4jlvBh2.js";import"./C-XPfH0G.js";import"./7d3iyZ8h.js";import"./DJ9SNVgt.js";import"./CgMDXot0.js";import"./CZsOHrUj.js";import"./DaC7Nksz.js";import"./cwT2REE1.js";import"./CXk2IlXx.js";import"./12pJH7Js.js";import"./DBwQYu6J.js";import"./CyS2mNdj.js";import"./BaKvIqXP.js";import"./BstbYvQo.js";import"./6WwfWHXT.js";import"./KiG0a5S-.js";import"./kRIii9yh.js";import"./C6Y-ieo6.js";import"./DnFVE45b.js";import"./DSCppvl0.js";import"./Bjbrn0__.js";import"./B-p4_8pw.js";import"./BNMwDuRp.js";import"./CvZB4bI9.js";import"./Dswg8GCv.js";import"./ClGKrygo.js";import"./DaWZu8wl.js";import"./zDgZcZqa.js";import"./DcxZIiHI.js";const G={class:"text-lg font-semibold"},H={class:"text-muted-foreground flex items-center gap-2 text-sm"},P={key:0,class:"flex-none"},Q={key:1,class:"flex-none"},X={class:"flex w-full justify-end gap-2 pt-3.5"},Re=E({__name:"model-batch-edit",props:{models:{},provider:{}},emits:["close"],setup(r,{emit:g}){const b=r,p=g,{t:i}=N(),y=F(),V=[{accessorKey:"name",header:i("ai-provider.backend.model.batchEdit.name")},{accessorKey:"model",header:i("ai-provider.backend.model.batchEdit.model")},{accessorKey:"maxContext",header:i("ai-provider.backend.model.batchEdit.maxContext")},{accessorKey:"isActive",header:i("ai-provider.backend.model.batchEdit.isActive")}],u=K(()=>b.models.size===0?[]:JSON.parse(JSON.stringify([...b.models]))),{lockFn:U,isLock:k}=I(async()=>{try{const s=u.value.map(a=>({id:a.id,name:a.name,model:a.model,maxContext:a.maxContext,isActive:a.isActive,billingRule:a.billingRule}));await W(s),y.success(i("console-common.batchEditSuccess")),p("close",!0)}catch(s){console.error("批量编辑失败:",s)}});return(s,a)=>{const $=j,C=z,_=D,d=J,A=L,S=O,x=T,w=R,B=q;return f(),M(B,{ui:{content:"max-w-4xl overflow-y-auto h-fit"},onClose:a[1]||(a[1]=e=>p("close",!1))},{title:t(()=>[m("div",null,[m("h3",G,c(l(i)("ai-provider.backend.model.batchEditTitle")),1),m("div",H,[r.provider?.iconUrl?(f(),v("div",P,[o($,{src:r.provider.iconUrl,alt:r.provider.name,class:"h-4 w-4 rounded object-cover"},null,8,["src","alt"])])):(f(),v("div",Q,[o(C,{name:"i-lucide-building-office",class:"h-4 w-4"})])),m("span",null,c(r.provider?.name),1)])])]),default:t(()=>[o(w,{state:l(u),onSubmit:l(U)},{default:t(()=>[o(S,{columns:V,data:l(u),sticky:"",class:"h-120",ui:{base:"table-fixed border-separate border-spacing-0",thead:"[&>tr]:bg-elevated/50 [&>tr]:after:content-none",tbody:"[&>tr]:last:[&>td]:border-b-0",th:"py-2 first:rounded-l-lg last:rounded-r-lg border-y border-default first:border-l last:border-r [&:nth-child(4)]:min-w-22",td:"border-b border-default cursor-pointer [&:nth-child(4)]:min-w-22",tr:"[&:has(>td[colspan])]:hidden"}},{"name-cell":t(({row:e})=>[o(d,{name:`rows.${e.index}.name`},{default:t(()=>[o(_,{modelValue:e.original.name,"onUpdate:modelValue":n=>e.original.name=n},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["name"])]),"model-cell":t(({row:e})=>[o(d,{name:`rows.${e.index}.model`},{default:t(()=>[o(_,{modelValue:e.original.model,"onUpdate:modelValue":n=>e.original.model=n},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["name"])]),"maxContext-cell":t(({row:e})=>[o(d,{name:`rows.${e.index}.maxContext`},{default:t(()=>[o(_,{modelValue:e.original.maxContext,"onUpdate:modelValue":n=>e.original.maxContext=n,ui:{base:"w-18"},type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["name"])]),"isActive-cell":t(({row:e})=>[o(d,{name:`rows.${e.index}.isActive`},{default:t(()=>[o(A,{modelValue:e.original.isActive,"onUpdate:modelValue":n=>e.original.isActive=n},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["name"])]),_:1},8,["data"]),m("div",X,[o(x,{color:"neutral",variant:"soft",onClick:a[0]||(a[0]=e=>p("close",!1))},{default:t(()=>[h(c(l(i)("console-common.cancel")),1)]),_:1}),o(x,{color:"primary",type:"submit",loading:l(k)},{default:t(()=>[h(c(l(i)("console-common.save")),1)]),_:1},8,["loading"])])]),_:1},8,["state","onSubmit"])]),_:1})}}});export{Re as default};
