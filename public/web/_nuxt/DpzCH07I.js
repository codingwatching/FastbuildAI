import{u as z,d as W,c as v,o as m,t as e,m as l,aW as P,x as n,z as F,l as g,D as O,ar as X,e as Y,aN as Z,s as k,a$ as T,w as ee,q as t,F as S,C as j,I as te,_ as se,b0 as q,y as $,k as L,v as ae}from"#entry";import oe from"./CDSfhndf.js";import{_ as ne}from"./DRoDiArK.js";import{_ as le}from"./CR9qioUt.js";import{n as N}from"./BI1JbAYD.js";import{_ as ie}from"./BixMXl5t.js";import{_ as re}from"./CsY35JUW.js";import"./BRI4D6WA.js";import"./DlAUqK2U.js";import"./DBwQYu6J.js";import"./DnFVE45b.js";import"./DegKy-XA.js";import"./DSCppvl0.js";import"./7d3iyZ8h.js";function V(i){return z("/ai-agents",i)}function ce(){return z("/agent-decorate")}function de(i){return z("/tag",i)}const ue={class:"mb-3 flex items-start gap-3"},me={class:"border-default bg-muted flex size-10 flex-none items-center justify-center rounded-lg border"},fe={class:"flex min-w-0 flex-1 flex-col"},pe={class:"text-foreground truncate text-sm font-medium"},ge={class:"text-muted-foreground mt-1 text-xs"},_e={class:"text-muted-foreground h-10 pr-8 text-xs"},ve={class:"line-clamp-2 overflow-hidden"},he={class:"flex items-center justify-between pt-2"},xe={class:"text-muted-foreground flex items-center gap-3"},ye={class:"flex items-center gap-1"},be={class:"text-xs"},ke={class:"flex items-center gap-1"},$e={class:"text-xs"},we=W({__name:"square-card",props:{agent:{},showStats:{type:Boolean,default:!0},variant:{default:"default"}},emits:["click"],setup(i,{emit:r}){const f=i,w=r,C=()=>{w("click",f.agent)};return(a,h)=>{const p=P,_=ie,u=F,x=O,B=re;return m(),v("div",{class:"group bg-muted border-border cursor-pointer rounded-lg border p-4 transition-all duration-200 hover:shadow-md",onClick:C},[e("div",ue,[e("div",me,[l(p,{src:i.agent.avatar,alt:"avatar",class:"size-10 rounded-lg object-contain"},null,8,["src"])]),e("div",fe,[e("h3",pe,n(i.agent.name),1),e("div",ge,[e("span",null,n(a.$t("ai-agent.backend.create.edit")),1),l(_,{datetime:i.agent.updatedAt,mode:"datetime"},null,8,["datetime"])])])]),e("div",_e,[e("p",ve,n(i.agent.description),1)]),e("div",he,[e("div",xe,[e("div",ye,[l(u,{name:"i-lucide-message-square-text",class:"size-3"}),e("span",be,n(i.agent.conversationCount),1)]),e("div",ke,[l(u,{name:"i-lucide-users",class:"size-3"}),e("span",$e,n(i.agent.userCount),1)])]),e("div",null,[l(B,{text:i.agent.provider?.name,"delay-duration":0},{default:g(()=>[l(x,{src:i.agent.provider?.iconUrl,class:"size-4"},null,8,["src"])]),_:1},8,["text"])])])])}}}),Ce={class:"container mx-auto flex h-full flex-col"},Be={class:"bg-background sticky top-0 z-10 flex flex-col gap-3 p-4"},Ie={class:"flex items-center justify-between"},Te={class:"hidden flex-none font-bold sm:block sm:text-base lg:text-lg"},qe={class:"relative mx-auto flex w-full max-w-3xl justify-center"},ze={class:"dark:bg-background/30 flex flex-none gap-2 rounded-lg bg-neutral-100 p-1"},Ue={class:"flex flex-wrap gap-2"},Ae={class:"h-full min-h-0"},De={class:"flex h-full min-h-0 flex-col"},Se={key:0,class:"flex flex-col items-center justify-between gap-4 px-4 pb-8 lg:flex-row"},je={class:"flex flex-col gap-6"},Le={class:"flex flex-col gap-2 pr-10"},Ne={class:"line-clamp-2 font-bold sm:text-2xl sm:text-xl lg:text-4xl"},Ve={class:"text-muted-foreground pr-4 text-base"},We={class:"absolute right-0 bottom-0 left-0 p-4"},Pe={class:"text-background text-lg font-bold"},Fe={class:"text-background text-sm"},Ge={key:1,class:"grid grid-cols-1 gap-6 px-4 pt-2 pb-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},Re={key:2},Me={class:"flex h-[70vh] w-full items-center justify-center"},Ee={class:"flex flex-col items-center gap-3"},Qe={class:"text-muted-foreground"},rt=W({__name:"index",async setup(i){let r,f;const w=X(),{t:C}=Y(),a=Z({keyword:"",sortBy:"latest",page:1,pageSize:20}),h=k(!1),p=k(!0),_=k(void 0),u=k([]),x=()=>({keyword:a.keyword,sortBy:a.sortBy,page:a.page,pageSize:a.pageSize,tagIds:_.value?[_.value]:void 0}),{data:B}=([r,f]=T(()=>q("tags",()=>de(),{transform:s=>[{name:C("ai-agent.frontend.square.recommended"),id:void 0},...s]})),r=await r,f(),r),{data:d}=([r,f]=T(()=>q("agent-decorate",()=>ce())),r=await r,f(),r),{data:I,pending:G}=([r,f]=T(()=>q("public-agents-initial",()=>V(x()))),r=await r,f(),r);I.value&&(u.value=I.value.items||[],p.value=I.value.totalPages>(a.page||1));const y=async(s=!1)=>{if(!h.value){h.value=!0,s&&(a.page=1,u.value=[],p.value=!0);try{const o=await V(x());s?u.value=o.items||[]:u.value.push(...o.items||[]),p.value=o.totalPages>(a.page||1)}catch(o){console.error("获取智能体列表失败:",o),p.value=!1}finally{h.value=!1}}},R=async()=>{!p.value||h.value||(a.page=(a.page||1)+1,await y())},U=te(()=>y(!0),500);ee(()=>a.keyword,U);const A=s=>{a.sortBy=s,y(!0)},M=s=>{_.value=s,y(!0)},E=s=>{s.publishToken&&w.push(`/public/agent/explore/${s.publishToken}`)};return(s,o)=>{const Q=F,H=oe,b=se,D=P,J=ne,K=le;return m(),v("div",Ce,[e("div",Be,[e("div",Ie,[e("h2",Te,n(s.$t("ai-agent.frontend.square.square")),1),e("div",qe,[l(H,{modelValue:t(a).keyword,"onUpdate:modelValue":o[0]||(o[0]=c=>t(a).keyword=c),placeholder:s.$t("ai-agent.frontend.square.searchPlaceholder"),class:"sm:w-full lg:w-md",variant:"soft",onInput:t(U)},{leading:g(()=>[l(Q,{name:"i-lucide-search"})]),_:1},8,["modelValue","placeholder","onInput"])]),e("div",ze,[l(b,{color:t(a).sortBy==="latest"?"primary":"neutral",variant:t(a).sortBy==="latest"?"solid":"ghost",onClick:o[1]||(o[1]=c=>A("latest"))},{default:g(()=>[$(n(s.$t("ai-agent.frontend.square.sortByLatest")),1)]),_:1},8,["color","variant"]),l(b,{color:t(a).sortBy==="popular"?"primary":"neutral",variant:t(a).sortBy==="popular"?"solid":"ghost",onClick:o[2]||(o[2]=c=>A("popular"))},{default:g(()=>[$(n(s.$t("ai-agent.frontend.square.sortByPopular")),1)]),_:1},8,["color","variant"])])]),e("div",Ue,[(m(!0),v(S,null,j(t(B),c=>(m(),L(b,{key:c.id??"recommended",color:t(_)===c.id?"primary":"neutral",variant:t(_)===c.id?"soft":"ghost",class:"px-3 py-1",onClick:He=>M(c.id)},{default:g(()=>[$(n(c.name),1)]),_:2},1032,["color","variant","onClick"]))),128))])]),e("div",Ae,[e("section",De,[l(K,{class:"min-0 h-full"},{default:g(()=>[l(J,{loading:t(h)||t(G),"has-more":t(p),"no-more-text":t(a).page===1?" ":"",onLoadMore:R},{default:g(()=>[t(d)?.enabled?(m(),v("div",Se,[e("div",je,[e("div",Le,[e("h1",Ne,[e("span",null,n(t(d)?.title),1)]),e("p",Ve,[e("span",null,n(t(d)?.description),1)])]),e("div",null,[l(b,{color:"neutral",variant:"solid",size:"xl",class:"rounded-full px-6",onClick:o[3]||(o[3]=c=>t(d)?.link&&("navigateToWeb"in s?s.navigateToWeb:t(N))(t(d).link))},{default:g(()=>[$(n(s.$t("ai-agent.frontend.square.ctaLabel")),1)]),_:1})])]),e("div",{class:"relative flex-none overflow-hidden rounded-lg",style:{width:"520px",height:"280px"},onClick:o[4]||(o[4]=c=>t(d)?.link&&("navigateToWeb"in s?s.navigateToWeb:t(N))(t(d).link))},[l(D,{src:t(d)?.heroImageUrl,alt:"square",class:"h-full w-full object-cover"},null,8,["src"]),e("div",We,[l(D,{src:t(d)?.overlayIconUrl,class:"mb-3 size-16 rounded-lg"},null,8,["src"]),e("h3",Pe,n(t(d)?.overlayTitle),1),e("p",Fe,n(t(d)?.overlayDescription),1)])])])):ae("",!0),t(u).length>0?(m(),v("div",Ge,[(m(!0),v(S,null,j(t(u),c=>(m(),L(we,{key:c.id,agent:c,onClick:E},null,8,["agent"]))),128))])):(m(),v("div",Re,[e("div",Me,[e("div",Ee,[e("span",Qe,n(s.$t("ai-agent.frontend.square.noResults")),1)])])]))]),_:1},8,["loading","has-more","no-more-text"])]),_:1})])])])}}});export{rt as default};
