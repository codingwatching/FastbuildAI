import{d as $,aM as w,n as u,l as v,p as y,J as m,q as k,ai as U,c as b,f as R,g as c,o as x,aK as E}from"#entry";const T=["src","title"],F=$({__name:"[...all]",setup(W){const o=w(),r=u(()=>o.path.includes("/console")),t=u(()=>r.value?"":o.fullPath.match(/\/buildingai\/extension\/([^/]+)/)?.[1]||""),d=u(()=>{const e=o.params.all;return Array.isArray(e)&&e.length>1?e.slice(1).join("/"):""}),g=u(()=>{const e=`/extension/${t.value}/`;return d.value?`${e}${d.value}`:e}),a=v(null),f=v(!1),l=v(!1),p=e=>e?`/buildingai/extension/${t.value}/${e}`:`/buildingai/extension/${t.value}`,h=e=>{o.path!==e&&(l.value=!0,window.history.replaceState({...window.history.state},"",e),m(()=>{l.value=!1}))},_=()=>{if(!(r.value||!a.value?.contentWindow||f.value||l.value))try{const{pathname:e,search:n,hash:s}=a.value.contentWindow.location,i=(e+n+s).match(/^\/extension\/[^/]+\/(.*)$/);h(p(i?.[1]||""))}catch{}};return y(()=>d.value,e=>{if(r.value||!a.value||l.value)return;const n=e?`/extension/${t.value}/${e}`:`/extension/${t.value}/`;a.value.src.endsWith(n)||(f.value=!0,a.value.src=n,m(()=>{f.value=!1}))}),k(()=>{const e=n=>{const{type:s,path:i}=n.data||{};s!=="extension-navigation"||i.startsWith("console")||h(p(i))};window.addEventListener("message",e),U(()=>window.removeEventListener("message",e))}),(e,n)=>{const s=E;return c(r)?(x(),R(s,{key:1})):(x(),b("iframe",{key:0,ref_key:"iframeRef",ref:a,src:c(g),class:"h-full w-full border-0",title:`Extension Frontend: ${c(t)}`,onLoad:n[0]||(n[0]=()=>("nextTick"in e?e.nextTick:c(m))(_))},null,40,T))}}});export{F as default};
