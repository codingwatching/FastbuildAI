const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CwhGvpQ4.js","./cd55qm53.js","./C4ofdRUp.js","./D_3bTjYR.js","./D9sX2Qi6.js","./B_IAV05G.js","./CtosDvS0.js","./CAQVAH0V.js","./BCcN9pii.js","./CMKSl-Ng.js","./Deu6qIfg.js","./DBEJUH-Z.js","./CuVAPZQ8.js","./BtLy_Oaq.js","./D19QCKnC.js","./LSmoYDCw.js","./B3XNqw4u.js","./zlMhJk0P.js","./BhB8DUPm.js","./BVraOlsu.js","./BxwUS5gW.js","./MCK2d4XT.js","./EK7Wbu3-.js","./FTderXKt.js","./DaWZu8wl.js","./BoCHxTmQ.js","./CCoSr_X_.js","./DxD6Ynfo.js","./psimjGaX.js","./B3rWqoNg.js","./o4ws_w_T.js","./DBiaUVBh.js","./0Benagh_.js","./BTN3Ax-V.js","./BKdtdX-7.js","./kRIii9yh.js","./C6Y-ieo6.js","./DeCyaT7k.js","./D4e4FYoF.js","./Cuqwcq71.js","./CjasYwqF.js","./BlyoSzaa.js","./CxvgZo8z.js","./DrmU2jdf.js","./tVksIQiG.js"])))=>i.map(i=>d[i]);
import{d as X,av as J,at as Y,i as Z,V as ee,aQ as te,l as se,s as oe,bR as ae,n as v,q as ne,c as g,o as u,x as r,f as D,y as ie,t as i,g as e,z as l,w as _,_ as re,A as R,D as le,H as S,I as T,F as ce,E as de,W as b,B as me,X as y,bS as ue,bT as pe}from"#entry";import _e from"./cd55qm53.js";import{_ as fe}from"./Da7dG-H2.js";import{_ as ge}from"./Cuqwcq71.js";import{_ as he}from"./B3rWqoNg.js";import{_ as ve}from"./B5gsc-Ax.js";import{_ as be}from"./DNb4RPhn.js";import{_ as ye}from"./BkF8DltG.js";import{_ as we}from"./BgeYBRhp.js";import{u as ke}from"./CxvgZo8z.js";import{u as xe}from"./ZDOPDbaX.js";import{u as Ue}from"./oxig-ZyS.js";import"./DvKR6pUC.js";import"./BKdtdX-7.js";import"./CtosDvS0.js";import"./kRIii9yh.js";import"./DxD6Ynfo.js";import"./BhB8DUPm.js";import"./C6Y-ieo6.js";import"./zlMhJk0P.js";import"./DeCyaT7k.js";import"./D4e4FYoF.js";import"./BCcN9pii.js";import"./CMKSl-Ng.js";import"./CuVAPZQ8.js";import"./psimjGaX.js";import"./Be9qZ8Md.js";import"./MCK2d4XT.js";import"./EK7Wbu3-.js";import"./jsPNKUA0.js";import"./CjasYwqF.js";import"./CAQVAH0V.js";import"./DBEJUH-Z.js";import"./Deu6qIfg.js";import"./D9sX2Qi6.js";import"./o4ws_w_T.js";import"./Bzv9SrOl.js";import"./o0-e7Rye.js";const Ce={class:"user-list-container pb-5"},De={class:"bg-background sticky top-0 z-10 flex flex-wrap gap-4 pb-2"},Re={class:"flex items-center gap-2 md:ml-auto"},Se={class:"flex items-center gap-2"},Te={class:"text-accent-foreground text-sm"},Ve={class:"grid grid-cols-1 gap-6 py-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4"},Pe={key:1,class:"flex h-[calc(100vh-10rem)] items-center justify-center"},ze={class:"flex items-center gap-3"},Ee={class:"text-accent-foreground"},Ae={key:2,class:"flex h-[calc(100vh-10rem)] flex-col items-center justify-center"},Ie={class:"text-accent-foreground"},$e={key:3,class:"bg-background sticky bottom-0 z-10 flex items-center justify-between gap-3 py-4"},Be={class:"text-muted text-sm"},Le={class:"flex items-center gap-1.5"},Ut=X({__name:"list",setup(Me){const V=b(()=>y(()=>import("./CwhGvpQ4.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url)),P=b(()=>y(()=>import("./BoCHxTmQ.js"),__vite__mapDeps([25,2,26,27,28,12,29,22,30,31,32,33,34,6,35,18,36,17,37,38,8,9,39,40,7,11,10,4,41,42]),import.meta.url)),z=b(()=>y(()=>import("./DrmU2jdf.js"),__vite__mapDeps([43,2,31,33,34,6,35,27,18,36,17,37,38,8,9,12,28,29,22,30,44,41,42]),import.meta.url)),E=J(),A=Y(),{t:d}=Z(),I=ee(),m=te({keyword:"",startTime:"",endTime:""}),f=se(2),$=[{value:2,icon:"i-tabler-list"},{value:1,icon:"i-tabler-layout-grid"}],n=oe(new Set),{paging:a,getLists:p}=xe({fetchFun:ae,params:m}),h=v(()=>a.items.filter(t=>t.isRoot!==1)),B=(t,s)=>{if(typeof s=="boolean"){const c=t.id;s?n.value.add(c):n.value.delete(c)}},L=t=>{t===!0?h.value.forEach(c=>{c.id&&n.value.add(c.id)}):n.value.clear()},w=async t=>{try{await Ue({title:d("user.backend.deleteTitle"),description:d("user.backend.deleteMsg"),color:"error"}),Array.isArray(t)?await ue(t.map(String)):await pe(String(t)),n.value.clear(),p(),A.success(d("user.backend.success"))}catch(s){console.error("Delete failed:",s)}},M=t=>{t.id&&w(t.id)},F=async t=>{await I.create(V).open({user:t}).result&&p()},N=t=>{F(t)},O=()=>{const t=Array.from(n.value);t.length!==0&&w(t)},j=v(()=>h.value.length>0&&h.value.every(t=>t.id&&n.value.has(t.id))),q=v(()=>{const t=a.items.filter(s=>s.id&&n.value.has(s.id)).length;return t>0&&t<a.items.length});return ne(()=>p()),(t,s)=>{const c=_e,k=fe,G=ge,H=he,x=re,U=ve,K=be,Q=ye,C=me,W=we;return u(),g("div",Ce,[r("div",De,[i(c,{modelValue:e(m).keyword,"onUpdate:modelValue":s[0]||(s[0]=o=>e(m).keyword=o),placeholder:e(d)("user.backend.keywordInput"),class:"w-80",onChange:e(p)},null,8,["modelValue","placeholder","onChange"]),i(k,{start:e(m).startTime,"onUpdate:start":s[1]||(s[1]=o=>e(m).startTime=o),end:e(m).endTime,"onUpdate:end":s[2]||(s[2]=o=>e(m).endTime=o),"show-time":!0,ui:{root:"w-auto sm:w-xs"},onChange:e(p)},null,8,["start","end","onChange"]),r("div",Re,[r("div",Se,[i(G,{"model-value":e(j)?!0:e(q)?"indeterminate":!1,"onUpdate:modelValue":L},null,8,["model-value"]),r("span",Te,l(e(n).size)+" / "+l(e(a).items.length)+" "+l(e(d)("console-common.selected")),1)]),i(U,{codes:["users:batch-delete"]},{default:_(()=>[i(x,{color:"error",variant:"subtle",label:e(d)("console-common.batchDelete"),icon:"i-heroicons-trash",disabled:e(n).size===0,onClick:O},{trailing:_(()=>[i(H,null,{default:_(()=>[R(l(e(n).size),1)]),_:1})]),_:1},8,["label","disabled"])]),_:1}),i(U,{codes:["users:create"]},{default:_(()=>[i(x,{icon:"i-heroicons-plus",color:"primary",onClick:s[3]||(s[3]=o=>e(E).push(("useRoutePath"in t?t.useRoutePath:e(ke))("users:create")))},{default:_(()=>[R(l(e(d)("user.backend.add")),1)]),_:1})]),_:1}),i(K,{modelValue:e(f),"onUpdate:modelValue":s[4]||(s[4]=o=>le(f)?f.value=o:null),items:$,size:"xs",ui:{root:"gap-0",indicator:"bg-background dark:bg-primary",leadingIcon:"bg-black dark:bg-white"}},null,8,["modelValue"])])]),!e(a).loading&&e(a).items.length>0?(u(),D(Q,{key:0,class:"h-[calc(100vh-13rem)]",shadow:!1},{default:_(()=>[S(r("div",Ve,[(u(!0),g(ce,null,de(e(a).items,o=>(u(),D(e(P),{key:o.id,user:o,selected:e(n).has(o.id),onEditPower:N,onSelect:B,onDelete:M},null,8,["user","selected"]))),128))],512),[[T,e(f)===1]]),S(i(e(z),{usersList:e(a).items},null,8,["usersList"]),[[T,e(f)===2]])]),_:1})):e(a).loading?(u(),g("div",Pe,[r("div",ze,[i(C,{name:"i-lucide-loader-2",class:"text-primary-500 h-6 w-6 animate-spin"}),r("span",Ee,l(t.$t("common.loading")),1)])])):(u(),g("div",Ae,[i(C,{name:"i-lucide-users",class:"text-muted-foreground mb-4 h-16 w-16"}),r("p",Ie,l(t.$t("user.backend.noUsers")),1)])),e(a).total>0?(u(),g("div",$e,[r("div",Be,l(e(n).size)+" "+l(t.$t("console-common.selected")),1),r("div",Le,[i(W,{page:e(a).page,"onUpdate:page":s[5]||(s[5]=o=>e(a).page=o),size:e(a).pageSize,"onUpdate:size":s[6]||(s[6]=o=>e(a).pageSize=o),total:e(a).total,onChange:e(p)},null,8,["page","size","total","onChange"])])])):ie("",!0)])}}});export{Ut as default};
