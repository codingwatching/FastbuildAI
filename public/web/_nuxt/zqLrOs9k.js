import B from"./cd55qm53.js";import{_ as C}from"./D_3bTjYR.js";import{_ as T}from"./DUJH4dqr.js";import{d as k,i as F,at as S,aQ as $,s as z,aN as _,q as I,c as L,o as D,t as s,w as a,x as d,z as u,g as e,_ as W,A as w}from"#entry";import{_ as j}from"./B5gsc-Ax.js";import{_ as A}from"./BtLy_Oaq.js";import{a as E,b as G}from"./C1E-FicH.js";import{c as M,b as m}from"./FTderXKt.js";import{u as P}from"./UqhBTNL6.js";import"./D9sX2Qi6.js";import"./DWy_CFG9.js";import"./td2xDKru.js";import"./RPflLnqr.js";import"./TrJvDfxI.js";import"./jsPNKUA0.js";import"./Bzv9SrOl.js";import"./DaWZu8wl.js";const R={class:"copyright-container mt-8"},Q={class:"mb-2 text-lg font-bold"},H={class:"flex items-start gap-4"},J={class:"mb-2 text-lg font-bold"},K={class:"flex w-full gap-4"},O={class:"bg-background sticky bottom-0 flex space-x-3 py-4"},ge=k({__name:"copyright",setup(X){const{t:o}=F(),g=S(),t=$({displayName:"",iconUrl:"",url:"",copyrightText:"",copyrightBrand:"",copyrightUrl:""}),c=z(null),U=M({displayName:m().required(o("system.website.copyright.displayName.required")),iconUrl:m().required(o("system.website.copyright.icon.required")),url:m().required(o("system.website.copyright.url.required")),copyrightText:m().test("copyright-info-required",o("system.website.copyright.copyrightInfo.required"),function(i){const{copyrightBrand:l}=this.parent;return!!(i&&l)}),copyrightUrl:m().required(o("system.website.copyright.copyrightUrl.required"))}),{lockFn:h,isLock:b}=_(async()=>{try{const i=await E();c.value=i,P(t,i.copyright)}catch(i){console.error("Get website config failed:",i)}}),{lockFn:x,isLock:y}=_(async()=>{try{const i={copyright:{displayName:t.displayName,iconUrl:t.iconUrl,url:t.url,copyrightText:t.copyrightText,copyrightBrand:t.copyrightBrand,copyrightUrl:t.copyrightUrl}};await G(i),g.success(o("system.website.messages.saveSuccess")),await h()}catch(i){console.error("Save failed:",i)}}),V=()=>{c.value?(t.displayName=c.value.copyright.displayName||"",t.iconUrl=c.value.copyright.iconUrl||"",t.url=c.value.copyright.url||"",t.copyrightText=c.value.copyright.copyrightText||"",t.copyrightBrand=c.value.copyright.copyrightBrand||"",t.copyrightUrl=c.value.copyright.copyrightUrl||"",g.info(o("system.website.messages.resetSuccess"))):(t.displayName="",t.iconUrl="",t.url="",t.copyrightText="",t.copyrightBrand="",t.copyrightUrl="",g.info(o("system.website.messages.resetEmpty")))};return I(()=>h()),(i,l)=>{const n=B,p=C,v=T,f=W,N=j,q=A;return D(),L("div",R,[s(q,{schema:e(U),state:e(t),class:"space-y-6",onSubmit:e(x)},{default:a(()=>[d("h4",Q,u(e(o)("system.website.copyright.sections.filing")),1),s(p,{name:"displayName",label:e(o)("system.website.copyright.displayName.label"),required:""},{default:a(()=>[s(n,{modelValue:e(t).displayName,"onUpdate:modelValue":l[0]||(l[0]=r=>e(t).displayName=r),size:"lg",ui:{root:"w-full"},placeholder:e(o)("system.website.copyright.displayName.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(p,{name:"iconUrl",label:e(o)("system.website.copyright.icon.label"),required:""},{default:a(()=>[d("div",H,[s(v,{modelValue:e(t).iconUrl,"onUpdate:modelValue":l[1]||(l[1]=r=>e(t).iconUrl=r),class:"h-24 w-24",text:e(o)("system.website.copyright.icon.upload"),icon:"i-lucide-upload",accept:".jpg,.png,.jpeg",maxCount:1,single:!0},null,8,["modelValue","text"])])]),_:1},8,["label"]),s(p,{name:"url",label:e(o)("system.website.copyright.url.label"),required:""},{default:a(()=>[s(n,{modelValue:e(t).url,"onUpdate:modelValue":l[2]||(l[2]=r=>e(t).url=r),size:"lg",ui:{root:"w-full"},placeholder:e(o)("system.website.copyright.url.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d("h4",J,u(e(o)("system.website.copyright.sections.copyright")),1),s(p,{name:"copyrightText",label:e(o)("system.website.copyright.copyrightInfo.label"),required:""},{default:a(()=>[d("div",K,[s(n,{modelValue:e(t).copyrightText,"onUpdate:modelValue":l[3]||(l[3]=r=>e(t).copyrightText=r),size:"lg",class:"flex-1",placeholder:e(o)("system.website.copyright.copyrightInfo.textPlaceholder")},null,8,["modelValue","placeholder"]),s(n,{modelValue:e(t).copyrightBrand,"onUpdate:modelValue":l[4]||(l[4]=r=>e(t).copyrightBrand=r),size:"lg",class:"flex-1",placeholder:e(o)("system.website.copyright.copyrightInfo.brandPlaceholder")},null,8,["modelValue","placeholder"])])]),_:1},8,["label"]),s(p,{name:"copyrightUrl",label:e(o)("system.website.copyright.copyrightUrl.label"),required:""},{default:a(()=>[s(n,{modelValue:e(t).copyrightUrl,"onUpdate:modelValue":l[5]||(l[5]=r=>e(t).copyrightUrl=r),size:"lg",ui:{root:"w-full"},placeholder:e(o)("system.website.copyright.copyrightUrl.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d("div",O,[s(N,{codes:["system-website:setConfig"]},{default:a(()=>[s(f,{type:"submit",color:"primary",loading:e(y),disabled:e(y)||e(b)},{default:a(()=>[w(u(e(y)?e(o)("system.website.actions.saving"):e(o)("system.website.actions.saveChanges")),1)]),_:1},8,["loading","disabled"])]),_:1}),s(f,{type:"reset",color:"neutral",variant:"outline",disabled:e(y)||e(b),onClick:V},{default:a(()=>[w(u(e(o)("system.website.actions.reset")),1)]),_:1},8,["disabled"])])]),_:1},8,["schema","state","onSubmit"])])}}});export{ge as default};
