const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BQjuU1b_.js","./Dgvg0_To.js","./DJ9SNVgt.js","./CgMDXot0.js","./DVSiT9pd.js","./CZsOHrUj.js","./DegKy-XA.js","./DaC7Nksz.js","./cwT2REE1.js","./CXk2IlXx.js","./D_1uxSdv.js","./DoL5-2Ox.js"])))=>i.map(i=>d[i]);
import{d as D,aX as G,f as K,ap as X,e as Y,aN as Z,aK as H,i as u,k as V,o as l,l as m,m as n,c as p,v as _,t as c,q as e,bU as J,A as w,x as d,z as A,F as Q,C as W,y as h,R as ee,_ as te,U as se,bV as oe}from"#entry";import re from"./CDSfhndf.js";import{_ as ne}from"./Brlt-NDg.js";import{_ as ae}from"./C9inLFuJ.js";import{_ as ie}from"./CvZB4bI9.js";import{_ as le}from"./Ds48qA85.js";import{L as me}from"./BlL7sPt6.js";import{c as ce,a as U}from"./BUyfW8JT.js";import{u as ue}from"./HHGKx3uz.js";import"./DoL5-2Ox.js";import"./KiG0a5S-.js";import"./CXk2IlXx.js";import"./kRIii9yh.js";import"./DBwQYu6J.js";import"./B1TeSxwV.js";import"./C6Y-ieo6.js";import"./Ti3HjCpC.js";import"./CyS2mNdj.js";import"./BaKvIqXP.js";import"./cwT2REE1.js";import"./DaC7Nksz.js";import"./DegKy-XA.js";import"./DnFVE45b.js";import"./CGkf3lDq.js";import"./B_bYPYFo.js";import"./DY-cUyKw.js";/* empty css        */import"./DlAUqK2U.js";import"./q_YSI2Sf.js";import"./BD5zOh0K.js";import"./Dc6e1ewN.js";import"./DVSiT9pd.js";import"./D_1uxSdv.js";import"./BvBcSqjy.js";import"./BzLCLO6P.js";import"./CIZXtYrT.js";import"./DaWZu8wl.js";import"./DcxZIiHI.js";const pe={class:"flex"},de={key:0,class:"mt-2"},ge={class:"inline-flex items-center","aria-label":"Password requirements"},_e={class:"space-y-1 p-2","aria-label":"Password requirements"},fe={class:"text-xs font-light"},we={class:"sr-only"},he={key:0,class:"mt-8 mb-4 text-left"},rt=D({__name:"login",emits:["switchComponent","success"],setup(xe,{emit:C}){const L=ee(()=>se(()=>import("./BQjuU1b_.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url)),x=C,{ensureAgreementAccepted:q}=ue({width:"!w-[420px]"},A),f=G(),v=K(),z=X(),{t}=Y(),F=ce({username:U().required(t("login.validation.accountRequired")).min(3,t("login.validation.accountMinLength")),password:U().required(t("login.validation.passwordRequired")).min(6,t("login.validation.passwordMinLength")).max(25,t("login.validation.passwordMaxLength"))}),a=Z({username:"",password:"",terminal:"1"}),{lockFn:N,isLock:M}=H(async()=>{if(await q())try{const o=await oe(a);x("success",o)}catch(o){z.error(t("login.messages.loginFailed")),console.error(t("login.messages.loginFailed"),o)}});function T(s){return[{regex:/.{8,}/,text:t("login.requirements.minLength8")},{regex:/\d/,text:t("login.requirements.number")},{regex:/[a-z]/,text:t("login.requirements.lowercase")},{regex:/[A-Z]/,text:t("login.requirements.uppercase")}].map(g=>({met:g.regex.test(s),text:g.text}))}const y=u(()=>T(a.password)),i=u(()=>y.value.filter(s=>s.met).length),b=u(()=>i.value===0?"neutral":i.value<=1?"error":i.value<=2||i.value===3?"warning":"success"),k=u(()=>i.value===0?"":i.value<=1?t("login.strength.weak"):i.value<=3?t("login.strength.medium"):t("login.strength.strong")),B=u(()=>{const s=b.value;return s==="error"?"text-error":s==="warning"?"text-warning":s==="success"?"text-success":"text-muted"});return(s,o)=>{const g=re,S=ne,I=ae,R=J,$=A,E=ie,P=te,O=le;return l(),V(O,{schema:e(F),state:e(a),onSubmit:e(N)},{default:m(()=>[n(S,{label:s.$t("login.account"),name:"username",required:""},{default:m(()=>[n(g,{modelValue:e(a).username,"onUpdate:modelValue":o[0]||(o[0]=r=>e(a).username=r),class:"w-full",size:"lg",ui:{base:"bg-transparent p-3"},placeholder:s.$t("login.usernamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(S,{label:s.$t("login.password"),name:"password",class:"mt-2",required:""},{default:m(()=>[c("div",pe,[n(I,{modelValue:e(a).password,"onUpdate:modelValue":o[1]||(o[1]=r=>e(a).password=r),class:"w-full",type:"password",size:"lg",ui:{base:"bg-transparent p-3"},placeholder:s.$t("login.passwordPlaceholder")},null,8,["modelValue","placeholder"])]),e(a).password?(l(),p("div",de,[n(R,{color:e(b),"model-value":e(i),max:4,size:"sm"},null,8,["color","model-value"]),e(k)?(l(),p("div",{key:0,class:w(["mt-1 flex items-center gap-1 text-xs font-medium",e(B)])},[c("span",null,d(e(k)),1),n(E,{mode:"hover","open-delay":0},{content:m(()=>[c("ul",_e,[(l(!0),p(Q,null,W(e(y),(r,j)=>(l(),p("li",{key:j,class:w(["flex items-center gap-0.5",r.met?"text-success":"text-muted"])},[n($,{name:r.met?"i-lucide-circle-check":"i-lucide-circle-x",class:"size-4 shrink-0"},null,8,["name"]),c("span",fe,[h(d(r.text)+" ",1),c("span",we,d(r.met?e(t)("login.strength.met"):e(t)("login.strength.notMet")),1)])],2))),128))])]),default:m(()=>[c("span",ge,[n($,{name:"i-lucide-help-circle",class:"size-3.5"})])]),_:1})],2)):_("",!0)])):_("",!0)]),_:1},8,["label"]),e(f).loginSettings?.showPolicyAgreement?(l(),p("div",he,[n(e(L),{modelValue:e(v).isAgreed,"onUpdate:modelValue":o[2]||(o[2]=r=>e(v).isAgreed=r)},null,8,["modelValue"])])):_("",!0),c("div",{class:w(["flex flex-1 gap-4 pb-8",{"mt-8":!e(f).loginSettings?.showPolicyAgreement}])},[e(f).loginSettings?.allowedRegisterMethods.includes(e(me).ACCOUNT)?(l(),V(P,{key:0,variant:"outline",color:"primary",size:"lg",ui:{base:"flex-1 justify-center p-3"},onClick:o[3]||(o[3]=r=>x("switchComponent","account-register"))},{default:m(()=>[h(d(s.$t("login.register")),1)]),_:1})):_("",!0),n(P,{color:"primary",type:"submit",size:"lg",ui:{base:"flex-1 justify-center p-3"},loading:e(M)},{default:m(()=>[h(d(s.$t("login.loginNow")),1)]),_:1},8,["loading"])],2)]),_:1},8,["schema","state","onSubmit"])}}});export{rt as default};
