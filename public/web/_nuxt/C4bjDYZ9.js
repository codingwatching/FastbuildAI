import{d as E,e as j,s as g,i as x,j as I,k as Q,o as d,l as o,c as m,v as _,x as r,q as i,t as n,m as s,y as T,_ as F,z as O,D as R,A as G,aV as H}from"#entry";import{_ as J}from"./CsY35JUW.js";import{_ as K}from"./DyTskiS5.js";import{_ as L}from"./DNJQj0yQ.js";import{a as P}from"./CbK4UO9G.js";import{u as W}from"./zDgZcZqa.js";import"./DBwQYu6J.js";import"./DnFVE45b.js";import"./DegKy-XA.js";import"./DSCppvl0.js";import"./7d3iyZ8h.js";import"./DoL5-2Ox.js";import"./DVSiT9pd.js";import"./D_1uxSdv.js";import"./6WwfWHXT.js";import"./KiG0a5S-.js";import"./CXk2IlXx.js";import"./kRIii9yh.js";import"./B1TeSxwV.js";import"./C6Y-ieo6.js";import"./Ti3HjCpC.js";import"./CyS2mNdj.js";import"./BaKvIqXP.js";import"./cwT2REE1.js";import"./DaC7Nksz.js";import"./DJ9SNVgt.js";import"./CgMDXot0.js";import"./CZsOHrUj.js";const X={key:0,class:"bg-primary absolute top-3 -left-6 w-22 -rotate-45 text-center text-xs font-bold text-white shadow-md"},Y={class:"flex items-center gap-4"},Z={class:"flex h-12 flex-col justify-start"},ee={class:"text-secondary-foreground flex items-center text-base font-semibold"},te={class:"line-clamp-1"},ce=["href"],oe={class:"line-clamp-1"},ne={class:"max-w-100"},re={key:0,class:"text-muted-foreground line-clamp-2 text-xs"},ie={key:1,class:"text-muted-foreground line-clamp-2 text-xs"},se={class:"max-w-100"},ae={key:0,class:"flex flex-row items-center gap-1.5"},le={class:"line-clamp-2 text-xs text-red-500"},de={class:"flex items-center justify-between gap-2"},me={class:"flex items-center gap-1"},Te=E({__name:"mcp-server-card",props:{mcpServer:{},selected:{type:Boolean,default:!1},isUpdate:{}},emits:["select","delete","edit","set-quick-menu","view-models","toggle-active"],setup(e,{emit:y}){const c=e,a=y,{t:l}=j(),{hasAccessByCodes:f}=W(),p=g(""),S=g(""),w=async()=>{const t=await P(c.mcpServer.id);p.value=t.connectable,S.value=t.error},C=x(()=>p.value===""?c.mcpServer.connectable:p.value),u=x(()=>p.value===""?c.mcpServer.connectError:S.value),U=x(()=>{const t=[];return f(["ai-provider.backends:update"])&&t.push({label:l("console-common.edit"),icon:"i-lucide-edit",onSelect:()=>a("edit",c.mcpServer)}),f(["ai-provider.backends:update"])&&!c.mcpServer.isQuickMenu&&t.push({label:l("ai-mcp.backend.setQuickMenu"),icon:"i-lucide-star",onSelect:()=>a("set-quick-menu",c.mcpServer)}),f(["ai-provider.backends:delete"])&&(t.length>0&&t.push({type:"separator",label:"",onSelect:()=>{}}),t.push({label:l("console-common.delete"),icon:"i-lucide-trash-2",color:"error",onSelect:()=>a("delete",c.mcpServer)})),t});function B(){a("view-models",c.mcpServer.id)}function z(t){typeof t=="boolean"&&a("select",c.mcpServer,t)}function $(t){return t?/^https?:\/\//i.test(t)?t:"https://"+t:"#"}return I(()=>{c.isUpdate?.includes(c.mcpServer.id)&&(w(),c.isUpdate?.splice(c.isUpdate.indexOf(c.mcpServer.id),1))}),(t,b)=>{const M=R,N=H,v=J,k=O,V=K,A=F,q=L;return d(),Q(q,{class:"flex flex-col overflow-hidden",selectable:"",clickable:"","show-actions":"",variant:"outlined",selected:e.selected,actions:i(U),onSelect:z},{icon:o(({groupHoverClass:h,selectedClass:D})=>[n("div",Y,[s(N,{color:i(C)?"success":"error",position:"top-right"},{default:o(()=>[s(M,{src:e.mcpServer.icon,alt:e.mcpServer.name,size:"3xl",ui:{root:"rounded-lg",fallback:"text-inverted"},class:G([h,D,e.mcpServer.icon?"":"bg-primary"])},null,8,["src","alt","class"])]),_:2},1032,["color"]),n("div",Z,[n("h3",ee,[s(v,{text:e.mcpServer.name,delay:0},{default:o(()=>[n("span",te,r(e.mcpServer.alias||e.mcpServer.name),1)]),_:1},8,["text"])]),e.mcpServer.providerName?(d(),m("a",{key:0,href:$(e.mcpServer.providerUrl),class:"text-muted-foreground hover:text-primary group/a flex items-center gap-1 text-xs hover:underline",target:"_blank",rel:"noopener noreferrer"},[n("span",oe," @ "+r(e.mcpServer.providerName),1),s(k,{name:"tabler:external-link",class:"flex-none opacity-0 group-hover/a:opacity-100",size:"12"})],8,ce)):_("",!0)])])]),description:o(()=>[s(v,{disabled:!e.mcpServer.description,"delay-duration":0,ui:{content:"max-w-100 !whitespace-pre-wrap leading-relaxed h-fit p-2"}},{content:o(()=>[n("div",ne,r(e.mcpServer.description),1)]),default:o(()=>[e.mcpServer.description?(d(),m("h4",re,r(e.mcpServer.description),1)):(d(),m("h4",ie,r(i(l)("ai-mcp.backend.noDescription")),1))]),_:1},8,["disabled"]),s(v,{text:i(u),ui:{content:"max-w-100 !whitespace-pre-wrap leading-relaxed h-fit p-2"},"delay-duration":0},{content:o(()=>[n("div",se,r(i(u)),1)]),default:o(()=>[i(u)?(d(),m("div",ae,[s(k,{name:"tabler:plug-connected-x",size:"16",class:"text-red-500"}),n("h4",le,r(i(u)),1)])):_("",!0)]),_:1},8,["text"])]),footer:o(()=>[n("div",de,[s(V,{"model-value":!e.mcpServer.isDisabled,"onUpdate:modelValue":b[0]||(b[0]=h=>a("toggle-active",e.mcpServer.id,!h)),"unchecked-icon":"i-lucide-x","checked-icon":"i-lucide-check",size:"md"},null,8,["model-value"]),n("div",me,[s(A,{icon:"i-lucide-eye",variant:"ghost",size:"sm",onClick:B},{default:o(()=>[T(r(i(l)("console-common.check")),1)]),_:1})])])]),default:o(()=>[e.mcpServer.isQuickMenu?(d(),m("div",X,r(i(l)("ai-mcp.backend.quickMenu")),1)):_("",!0)]),_:1},8,["selected","actions"])}}});export{Te as default};
