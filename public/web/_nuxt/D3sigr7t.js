const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Bn3x5XaC.js","./ilPiIi3f.js","./Dgvg0_To.js","./CDSfhndf.js","./CjOovgR0.js","./DXP7Kkdt.js","./BRI4D6WA.js","./DlAUqK2U.js","./Brlt-NDg.js","./DoL5-2Ox.js","./tnelovi7.js","./CXk2IlXx.js","./DVSiT9pd.js","./cwT2REE1.js","./DaC7Nksz.js","./D_1uxSdv.js","./CZsOHrUj.js","./DegKy-XA.js","./12pJH7Js.js","./DBwQYu6J.js","./Ti3HjCpC.js","./CyS2mNdj.js","./BaKvIqXP.js","./B1TeSxwV.js","./BstbYvQo.js","./DyTskiS5.js","./CEOm-hjj.js","./Ds48qA85.js","./BjYsydzc.js","./BYm23QKU.js","./DGUAW_1C.js","./DDJ79SjH.js","./RmzZBBRE.js","./C4jlvBh2.js","./C-XPfH0G.js","./7d3iyZ8h.js","./Tmc8NqSi.js","./BUyfW8JT.js","./DaWZu8wl.js","./UqhBTNL6.js"])))=>i.map(i=>d[i]);
import{d as I,e as j,ap as B,Q as w,aN as K,i as N,h as R,j as M,c as O,o as P,t as u,m as i,q as s,l as r,_ as F,y,x as h,D as J,A as L,R as q,U as Q}from"#entry";import{_ as G}from"./BixMXl5t.js";import H from"./CDSfhndf.js";import{_ as W}from"./6WwfWHXT.js";import{_ as X}from"./DyTskiS5.js";import{_ as Y}from"./CEOm-hjj.js";import{_ as Z}from"./4yDHJZoY.js";import{c as ee,u as te,d as ae,e as oe,f as se,i as ie}from"./Tmc8NqSi.js";import{u as ne}from"./C1xCp5oe.js";import"./KiG0a5S-.js";import"./CXk2IlXx.js";import"./kRIii9yh.js";import"./DBwQYu6J.js";import"./B1TeSxwV.js";import"./C6Y-ieo6.js";import"./Ti3HjCpC.js";import"./CyS2mNdj.js";import"./BaKvIqXP.js";import"./cwT2REE1.js";import"./DaC7Nksz.js";import"./DegKy-XA.js";import"./DnFVE45b.js";import"./DSCppvl0.js";import"./7d3iyZ8h.js";import"./DoL5-2Ox.js";import"./DVSiT9pd.js";import"./D_1uxSdv.js";import"./DhlnS5e0.js";import"./DlAUqK2U.js";const re={class:"flex h-full flex-col gap-4"},ce={class:"flex items-center justify-between"},le={class:"flex-1 overflow-y-auto"},de={class:"bg-background flex items-center justify-end gap-3 py-4"},me={class:"flex items-center gap-1.5"},Pe=I({__name:"type",setup(pe){const S=q(()=>Q(()=>import("./Bn3x5XaC.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]),import.meta.url)),k=G,{t:a}=j(),d=B(),v=w(),_=K({name:""}),{paging:c,getLists:n}=ne({fetchFun:ee,params:_}),x=N(()=>[{accessorKey:"icon",header:a("ai-secret.backend.type.form.icon")},{accessorKey:"name",header:a("ai-secret.backend.type.form.name")},{accessorKey:"isActived",header:a("ai-secret.backend.type.form.isActived")},{accessorKey:"createdAt",header:a("console-common.createAt"),cell:({row:t})=>{const e=t.getValue("createdAt");return R(k,{datetime:e,mode:"datetime"})}},{accessorKey:"action",header:a("console-common.operation")}]),A=t=>{const e=[];return e.push({label:a("ai-secret.backend.type.form.edit"),icon:"i-lucide-edit",onClick:()=>{f(t.original.id)}}),e.push({label:a("ai-secret.backend.type.form.delete"),icon:"i-lucide-trash",color:"error",onSelect(){if(!t.original.id){console.error("Row data missing ID");return}E(t.original.id)}}),e},C=async t=>{if(!t.original.id){console.error("行数据缺少 ID");return}try{await te(t.original.id,{isEnabled:t.original.isEnabled}),d.success(t.original.isEnabled?a("ai-secret.backend.type.enableSuccess"):a("ai-secret.backend.type.disableSuccess")),n()}catch(e){console.error("更新状态失败:",e)}},T=async(t,e)=>{try{e?await oe(e,t):await se(t),d.success(a("ai-secret.backend.type.edit.submitSuccess")),n()}catch(m){console.error("表单提交失败:",m)}},U=async t=>{try{await ie({jsonData:t}),d.success(a("ai-secret.backend.type.edit.submitSuccess")),n()}catch(e){console.error("JSON导入失败:",e)}},E=async t=>{try{await ae(t),d.success(a("ai-secret.backend.type.deleteSuccess")),n()}catch(e){console.error("删除失败:",e)}},f=(t,e=!1)=>{v.create(S).open({id:t,isJsonImport:e,onSubmit:(l,p)=>{T(l,p)},"onJson-submit":l=>{U(l)}})},b=(t=!1)=>{f(void 0,t)};return M(()=>n()),(t,e)=>{const m=H,l=F,p=W,V=J,D=X,z=Y,$=Z;return P(),O("div",re,[u("div",ce,[i(m,{modelValue:s(_).name,"onUpdate:modelValue":e[0]||(e[0]=o=>s(_).name=o),placeholder:"请输入名称...",onChange:s(n)},null,8,["modelValue","onChange"]),i(p,{size:"lg",items:[{label:s(a)("ai-mcp.backend.quickCreateTitle"),icon:"i-heroicons-plus",color:"primary",onSelect:()=>b()},{label:s(a)("ai-mcp.backend.importTitle"),icon:"i-lucide-file-json-2",color:"primary",onSelect:()=>b(!0)}]},{default:r(()=>[i(l,{color:"primary",icon:"i-lucide-plus"},{default:r(()=>[y(h(s(a)("ai-secret.backend.type.addType")),1)]),_:1})]),_:1},8,["items"])]),u("div",le,[i(z,{sticky:"",class:"h-full",columns:s(x),data:s(c).items,ui:{base:"table-fixed border-separate border-spacing-0",thead:"[&>tr]:bg-elevated/50 [&>tr]:after:content-none",tbody:"[&>tr]:last:[&>td]:border-b-0",th:"py-2 first:rounded-l-lg last:rounded-r-lg border-y border-default first:border-l last:border-r",td:"border-b border-default",tr:"[&:has(>td[colspan])]:hidden"}},{"icon-cell":r(({row:o})=>[i(V,{src:o.original.icon,alt:o.original.name,size:"md",ui:{image:"rounded-lg",fallback:"text-inverted font-medium"},class:L([o.original.icon?"":"bg-primary"])},null,8,["src","alt","class"])]),"type-cell":r(({row:o})=>[y(h(o.original.type==="system"?s(a)("ai-secret.backend.type.form.system"):s(a)("ai-secret.backend.type.form.custom")),1)]),"isActived-cell":r(({row:o})=>[i(D,{"model-value":!!o.original.isEnabled,"onUpdate:modelValue":g=>o.original.isEnabled=g?1:0,onChange:g=>C(o)},null,8,["model-value","onUpdate:modelValue","onChange"])]),"action-cell":r(({row:o})=>[i(p,{items:A(o)},{default:r(()=>[i(l,{icon:"i-lucide-ellipsis-vertical",color:"neutral",variant:"ghost"})]),_:1},8,["items"])]),_:1},8,["columns","data"])]),u("div",de,[u("div",me,[i($,{page:s(c).page,"onUpdate:page":e[1]||(e[1]=o=>s(c).page=o),size:s(c).pageSize,"onUpdate:size":e[2]||(e[2]=o=>s(c).pageSize=o),total:s(c).total,onChange:s(n)},null,8,["page","size","total","onChange"])])])])}}});export{Pe as default};
