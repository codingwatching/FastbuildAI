import{aA as J,d as L,ac as X,ad as Ce,af as Z,bp as le,r as x,ae as ne,w as xe,H as A,aj as z,k as E,o as q,l as w,$ as K,v as se,q as t,a0 as V,ah as we,m as re,bB as T,p as Q,i as P,cI as Ee,j as qe,ag as Ie,n as W,Z as ue,cJ as ke,cC as Le}from"#entry";import{u as de}from"./DegKy-XA.js";import{u as Ke}from"./CXk2IlXx.js";import{u as Ve}from"./DVSiT9pd.js";import{u as Be}from"./kRIii9yh.js";import{u as Fe}from"./BaKvIqXP.js";import{g as Se}from"./DaC7Nksz.js";import{V as Ae}from"./D_1uxSdv.js";function He(n,r,a){const l=n.findIndex(v=>J(v,r)),d=n.findIndex(v=>J(v,a));if(l===-1||d===-1)return[];const[s,c]=[l,d].sort((v,u)=>v-u);return n.slice(s,c+1)}function Te(n,r,a){return n===void 0?!1:Array.isArray(n)?n.some(l=>H(l,r,a)):H(n,r,a)}function H(n,r,a){return n===void 0||r===void 0?!1:typeof n=="string"?n===r:typeof a=="function"?a(n,r):typeof a=="string"?n?.[a]===r?.[a]:J(n,r)}const[Y,Re]=X("ListboxRoot");var Me=L({__name:"ListboxRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},orientation:{type:String,required:!1,default:"vertical"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1,default:"toggle"},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(n,{expose:r,emit:a}){const l=n,d=a,{multiple:s,highlightOnHover:c,orientation:v,disabled:u,selectionBehavior:_,dir:g}=Ce(l),{getItems:y}=Z({isProvider:!0}),{handleTypeaheadSearch:B}=Fe(),{primitiveElement:R,currentElement:p}=le(),C=Be(),D=Ke(g),fe=Ve(p),M=x(),F=x(!1),$=x(!0),m=ne(l,"modelValue",d,{defaultValue:l.defaultValue??(s.value?[]:void 0),passive:l.modelValue===void 0,deep:!0});function ce(e){if(F.value=!0,l.multiple){const i=Array.isArray(m.value)?[...m.value]:[],o=i.findIndex(f=>H(f,e,l.by));l.selectionBehavior==="toggle"?(o===-1?i.push(e):i.splice(o,1),m.value=i):(m.value=[e],M.value=e)}else l.selectionBehavior==="toggle"&&H(m.value,e,l.by)?m.value=void 0:m.value=e;setTimeout(()=>{F.value=!1},1)}const h=x(null),G=x(null),I=x(!1),N=x(!1),ee=z(),O=z(),te=z();function j(){return y().map(e=>e.ref).filter(e=>e.dataset.disabled!=="")}function b(e,i=!0){if(!e)return;h.value=e,$.value&&h.value.focus(),i&&h.value.scrollIntoView({block:"nearest"});const o=y().find(f=>f.ref===e);d("highlight",o)}function ve(e){if(I.value)te.trigger(e);else{const i=y().find(o=>H(o.value,e,l.by));i&&(h.value=i.ref,b(i.ref))}}function pe(e){h.value&&h.value.isConnected&&(e.preventDefault(),e.stopPropagation(),N.value||h.value.click())}function me(e){if($.value){if(F.value=!0,I.value)O.trigger(e);else{const i=e.altKey||e.ctrlKey||e.metaKey;if(i&&e.key==="a"&&s.value){const o=y(),f=o.map(k=>k.value);m.value=[...f],e.preventDefault(),b(o[o.length-1].ref)}else if(!i){const o=B(e.key,y());o&&b(o)}}setTimeout(()=>{F.value=!1},1)}}function he(){N.value=!0}function ye(){A(()=>{N.value=!1})}function ae(){A(()=>{const e=new KeyboardEvent("keydown",{key:"PageUp"});ie(e)})}function U(e){const i=h.value;i?.isConnected&&(G.value=i),h.value=null,d("leave",e)}function ge(e){const i=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if(e.currentTarget?.dispatchEvent(i),d("entryFocus",i),!i.defaultPrevented)if(G.value)b(G.value);else{const o=j()?.[0];b(o)}}function ie(e){const i=Se(e,v.value,D.value);if(!i)return;let o=j();if(h.value){if(i==="last")o.reverse();else if(i==="prev"||i==="next"){i==="prev"&&o.reverse();const f=o.indexOf(h.value);o=o.slice(f+1)}be(e,o[0])}if(o.length){const f=!h.value&&i==="prev"?o.length-1:0;b(o[f])}if(I.value)return O.trigger(e)}function be(e,i){if(!(I.value||l.selectionBehavior!=="replace"||!s.value||!Array.isArray(m.value)||(e.altKey||e.ctrlKey||e.metaKey)&&!e.shiftKey)&&e.shiftKey){const f=y().filter(S=>S.ref.dataset.disabled!=="");let k=f.find(S=>S.ref===i)?.value;if(e.key===C.END?k=f[f.length-1].value:e.key===C.HOME&&(k=f[0].value),!k||!M.value)return;const _e=He(f.map(S=>S.value),M.value,k);m.value=_e}}async function oe(e){if(await A(),I.value)ee.trigger(e);else{const i=j(),o=i.find(f=>f.dataset.state==="checked");o?b(o):i.length&&b(i[0])}}return xe(m,()=>{F.value||A(()=>{oe()})},{immediate:!0,deep:!0}),r({highlightedElement:h,highlightItem:ve,highlightFirstItem:ae,highlightSelected:oe,getItems:y}),Re({modelValue:m,onValueChange:ce,multiple:s,orientation:v,dir:D,disabled:u,highlightOnHover:c,highlightedElement:h,isVirtual:I,virtualFocusHook:ee,virtualKeydownHook:O,virtualHighlightHook:te,by:l.by,firstValue:M,selectionBehavior:_,focusable:$,onLeave:U,onEnter:ge,changeHighlight:b,onKeydownEnter:pe,onKeydownNavigation:ie,onKeydownTypeAhead:me,onCompositionStart:he,onCompositionEnd:ye,highlightFirstItem:ae}),(e,i)=>(q(),E(t(V),{ref_key:"primitiveElement",ref:R,as:e.as,"as-child":e.asChild,dir:t(D),"data-disabled":t(u)?"":void 0,onPointerleave:U,onFocusout:i[0]||(i[0]=async o=>{const f=o.relatedTarget||o.target;await A(),h.value&&t(p)&&!t(p).contains(f)&&U(o)})},{default:w(()=>[K(e.$slots,"default",{modelValue:t(m)}),t(fe)&&e.name?(q(),E(t(Ae),{key:0,name:e.name,value:t(m),disabled:t(u),required:e.required},null,8,["name","value","disabled","required"])):se("v-if",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),at=Me,Pe=L({__name:"ListboxContent",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const{CollectionSlot:r}=Z(),a=Y(),l=we(!1,10);return(d,s)=>(q(),E(t(r),null,{default:w(()=>[re(t(V),{role:"listbox",as:d.as,"as-child":d.asChild,tabindex:t(a).focusable.value?t(a).highlightedElement.value?"-1":"0":"-1","aria-orientation":t(a).orientation.value,"aria-multiselectable":!!t(a).multiple.value,"data-orientation":t(a).orientation.value,onMousedown:s[0]||(s[0]=Q(c=>l.value=!0,["left"])),onFocus:s[1]||(s[1]=c=>{t(l)||t(a).onEnter(c)}),onKeydown:[s[2]||(s[2]=T(c=>{t(a).orientation.value==="vertical"&&(c.key==="ArrowLeft"||c.key==="ArrowRight")||t(a).orientation.value==="horizontal"&&(c.key==="ArrowUp"||c.key==="ArrowDown")||(c.preventDefault(),t(a).focusable.value&&t(a).onKeydownNavigation(c))},["down","up","left","right","home","end"])),T(t(a).onKeydownEnter,["enter"]),t(a).onKeydownTypeAhead]},{default:w(()=>[K(d.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),it=Pe,De=L({__name:"ListboxFilter",props:{modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},emits:["update:modelValue"],setup(n,{emit:r}){const a=n,d=ne(a,"modelValue",r,{defaultValue:"",passive:a.modelValue===void 0}),s=Y(),{primitiveElement:c,currentElement:v}=le(),u=P(()=>a.disabled||s.disabled.value||!1),_=x();return Ee(()=>_.value=s.highlightedElement.value?.id),qe(()=>{s.focusable.value=!1,setTimeout(()=>{a.autoFocus&&v.value?.focus()},1)}),Ie(()=>{s.focusable.value=!0}),(g,y)=>(q(),E(t(V),{ref_key:"primitiveElement",ref:c,as:g.as,"as-child":g.asChild,value:t(d),disabled:u.value?"":void 0,"data-disabled":u.value?"":void 0,"aria-disabled":u.value??void 0,"aria-activedescendant":_.value,type:"text",onKeydown:[T(Q(t(s).onKeydownNavigation,["prevent"]),["down","up","home","end"]),T(t(s).onKeydownEnter,["enter"])],onInput:y[0]||(y[0]=B=>{d.value=B.target.value,t(s).highlightFirstItem()}),onCompositionstart:t(s).onCompositionStart,onCompositionend:t(s).onCompositionEnd},{default:w(()=>[K(g.$slots,"default",{modelValue:t(d)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),ot=De;const[lt,$e]=X("ListboxGroup");var Ge=L({__name:"ListboxGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const r=n,a=de(void 0,"reka-listbox-group");return $e({id:a}),(l,d)=>(q(),E(t(V),W({role:"group"},r,{"aria-labelledby":t(a)}),{default:w(()=>[K(l.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),nt=Ge;const Ne="listbox.select",[Oe,je]=X("ListboxItem");var Ue=L({__name:"ListboxItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},emits:["select"],setup(n,{emit:r}){const a=n,l=r,d=de(void 0,"reka-listbox-item"),{CollectionItem:s}=Z(),{forwardRef:c,currentElement:v}=ue(),u=Y(),_=P(()=>v.value===u.highlightedElement.value),g=P(()=>Te(u.modelValue.value,a.value,u.by)),y=P(()=>u.disabled.value||a.disabled);async function B(p){l("select",p),!p?.defaultPrevented&&!y.value&&p&&(u.onValueChange(a.value),u.changeHighlight(v.value))}function R(p){const C={originalEvent:p,value:a.value};Le(Ne,B,C)}return je({isSelected:g}),(p,C)=>(q(),E(t(s),{value:p.value},{default:w(()=>[ke([_.value,g.value],()=>re(t(V),W({id:t(d)},p.$attrs,{ref:t(c),role:"option",tabindex:t(u).focusable.value?_.value?"0":"-1":-1,"aria-selected":g.value,as:p.as,"as-child":p.asChild,disabled:y.value?"":void 0,"data-disabled":y.value?"":void 0,"data-highlighted":_.value?"":void 0,"data-state":g.value?"checked":"unchecked",onClick:R,onKeydown:T(Q(R,["prevent"]),["space"]),onPointermove:C[0]||(C[0]=()=>{t(u).highlightedElement.value!==t(v)&&t(u).highlightOnHover.value&&!t(u).focusable.value&&t(u).changeHighlight(t(v),!1)})}),{default:w(()=>[K(p.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),C,1)]),_:3},8,["value"]))}}),st=Ue,ze=L({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const r=n;ue();const a=Oe();return(l,d)=>t(a).isSelected.value?(q(),E(t(V),W({key:0,"aria-hidden":"true"},r),{default:w(()=>[K(l.$slots,"default")]),_:3},16)):se("v-if",!0)}}),rt=ze;export{ot as L,it as a,nt as b,st as c,rt as d,at as e,Y as f,lt as i};
