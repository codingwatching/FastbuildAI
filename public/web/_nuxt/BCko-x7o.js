import{_ as X}from"./DyTskiS5.js";import Y from"./CDSfhndf.js";import{_ as Z}from"./Brlt-NDg.js";import{_ as D}from"./12pJH7Js.js";import{_ as ee}from"./BWJXWQJA.js";import oe from"./BjYsydzc.js";import{d as le,aJ as te,e as ae,au as ie,s as de,w as re,aK as ne,i as se,j as me,k as x,o as c,l as r,m as d,t as i,x as s,q as o,z as pe,y as h,c as f,F as ce,C as ue,v as y,A as fe,_ as be}from"#entry";import{_ as ve}from"./CvZB4bI9.js";import{_ as _e}from"./BhyXixVX.js";import{_ as xe}from"./DU_7w33M.js";import{_ as he}from"./CR9qioUt.js";import{_ as ke}from"./Ds48qA85.js";import{e as ge}from"./VsqYQVjX.js";import{c as ye,a as k,e as C,b as w,d as Ce}from"./BUyfW8JT.js";import"./DoL5-2Ox.js";import"./DVSiT9pd.js";import"./D_1uxSdv.js";import"./CXk2IlXx.js";import"./DBwQYu6J.js";import"./Ti3HjCpC.js";import"./CyS2mNdj.js";import"./BaKvIqXP.js";import"./B1TeSxwV.js";import"./BstbYvQo.js";import"./DegKy-XA.js";import"./BD5zOh0K.js";import"./Dc6e1ewN.js";import"./kRIii9yh.js";import"./DaC7Nksz.js";import"./KiG0a5S-.js";import"./C6Y-ieo6.js";import"./cwT2REE1.js";import"./DnFVE45b.js";import"./B-p4_8pw.js";import"./B0g9CpkI.js";import"./r8IkyAmp.js";import"./CHCbUdJ4.js";import"./CgMDXot0.js";import"./BRI4D6WA.js";import"./DlAUqK2U.js";import"./DJ9SNVgt.js";import"./CZsOHrUj.js";import"./6WwfWHXT.js";import"./DSCppvl0.js";import"./7d3iyZ8h.js";import"./Bjbrn0__.js";import"./BNMwDuRp.js";import"./Dswg8GCv.js";import"./ClGKrygo.js";import"./DaWZu8wl.js";import"./zDgZcZqa.js";import"./DcxZIiHI.js";const Ve={class:"space-y-4 rounded-lg lg:col-span-2"},Ue={class:"flex items-center justify-between"},Te={class:"text-secondary-foreground text-sm font-medium"},$e={class:"text-muted-foreground mt-1 text-xs"},we={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},Le={class:"text-muted-foreground text-xs"},Pe={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},Re={class:"text-muted-foreground text-sm"},qe={class:"text-muted-foreground text-xs"},Me={class:"pb-3 text-[16px] font-bold"},Fe={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},Ae={class:"flex w-full items-center gap-2"},Se={class:"text-muted-foreground text-sm"},ze={class:"text-muted-foreground text-xs"},Be={class:"flex items-center gap-1"},Ie={class:"w-64 px-4 py-2 text-sm"},Oe={class:"space-y-4"},je={class:"flex items-start justify-between gap-3"},Ne={class:"min-w-0 flex-1"},Ee={key:0},He={class:"text-sm font-medium"},Ke={class:"text-muted-foreground mt-1 text-xs"},Ge={key:1,class:"space-y-2"},Je={class:"grid grid-cols-1 gap-2"},Qe={key:0,class:"text-xs text-red-500"},We={class:"flex items-center gap-2"},Xe={key:0,class:"pt-2"},Ye={class:"flex justify-center pt-4"},Ze={class:"flex justify-end gap-4"},Zo=le({__name:"model-form",props:{isEdit:{type:Boolean,default:!1},id:{default:""},initialData:{default:()=>({})}},emits:["submit-success","cancel"],setup(L,{emit:P}){const V=L,U=P,{query:R}=te(),{t:e}=ae(),q=()=>[{field:"temperature",title:e("ai-provider.backend.modelConfig.temperature.title"),description:e("ai-provider.backend.modelConfig.temperature.description"),value:1,enable:!0},{field:"top_p",title:e("ai-provider.backend.modelConfig.top_p.title"),description:e("ai-provider.backend.modelConfig.top_p.description"),value:1,enable:!0},{field:"max_tokens",title:e("ai-provider.backend.modelConfig.max_tokens.title"),description:e("ai-provider.backend.modelConfig.max_tokens.description"),value:4096,enable:!0},{field:"top_k",title:e("ai-provider.backend.modelConfig.top_k.title"),description:e("ai-provider.backend.modelConfig.top_k.description"),value:50,enable:!0},{field:"frequency_penalty",title:e("ai-provider.backend.modelConfig.frequency_penalty.title"),description:e("ai-provider.backend.modelConfig.frequency_penalty.description"),value:0,enable:!0},{field:"presence_penalty",title:e("ai-provider.backend.modelConfig.presence_penalty.title"),description:e("ai-provider.backend.modelConfig.presence_penalty.description"),value:0,enable:!0},{field:"stop",title:e("ai-provider.backend.modelConfig.stop.title"),description:e("ai-provider.backend.modelConfig.stop.description"),value:null,enable:!1}],g={temperature:{min:0,max:2,step:.1},top_p:{min:0,max:1,step:.1},max_tokens:{min:1,max:2048,step:1},top_k:{min:1,max:100,step:1},frequency_penalty:{min:0,max:2,step:.1},presence_penalty:{min:0,max:2,step:.1}},a=ie({name:"",providerId:"",model:"",maxContext:3,modelConfig:q(),isActive:!0,isDefault:!1,features:[],description:"",sortOrder:0,modelType:void 0,membershipLevel:[],billingRule:{power:0,tokens:1e3}}),T=de([]),M=ye({name:k().required(e("ai-provider.backend.model.validation.nameRequired")).max(100,e("ai-provider.backend.model.validation.nameMaxLength")),model:k().required(e("ai-provider.backend.model.validation.modelRequired")).max(100,e("ai-provider.backend.model.validation.modelMaxLength")),maxTokens:C().min(1,e("ai-provider.backend.model.validation.maxTokensMin")).nullable(),maxContext:C().min(1,e("ai-provider.backend.model.validation.maxContextMin")).nullable(),features:Ce(),description:k().max(500,e("ai-provider.backend.model.validation.descriptionMaxLength")).nullable(),isActive:w(),isDefault:w(),sortOrder:C().nullable(),modelType:k().required(e("ai-provider.backend.model.validation.modelTypeRequired"))}),F=async()=>{const t=await ge({providerId:R.providerId});T.value=t};re(()=>V.initialData,t=>{t&&Object.keys(t).length>0&&Object.assign(a,{name:t.name||"",providerId:t.providerId||"",model:t.model||"",maxContext:t.maxContext,maxTokens:t.maxTokens,modelConfig:t.modelConfig,isActive:t.isActive??!0,features:t.features||[],isDefault:t.isDefault??!1,description:t.description||"",sortOrder:t.sortOrder||0,modelType:t.modelType||"",membershipLevel:t.membershipLevel||[],billingRule:{power:t.billingRule?.power||0,tokens:t.billingRule?.tokens||0}})},{immediate:!0,deep:!0});const{isLock:A,lockFn:S}=ne(async()=>{try{const t={...a};U("submit-success",t)}catch(t){console.error("Form validation failed:",t)}}),z=()=>{U("cancel")},$=(t,n)=>a.modelConfig?a.modelConfig.some((b,m)=>m!==n&&b.field===t&&t.trim()!==""):!1,B=t=>{a.modelConfig?.splice(t,1)},I=()=>{const t={field:"",title:"",description:"",value:null,enable:!0};a.modelConfig?.push(t)},O=se(()=>[{label:e("common.ai.audio"),value:"audio"},{label:e("common.ai.video"),value:"video"},{label:e("common.ai.vision"),value:"vision"},{label:e("common.ai.agentThought"),value:"agent-thought",disabled:!0},{label:e("common.ai.document"),value:"document",disabled:!0},{label:e("common.ai.multiToolCall"),value:"multi-tool-call",disabled:!0},{label:e("common.ai.streamToolCall"),value:"stream-tool-call",disabled:!0},{label:e("common.ai.structuredOutput"),value:"structured-output",disabled:!0},{label:e("common.ai.toolCall"),value:"tool-call",disabled:!0}]);return me(()=>{F()}),(t,n)=>{const b=X,m=Y,u=Z,j=D,N=ee,E=oe,H=pe,K=ve,G=_e,v=be,J=xe,Q=he,W=ke;return c(),x(W,{ref:"formRef",state:o(a),schema:o(M),class:"space-y-8",onSubmit:o(S)},{default:r(()=>[d(Q,{class:"h-130",shadow:!1},{default:r(()=>[i("div",Ve,[i("div",Ue,[i("div",null,[i("h4",Te,s(o(e)("ai-provider.backend.model.form.isDefault")),1),i("p",$e,s(o(e)("ai-provider.backend.model.form.setAsDefault")),1)]),d(b,{modelValue:o(a).isDefault,"onUpdate:modelValue":n[0]||(n[0]=l=>o(a).isDefault=l),"unchecked-icon":"i-lucide-star-off","checked-icon":"i-lucide-star",color:"warning"},null,8,["modelValue"])]),i("div",we,[d(u,{label:o(e)("ai-provider.backend.model.form.name"),name:"name",required:""},{hint:r(()=>[i("span",Le,s(o(e)("ai-provider.backend.model.form.nameHelp")),1)]),default:r(()=>[d(m,{modelValue:o(a).name,"onUpdate:modelValue":n[1]||(n[1]=l=>o(a).name=l),placeholder:o(e)("ai-provider.backend.model.form.namePlaceholder"),maxlength:100,class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(u,{label:o(e)("ai-provider.backend.model.form.model"),name:"model",required:""},{default:r(()=>[d(m,{modelValue:o(a).model,"onUpdate:modelValue":n[2]||(n[2]=l=>o(a).model=l),placeholder:o(e)("ai-provider.backend.model.form.modelPlaceholder"),maxlength:100,class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),i("div",Pe,[d(u,{label:o(e)("ai-provider.backend.model.form.maxContext"),name:"maxContext"},{hint:r(()=>[i("span",qe,s(o(e)("ai-provider.backend.model.form.maxContextHelp")),1)]),default:r(()=>[d(m,{modelValue:o(a).maxContext,"onUpdate:modelValue":n[3]||(n[3]=l=>o(a).maxContext=l),modelModifiers:{number:!0},type:"number",placeholder:o(e)("ai-provider.backend.model.form.maxContextPlaceholder"),min:1,ui:{root:"w-full",base:"pr-15"}},{trailing:r(()=>[i("span",Re,s(o(e)("ai-provider.backend.model.form.maxContextUnit")),1)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),d(u,{label:o(e)("ai-provider.backend.model.form.modelType"),name:"modelType",required:""},{default:r(()=>[d(j,{modelValue:o(a).modelType,"onUpdate:modelValue":n[4]||(n[4]=l=>o(a).modelType=l),items:o(T),placeholder:o(e)("ai-provider.backend.model.form.modelTypePlaceholder"),class:"w-full"},null,8,["modelValue","items","placeholder"])]),_:1},8,["label"])]),d(u,{label:o(e)("ai-provider.backend.model.form.multimodal"),name:"features"},{default:r(()=>[d(N,{modelValue:o(a).features,"onUpdate:modelValue":n[5]||(n[5]=l=>o(a).features=l),"open-on-click":"",multiple:"",items:o(O),"value-key":"value",placeholder:o(e)("ai-provider.backend.model.form.multimodalPlaceholder"),class:"w-full"},null,8,["modelValue","items","placeholder"])]),_:1},8,["label"]),d(u,{label:o(e)("ai-provider.backend.model.form.description"),name:"description"},{default:r(()=>[d(E,{modelValue:o(a).description,"onUpdate:modelValue":n[6]||(n[6]=l=>o(a).description=l),placeholder:o(e)("ai-provider.backend.model.form.descriptionPlaceholder"),maxlength:500,rows:4,class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i("div",null,[i("h1",Me,s(o(e)("ai-provider.backend.model.form.billing")),1),i("div",Fe,[d(u,{label:o(e)("ai-provider.backend.model.form.billing"),name:"billing"},{hint:r(()=>[i("span",ze,s(o(e)("ai-provider.backend.model.form.billingHelp")),1)]),default:r(()=>[i("div",Ae,[d(m,{modelValue:o(a).billingRule.power,"onUpdate:modelValue":n[7]||(n[7]=l=>o(a).billingRule.power=l),modelModifiers:{number:!0},type:"number",placeholder:"",min:0,ui:{base:"pr-30"},onBlur:n[8]||(n[8]=l=>{o(a).billingRule.power<0&&(o(a).billingRule.power=0)}),class:"w-full"},{trailing:r(()=>[i("span",Se,s(o(e)("ai-provider.backend.model.form.power"))+"/ 1K Tokens ",1)]),_:1},8,["modelValue"])])]),_:1},8,["label"]),d(u,{name:"membershipLevel",class:"flex-1"},{label:r(()=>[i("div",Be,[i("span",null,s(o(e)("ai-provider.backend.model.batchEdit.membershipLevel")),1),d(K,{mode:"hover",content:{side:"top"}},{content:r(()=>[i("p",Ie,s(o(e)("ai-provider.backend.model.batchEdit.membershipLevelTip")),1)]),default:r(()=>[d(H,{name:"i-lucide-circle-help",class:"text-muted-foreground size-4 cursor-pointer"})]),_:1})])]),default:r(()=>[d(G,{modelValue:o(a).membershipLevel,"onUpdate:modelValue":n[9]||(n[9]=l=>o(a).membershipLevel=l),multiple:!0,placeholder:o(e)("ai-provider.backend.model.batchEdit.membershipLevelAll"),"button-ui":{variant:"outline",class:"w-full"}},null,8,["modelValue","placeholder"])]),_:1})])]),i("div",Oe,[d(J,{items:[{}],ui:{header:"px-0 ",label:"text-[16px] font-semibold",content:"px-0",body:"flex flex-col gap-2",trigger:" !shadow-none"}},{body:r(()=>[(c(!0),f(ce,null,ue(o(a).modelConfig,(l,_)=>(c(),f("div",{key:`${l.field}-${_}`,class:"bg-muted rounded-lg p-4"},[i("div",je,[i("div",Ne,[g[l.field]?(c(),f("div",Ee,[i("h4",He,s(l.title),1),i("p",Ke,s(l.description),1)])):(c(),f("div",Ge,[i("div",Je,[d(m,{modelValue:l.field,"onUpdate:modelValue":p=>l.field=p,placeholder:o(e)("ai-provider.backend.modelConfig.custom.fieldPlaceholder"),class:fe($(l.field,Number(_))?"border-red-500":""),ui:{root:"w-full"}},null,8,["modelValue","onUpdate:modelValue","placeholder","class"]),d(m,{modelValue:l.value,"onUpdate:modelValue":p=>l.value=p,placeholder:o(e)("ai-provider.backend.modelConfig.custom.valuePlaceholder"),class:"w-full"},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),$(l.field,Number(_))?(c(),f("p",Qe,s(o(e)("ai-provider.backend.modelConfig.validation.duplicateField")),1)):y("",!0)]))]),i("div",We,[d(b,{modelValue:l.enable,"onUpdate:modelValue":p=>l.enable=p,size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),g[l.field]?y("",!0):(c(),x(v,{key:0,color:"error",variant:"ghost",size:"xs",icon:"i-lucide-trash-2",onClick:p=>B(Number(_))},null,8,["onClick"]))])]),l.enable&&g[l.field]?(c(),f("div",Xe,[l.field==="stop"?(c(),x(m,{key:0,modelValue:l.value,"onUpdate:modelValue":p=>l.value=p,placeholder:o(e)("ai-provider.backend.modelConfig.stop.placeholder"),size:"sm",class:"w-full"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):(c(),x(m,{key:1,modelValue:l.value,"onUpdate:modelValue":p=>l.value=p,placeholder:o(e)("ai-provider.backend.modelConfig.stop.placeholder"),size:"sm",class:"w-full",type:"number"},null,8,["modelValue","onUpdate:modelValue","placeholder"]))])):y("",!0)]))),128)),i("div",Ye,[d(v,{color:"primary",variant:"soft",size:"sm",icon:"i-lucide-plus",onClick:I},{default:r(()=>[h(s(o(e)("ai-provider.backend.modelConfig.addParameter")),1)]),_:1})])]),default:r(()=>[h(s(o(e)("ai-provider.backend.modelConfig.title"))+" ",1)]),_:1})])])]),_:1}),i("div",Ze,[d(v,{color:"neutral",variant:"outline",onClick:z,class:"px-8"},{default:r(()=>[h(s(o(e)("console-common.cancel")),1)]),_:1}),d(v,{color:"primary",loading:o(A),type:"submit",class:"px-8"},{default:r(()=>[h(s(V.isEdit?o(e)("console-common.update"):o(e)("console-common.create")),1)]),_:1},8,["loading"])])]),_:1},8,["state","schema","onSubmit"])}}});export{Zo as default};
