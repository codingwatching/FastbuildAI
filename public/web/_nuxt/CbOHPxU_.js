import{_ as B}from"./ilPiIi3f.js";import{_ as C}from"./Brlt-NDg.js";import x from"./CDSfhndf.js";import P from"./BjYsydzc.js";import{d as j,e as N,ap as D,ar as I,aN as M,aK as R,j as S,k as T,o as z,l as r,m as n,t as _,q as t,y as p,x as d,_ as L}from"#entry";import{_ as A}from"./Ds48qA85.js";import{_ as K}from"./BYm23QKU.js";import{q as E}from"./ChM0pAjz.js";import{c as G,a as g}from"./BUyfW8JT.js";import{u as H}from"./Dx01Lm3C.js";import"./CjOovgR0.js";import"./DXP7Kkdt.js";import"./BRI4D6WA.js";import"./DlAUqK2U.js";import"./DoL5-2Ox.js";import"./DGUAW_1C.js";import"./DDJ79SjH.js";import"./Ti3HjCpC.js";import"./DegKy-XA.js";import"./B1TeSxwV.js";import"./RmzZBBRE.js";import"./C4jlvBh2.js";import"./C-XPfH0G.js";import"./7d3iyZ8h.js";import"./DaWZu8wl.js";const J={class:"flex flex-col gap-4"},O={class:"mt-6 flex justify-end gap-2"},ve=j({__name:"template-create-modal",props:{template:{}},emits:["close"],setup(u,{emit:b}){const{t:i}=N(),k=D(),$=I(),s=u,m=b,e=M({name:"",description:"",avatar:""}),v=G({description:g().required(i("ai-agent.backend.create.descriptionPlaceholder")),name:g().required(i("ai-agent.backend.create.namePlaceholder"))}),{lockFn:V,isLock:h}=R(async()=>{try{const a=await E({templateId:s.template.id,name:e.name,description:e.description,avatar:e.avatar});m("close",!0),k.success(i("ai-agent.backend.template.create.success")),$.push(H("ai-agent:detail",{id:a.id}))}catch(a){console.error(i("ai-agent.backend.template.create.failed"),a)}});return S(()=>{s.template&&(e.avatar=s.template.avatar||"",e.name=s.template.name,e.description=s.template.description||"")}),(a,o)=>{const U=B,c=C,w=x,y=P,f=L,F=A,q=K;return z(),T(q,{title:t(i)("ai-agent.backend.template.create.title",{name:u.template?.name}),description:t(i)("ai-agent.backend.template.create.description"),ui:{content:"max-w-lg"},onClose:o[4]||(o[4]=l=>m("close"))},{default:r(()=>[n(F,{schema:t(v),state:t(e),class:"space-y-4",onSubmit:t(V)},{default:r(()=>[_("div",J,[n(c,{label:a.$t("ai-agent.backend.create.avatar"),name:"avatar"},{hint:r(()=>[p(d(a.$t("ai-agent.backend.create.avatarDefault")),1)]),default:r(()=>[n(U,{modelValue:t(e).avatar,"onUpdate:modelValue":o[0]||(o[0]=l=>t(e).avatar=l),class:"h-24 w-24",text:a.$t("ai-agent.backend.create.avatarUpload"),icon:"i-lucide-upload",accept:".jpg,.png,.jpeg,.gif,.webp",maxCount:1,single:!0,multiple:!1},null,8,["modelValue","text"])]),_:1},8,["label"]),n(c,{label:a.$t("ai-agent.backend.create.name"),name:"name",required:""},{default:r(()=>[n(w,{modelValue:t(e).name,"onUpdate:modelValue":o[1]||(o[1]=l=>t(e).name=l),placeholder:a.$t("ai-agent.backend.create.namePlaceholder"),ui:{root:"w-full"}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(c,{label:a.$t("ai-agent.backend.create.description"),name:"description",required:""},{default:r(()=>[n(y,{modelValue:t(e).description,"onUpdate:modelValue":o[2]||(o[2]=l=>t(e).description=l),placeholder:a.$t("ai-agent.backend.create.descriptionPlaceholder"),rows:6,ui:{root:"w-full"}},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_("div",O,[n(f,{color:"neutral",variant:"soft",size:"lg",onClick:o[3]||(o[3]=l=>m("close"))},{default:r(()=>[p(d(a.$t("console-common.cancel")),1)]),_:1}),n(f,{color:"primary",size:"lg",loading:t(h),type:"submit"},{default:r(()=>[p(d(a.$t("console-common.create")),1)]),_:1},8,["loading"])])]),_:1},8,["schema","state","onSubmit"])]),_:1},8,["title","description"])}}});export{ve as default};
