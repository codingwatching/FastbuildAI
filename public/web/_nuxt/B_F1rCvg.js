import{d as S,e as $,ap as U,aN as V,s as q,aK as b,j as B,c as I,o as N,m as i,l as o,t as p,q as s,y as m,x as d,bI as D,_ as M}from"#entry";import W from"./CDSfhndf.js";import{_ as E}from"./Brlt-NDg.js";import{_ as G}from"./Bjbrn0__.js";import{_ as R}from"./Ds48qA85.js";import{a as j,b as z}from"./D0igDNVj.js";import{c as A,a as K}from"./BUyfW8JT.js";import{u as y}from"./UqhBTNL6.js";import"./DoL5-2Ox.js";import"./DaWZu8wl.js";const T={class:"statistics-container mt-8"},H={class:"mb-6"},J={href:"https://clarity.microsoft.com",class:"text-primary",target:"_blank"},O={class:"flex space-x-3"},ns=S({__name:"statistics",setup(P){const{t:e}=$(),n=U(),a=V({appid:""}),l=q(null),g=A({appid:K().required(e("system.website.statistics.appid.required")).min(5,e("system.website.statistics.appid.minLength")).max(50,e("system.website.statistics.appid.maxLength"))}),{lockFn:_,isLock:u}=b(async()=>{try{const t=await j();l.value=t,y(a,t.statistics)}catch(t){console.error("Get website config failed:",t),n.error(e("system.website.messages.loadFailed"))}}),{lockFn:w,isLock:c}=b(async()=>{try{const t={statistics:{appid:a.appid}};await z(t),n.success(e("system.website.messages.saveSuccess")),await _()}catch(t){console.error("Save failed:",t),n.error(e("system.website.messages.saveFailed"))}}),x=()=>{l.value?(y(a,l.value.statistics),n.info(e("system.website.messages.resetSuccess"))):(a.appid="",n.info(e("system.website.messages.resetEmpty")))};return B(()=>_()),(t,r)=>{const h=D,v=W,C=E,f=M,k=G,F=R;return N(),I("div",T,[i(F,{schema:s(g),state:s(a),class:"mx-auto lg:max-w-2xl xl:max-w-4xl",onSubmit:s(w)},{default:o(()=>[p("div",H,[i(C,{name:"appid",label:s(e)("system.website.statistics.appid.label"),required:""},{description:o(()=>[m(d(s(e)("system.website.statistics.clarity.linkLabel"))+": ",1),p("a",J,[r[1]||(r[1]=m(" Microsoft Clarity ",-1)),i(h,{name:"i-lucide-external-link"})])]),default:o(()=>[i(v,{modelValue:s(a).appid,"onUpdate:modelValue":r[0]||(r[0]=L=>s(a).appid=L),size:"xl",ui:{root:"w-full"},placeholder:s(e)("system.website.statistics.appid.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),p("div",O,[i(k,{codes:["system-website:setConfig"]},{default:o(()=>[i(f,{type:"submit",color:"primary",loading:s(c),disabled:s(c)||s(u)},{default:o(()=>[m(d(s(c)?s(e)("system.website.actions.saving"):s(e)("system.website.actions.saveConfig")),1)]),_:1},8,["loading","disabled"])]),_:1}),i(f,{type:"button",color:"neutral",variant:"outline",disabled:s(c)||s(u),onClick:x},{default:o(()=>[m(d(s(e)("system.website.actions.reset")),1)]),_:1},8,["disabled"])])]),_:1},8,["schema","state","onSubmit"])])}}});export{ns as default};
