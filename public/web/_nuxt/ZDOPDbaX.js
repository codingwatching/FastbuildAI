import{ap as m,a2 as f}from"#entry";function j(g){const{page:r=1,pageSize:p=15,fetchFun:l,params:s={},firstLoading:c=!1}=g,o=Object.assign({},m(s)),e=f({page:r,pageSize:p,loading:c,total:0,items:[],extend:{},needPolling:!1}),i=(...a)=>{e.loading=!0;const n=a[0],d=n&&typeof n=="object"&&"append"in n&&n.append;return l({page:e.page,pageSize:e.pageSize,...s}).then(t=>(e.total=t?.total,d?e.items=[...e.items,...t?.items]:e.items=t?.items,e.extend=t?.extend,e.needPolling=t?.needPolling||!1,Promise.resolve(t))).catch(t=>Promise.reject(t)).finally(()=>{e.loading=!1})};return{paging:e,getLists:i,resetParams:()=>{Object.keys(o).forEach(a=>{s[a]=o[a]}),i()},resetPage:()=>{e.page=1,i()}}}export{j as u};
