import{_ as T}from"./BixMXl5t.js";import{aC as V,d as S,e as N,aN as D,i as K,h as _,_ as P,j as I,c as m,o as s,t as i,m as r,q as e,l as p,x as u,k as b,y as h,D as $}from"#entry";import z from"./CDSfhndf.js";import{_ as R}from"./12pJH7Js.js";import{_ as G}from"./CEOm-hjj.js";import{_ as E}from"./4yDHJZoY.js";import{u as O}from"./C1xCp5oe.js";import"./CXk2IlXx.js";import"./DVSiT9pd.js";import"./DBwQYu6J.js";import"./Ti3HjCpC.js";import"./CyS2mNdj.js";import"./BaKvIqXP.js";import"./B1TeSxwV.js";import"./BstbYvQo.js";import"./DegKy-XA.js";import"./DhlnS5e0.js";import"./DlAUqK2U.js";const j=f=>V("/finance/account-log",f),F={class:"flex h-full flex-col space-y-4"},L={class:"flex items-center gap-4 pb-2"},q={class:"flex-1 overflow-hidden"},M={class:"h-full"},Y={key:0,class:"text-green-500"},H={key:1,class:"text-red-500"},J={class:"flex justify-end py-4"},fa=S({__name:"account-balance",setup(f){const y=T,v=P,{t:c}=N(),B=[{label:"financial.accountBalance.allTypes",value:null},{label:"financial.accountBalance.userRecharge",value:"100"},{label:"financial.accountBalance.userRechargeGift",value:"101"},{label:"financial.accountBalance.userRechargeRefund",value:"102"},{label:"financial.accountBalance.systemIncreasePower",value:"200"},{label:"financial.accountBalance.systemDecreasePower",value:"201"},{label:"financial.accountBalance.basicConversation",value:"300"},{label:"financial.accountBalance.agentConversation",value:"400"},{label:"financial.accountBalance.sharedAgentConversation",value:"401"},{label:"financial.accountBalance.pluginConsumption",value:"500"},{label:"financial.accountBalance.membershipGift",value:"600"},{label:"financial.accountBalance.membershipGiftExpire",value:"602"}],l=D({keyword:"",accountType:null}),{paging:o,getLists:d,resetPage:k}=O({fetchFun:j,params:l}),x=K(()=>[{accessorKey:"accountNo",header:c("financial.accountBalance.table.userNo")},{accessorKey:"nickname",header:c("financial.accountBalance.table.nickname")},{accessorKey:"changeAmount",header:c("financial.accountBalance.table.changeAmount")},{accessorKey:"leftAmount",header:c("financial.accountBalance.table.leftAmount")},{accessorKey:"accountTypeDesc",header:c("financial.accountBalance.table.accountTypeDesc")},{accessorKey:"consumeSourceDesc",header:c("financial.accountBalance.table.consumeSourceDesc")},{accessorKey:"associationUser",header:c("financial.accountBalance.table.associationUser")},{accessorKey:"createdAt",header:({column:t})=>{const n=t.getIsSorted();return _(v,{color:"neutral",variant:"ghost",label:c("financial.accountBalance.table.createdAt"),icon:n?n==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc")})},cell:({row:t})=>{const n=t.getValue("createdAt");return _(y,{datetime:n,mode:"datetime"})}}]);return I(()=>{d()}),(t,n)=>{const A=z,w=R,g=$,U=G,C=E;return s(),m("div",F,[i("div",L,[r(A,{class:"w-56",modelValue:e(l).keyword,"onUpdate:modelValue":[n[0]||(n[0]=a=>e(l).keyword=a),e(k)],placeholder:e(c)("financial.accountBalance.searchPlaceholder")},null,8,["modelValue","placeholder","onUpdate:modelValue"]),r(w,{class:"w-56",modelValue:e(l).accountType,"onUpdate:modelValue":[n[1]||(n[1]=a=>e(l).accountType=a),e(d)],items:B.map(a=>({label:e(c)(a.label),value:a.value})),placeholder:"变动类型"},null,8,["modelValue","items","onUpdate:modelValue"])]),i("div",q,[i("div",M,[r(U,{sticky:"",columns:e(x),data:e(o).items,loading:e(o).loading,ui:{base:"table-fixed border-separate border-spacing-0",thead:"[&>tr]:bg-elevated/50 [&>tr]:after:content-none",tbody:"[&>tr]:last:[&>td]:border-b-0",th:"py-2 first:rounded-l-lg last:rounded-r-lg border-y border-default first:border-l last:border-r",td:"border-b border-default"},class:"h-[calc(100vh-13rem)] shrink-0"},{"userNo-cell":p(({row:a})=>[h(u(a.original.accountNo),1)]),"nickname-cell":p(({row:a})=>[a.original.user?.avatar?(s(),b(g,{key:0,src:a.original.user.avatar},null,8,["src"])):(s(),b(g,{key:1,icon:"i-heroicons-user",name:a.original.user?.nickname},null,8,["name"])),h(" "+u(a.original.user?.nickname),1)]),"changeAmount-cell":p(({row:a})=>[a.original.action===1?(s(),m("span",Y," +"+u(a.original.changeAmount),1)):(s(),m("span",H," -"+u(a.original.changeAmount),1))]),_:1},8,["columns","data","loading"])])]),i("div",J,[r(C,{page:e(o).page,"onUpdate:page":n[2]||(n[2]=a=>e(o).page=a),size:e(o).pageSize,"onUpdate:size":n[3]||(n[3]=a=>e(o).pageSize=a),total:e(o).total,onChange:e(d)},null,8,["page","size","total","onChange"])])])}}});export{fa as default};
