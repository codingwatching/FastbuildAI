import{d as g,aM as w,n as c,l as d,p as b,J as f,q as U,ai as _,a$ as k,c as y,g as v,o as E}from"#entry";const R=["src","title"],C=g({__name:"[...all]",setup(T){const l=w(),n=c(()=>l.fullPath.match(/\/buildingai\/extension\/([^/]+)\/console/)?.[1]||""),i=c(()=>l.fullPath.match(/\/buildingai\/extension\/[^/]+\/console\/(.*)$/)?.[1]?.replace(/\/$/,"")||""),p=c(()=>{if(!n.value)return"/extension/console";const e=`/extension/${n.value}/console`;return i.value?`${e}/${i.value}`:e}),o=d(null),r=d(!1),a=d(!1),m=e=>e?`/buildingai/extension/${n.value}/console/${e}`:`/buildingai/extension/${n.value}/console`,h=e=>{l.path!==e&&(a.value=!0,window.history.replaceState({...window.history.state},"",e),f(()=>{a.value=!1}))},x=()=>{if(!(!o.value?.contentWindow||r.value||a.value))try{const{pathname:e,search:t,hash:u}=o.value.contentWindow.location,s=(e+t+u).match(/^\/extension\/[^/]+\/console\/(.*)$/);h(m(s?.[1]||""))}catch{}};return b(()=>i.value,e=>{if(!o.value||a.value)return;const t=e?`/extension/${n.value}/console/${e}`:`/extension/${n.value}/console`;o.value.src.endsWith(t)||(r.value=!0,o.value.src=t,f(()=>{r.value=!1}))}),U(()=>{const e=t=>{const{type:u,path:s}=t.data||{};if(u!=="extension-navigation"||!s)return;const $=s.startsWith("console/")?s.replace(/^console\/?/,""):s;h(m($))};window.addEventListener("message",e),_(()=>window.removeEventListener("message",e))}),k({title:`Extension Console: ${n.value}`,meta:[{name:"description",content:`Extension console: ${n.value}`}]}),(e,t)=>(E(),y("iframe",{ref_key:"iframeRef",ref:o,src:v(p),class:"h-full w-full border-0",title:`Extension Console: ${v(n)}`,onLoad:t[0]||(t[0]=()=>("nextTick"in e?e.nextTick:v(f))(x))},null,40,R))}});export{C as default};
