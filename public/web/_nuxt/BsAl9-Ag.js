const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BNh1Yf2o.js","./n4aLOYdS.js","./DBiaUVBh.js","./DD9epg4Y.js","./BxwUS5gW.js","./B3XNqw4u.js","./zlMhJk0P.js","./CuVAPZQ8.js","./BhB8DUPm.js","./CaG9fOMa.js","./TQ7Pmmae.js","./DFBhP4Y_.js","./o4ws_w_T.js","./XBYuZpdu.js","./CUMZupLV.js","./cd55qm53.js","./D_3bTjYR.js","./D9sX2Qi6.js","./DUJH4dqr.js","./DWy_CFG9.js","./td2xDKru.js","./RPflLnqr.js","./TrJvDfxI.js","./jsPNKUA0.js","./Bzv9SrOl.js","./4jjeIyfe.js","./B_IAV05G.js","./CtosDvS0.js","./CAQVAH0V.js","./BCcN9pii.js","./CMKSl-Ng.js","./Deu6qIfg.js","./DBEJUH-Z.js","./CDB5Iuhz.js","./Cuqwcq71.js","./CjasYwqF.js","./BtLy_Oaq.js","./D19QCKnC.js","./LSmoYDCw.js","./BVraOlsu.js","./MCK2d4XT.js","./EK7Wbu3-.js","./FTderXKt.js","./DaWZu8wl.js","./DQCVCxm_.js","./BgW9doE6.js","./BkF8DltG.js","./Be9qZ8Md.js","./BKdtdX-7.js","./kRIii9yh.js","./DxD6Ynfo.js","./C6Y-ieo6.js","./DeCyaT7k.js","./D4e4FYoF.js","./psimjGaX.js","./B0g9CpkI.js","./BTyuOgdq.js"])))=>i.map(i=>d[i]);
import{d as de,i as me,V as pe,at as ue,s as ge,aQ as fe,n as _e,a2 as P,aN as he,q as be,c as h,o as r,x as o,t as i,g as e,D as ve,K as xe,w as p,A as ye,z as c,_ as we,B as Ee,F as M,E as O,f as u,y as g,G as ke,bI as Ie,W as I,X as C}from"#entry";import{_ as Ce}from"./DNb4RPhn.js";import Te from"./cd55qm53.js";import{_ as Le}from"./CBP5wIdr.js";import{_ as Ae}from"./CCoSr_X_.js";import{_ as De}from"./o4ws_w_T.js";import{_ as $e}from"./BTN3Ax-V.js";import{_ as Ue}from"./B8dIIAdq.js";import{_ as Ne}from"./BkF8DltG.js";import{a as A,b as f,E as b}from"./XBYuZpdu.js";import{c as ze,k as Ve,l as Be,m as Se,n as Pe,o as Me}from"./TQ7Pmmae.js";import{u as Oe}from"./ZDOPDbaX.js";import"./CtosDvS0.js";import"./CuVAPZQ8.js";import"./BCcN9pii.js";import"./CMKSl-Ng.js";import"./DBEJUH-Z.js";import"./CAQVAH0V.js";import"./DxD6Ynfo.js";import"./zlMhJk0P.js";import"./DeCyaT7k.js";import"./D4e4FYoF.js";import"./BhB8DUPm.js";import"./BstbYvQo.js";import"./psimjGaX.js";import"./B3rWqoNg.js";import"./EK7Wbu3-.js";import"./BKdtdX-7.js";import"./kRIii9yh.js";import"./C6Y-ieo6.js";import"./jsPNKUA0.js";import"./Bzv9SrOl.js";const Re={class:"extension-manage-container flex h-full flex-col pb-5"},Fe={class:"header bg-background sticky top-0 z-10 pb-6"},je={class:"space-y-4"},We={class:"flex w-full flex-wrap justify-between gap-4"},Xe={class:"flex items-end justify-end"},Ge={class:"flex items-center gap-4"},qe={key:0,class:"relative grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},He={class:"z-10 h-[170px] rounded-lg border border-dashed p-4"},Ke={class:"flex flex-col"},Qe={class:"text-muted-foreground pb-2 pl-2 text-xs font-bold"},Je={class:"absolute top-0 right-0 bottom-0 left-0 flex h-[calc(100vh-12rem)] items-center justify-center"},Ye={class:"text-muted-foreground text-sm font-medium"},Ze={key:1,class:"grid h-[calc(100vh-12rem)]"},ea={class:"grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},aa={class:"h-[170px] rounded-lg border border-dashed p-4"},sa={class:"flex flex-col"},ta={class:"text-muted-foreground pb-2 pl-2 text-xs font-bold"},oa={class:"flex h-full w-full cursor-pointer flex-col p-4"},la={class:"flex justify-between"},ia={class:"flex w-[calc(100%-76px)] flex-col gap-1"},na={class:"flex items-center gap-1"},ra={class:"text-foreground truncate text-[16px] leading-[22px] font-[500]"},ca={class:"text-muted-foreground line-clamp-1 text-[14px] leading-[20px] font-normal wrap-break-word"},da={class:"mt-1.5 flex items-center gap-2"},ma={class:"ml-[12px] h-[64px] w-[64px] flex-none overflow-hidden rounded-[10px]"},pa={class:"mt-auto flex items-center justify-between"},ua={class:"flex items-center gap-1 text-xs"},ga={class:"text-nowrap"},fa={class:"bg-background flex items-center gap-2"},_a={key:0,class:"text-error flex items-center gap-1"},ha={class:"text-xs leading-none"},Ja=de({__name:"list",setup(ba){const R=I(()=>C(()=>import("./BNh1Yf2o.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)),F=I(()=>C(()=>import("./DFBhP4Y_.js"),__vite__mapDeps([11,1,12,2,3,4,5,6,7,8,9,13,10]),import.meta.url)),j=I(()=>C(()=>import("./CUMZupLV.js"),__vite__mapDeps([14,15,1,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,7,33,34,35,36,37,38,5,6,8,39,4,40,41,13,10,42,43]),import.meta.url)),W=I(()=>C(()=>import("./DQCVCxm_.js"),__vite__mapDeps([44,1,12,45,15,46,23,24,47,48,27,49,50,8,51,6,52,53,29,30,7,54,55,37,38,5,39,4,40,41,10]),import.meta.url)),X=I(()=>C(()=>import("./BTyuOgdq.js"),__vite__mapDeps([56,1,37,38,5,6,7,8,39,4,40,41,10]),import.meta.url)),{t}=me(),y=pe(),w=ue(),G=[{label:t("extensions.manage.tabs.all"),value:"all"},{label:t("extensions.manage.tabs.installed"),value:"installed"},{label:t("extensions.manage.tabs.uninstalled"),value:"uninstalled"}],E=ge("all"),_=fe({type:void 0}),q=s=>({[b.WEB]:t("extensions.modal.terminalTypes.web"),[b.WEIXIN]:t("extensions.modal.terminalTypes.weixin"),[b.H5]:t("extensions.modal.terminalTypes.h5"),[b.MP]:t("extensions.modal.terminalTypes.mp"),[b.API]:t("extensions.modal.terminalTypes.api")})[s]||t("extensions.manage.unknown"),{paging:n,getLists:m}=Oe({fetchFun:ze,params:_}),H=_e(()=>n.items.length<n.total),K=()=>{n.loading||(n.page++,m({append:!0}))},Q=xe(()=>{n.page=1,m()},500),J=s=>{E.value=String(s);const l=E.value;l==="all"?delete _.isInstalled:_.isInstalled=l==="installed",n.page=1,m()},Y=s=>{window.open(`${Ie.EXTENSION}/${s.identifier}/buildingai-middleware`,"_blank")},T=P({}),k=P({}),Z=async s=>{if(!T[s.identifier])try{T[s.identifier]=!0,await Pe(s.identifier),n.page=1,await m(),w.success(t("console-common.messages.success"))}catch(l){console.error("安装插件失败:",l)}finally{T[s.identifier]=!1}},ee=s=>{y.create(X).open({extension:s,onConfirmUpgrade:()=>{ae(s)}})},ae=async s=>{if(!k[s.identifier])try{k[s.identifier]=!0,await Me(s.identifier),n.page=1,await m(),w.success(t("console-common.messages.success"))}catch(l){console.error("更新插件失败:",l)}finally{k[s.identifier]=!1}},{lockFn:se}=he(async s=>{try{await Se(s.identifier),n.page=1,await m(),w.success(t("console-common.messages.success"))}catch(l){console.error("卸载插件失败:",l)}}),U=async s=>{try{await Ve(s.id),n.page=1,await m(),w.success(t("console-common.messages.success"))}catch(l){console.error("启用插件失败:",l)}},te=async s=>{try{await Be(s.id),n.page=1,await m(),w.success(t("console-common.messages.success"))}catch(l){console.error("禁用插件失败:",l)}},oe=s=>{y.create(W).open({extension:s})},L=async(s,l)=>{await y.create(j).open({isEdit:l,id:s.id,initialData:{name:s.name,packName:s.identifier,description:s.description,version:s.version,icon:s.icon,type:s.type,supportTerminal:s.supportTerminal||[],author:s.author||{avatar:"",name:"",homepage:""}}}).result&&(n.page=1,m())},N=()=>{window.open("https://buildingai.cc/plugin")},le=s=>{y.create(F).open({isIdentifier:s.isLocal,extensionId:s.id,identifier:s.identifier})},ie=s=>{y.create(R).open({extension:s,identifier:s.identifier})};return be(()=>m()),(s,l)=>{const z=Ce,V=Te,B=Le,v=we,x=Ee,D=Ae,$=De,S=ke,ne=$e,re=Ue,ce=Ne;return r(),h("div",Re,[o("div",Fe,[o("div",je,[o("div",We,[o("div",Xe,[i(z,{items:G,modelValue:e(E),"onUpdate:modelValue":[l[0]||(l[0]=a=>ve(E)?E.value=a:null),J],class:"block w-auto"},null,8,["modelValue"])]),o("div",Ge,[i(V,{modelValue:e(_).name,"onUpdate:modelValue":[l[1]||(l[1]=a=>e(_).name=a),e(Q)],placeholder:e(t)("extensions.manage.search")},null,8,["modelValue","placeholder","onUpdate:modelValue"]),i(B,{modelValue:e(_).type,"onUpdate:modelValue":l[2]||(l[2]=a=>e(_).type=a),items:[{label:e(t)("extensions.manage.filters.allTypes"),value:void 0},{label:e(t)("extensions.modal.extensionTypes.application"),value:e(A).APPLICATION},{label:e(t)("extensions.modal.extensionTypes.function"),value:e(A).FUNCTIONAL}],class:"block w-auto",placeholder:e(t)("extensions.manage.selectType")},null,8,["modelValue","items","placeholder"]),i(v,{icon:"i-lucide-plus",color:"primary",onClick:l[3]||(l[3]=a=>L({},!1))},{default:p(()=>[ye(c(e(t)("extensions.manage.add")),1)]),_:1})])])])]),!e(n).loading&&e(n).items.length===0?(r(),h("div",qe,[o("div",He,[o("div",Ke,[o("h3",Qe,c(e(t)("extensions.manage.add")),1),o("div",{class:"text-primary hover:bg-primary-50 flex cursor-pointer items-center rounded-lg px-2 py-2 text-sm",onClick:l[4]||(l[4]=a=>L({},!1))},[i(x,{name:"i-lucide-file-plus-2",class:"mr-2 size-4"}),o("span",null,c(e(t)("extensions.manage.add")),1)]),o("div",{class:"text-primary hover:bg-primary-50 flex cursor-pointer items-center rounded-lg px-2 py-2 text-sm",onClick:N},[i(x,{name:"i-lucide-external-link",class:"mr-2 size-4"}),o("span",null,c(e(t)("extensions.manage.store")),1)])])]),o("div",Je,[o("span",Ye,c(e(t)("extensions.manage.empty.description")),1)])])):(r(),h("div",Ze,[i(ce,{class:"h-full",shadow:!1},{default:p(()=>[i(re,{loading:e(n).loading,"has-more":e(H),"loading-text":e(t)("extensions.manage.loadingText"),"no-more-text":e(n).page!==1?e(t)("extensions.manage.noMoreText"):" ",onLoadMore:K},{default:p(()=>[o("div",ea,[o("div",aa,[o("div",sa,[o("h3",ta,c(e(t)("extensions.manage.add")),1),o("div",{class:"text-primary hover:bg-primary-50 dark:hover:bg-primary/15 flex cursor-pointer items-center rounded-lg px-2 py-2 text-sm",onClick:l[5]||(l[5]=a=>L({},!1))},[i(x,{name:"i-lucide-file-plus-2",class:"mr-2 size-4"}),o("span",null,c(e(t)("extensions.manage.add")),1)]),o("div",{class:"text-primary hover:bg-primary-50 dark:hover:bg-primary/15 flex cursor-pointer items-center rounded-lg px-2 py-2 text-sm",onClick:N},[i(x,{name:"i-lucide-external-link",class:"mr-2 size-4"}),o("span",null,c(e(t)("extensions.manage.store")),1)])])]),(r(!0),h(M,null,O(e(n).items,a=>(r(),h("div",{key:a.id,class:"bg-background border-muted relative h-[170px] overflow-hidden rounded-[6px] border border-solid transition duration-150 ease-out hover:shadow-[0_6px_8px_0_rgba(28,31,35,6%)]"},[o("div",oa,[o("div",la,[o("div",ia,[o("div",na,[i(D,{text:a.name},{default:p(()=>[o("span",ra,c(a.name),1)]),_:2},1032,["text"])]),o("span",ca,c(a.description||e(t)("extensions.manage.noDescription")),1),o("div",da,[a.version?(r(),u($,{key:0,color:"neutral",variant:"soft",label:`v${a.version}`},null,8,["label"])):g("",!0),a.isInstalled?(r(),u($,{key:1,color:a.status===e(f).ENABLED?"success":"neutral",variant:"soft",label:a.status===e(f).ENABLED?e(t)("extensions.manage.enable"):e(t)("extensions.manage.disable")},null,8,["color","label"])):g("",!0),(r(!0),h(M,null,O(a.supportTerminal,d=>(r(),u($,{color:d===e(b).WEB?"success":d===e(b).API?"info":"neutral",variant:"soft",label:q(d)},null,8,["color","label"]))),256))])]),o("div",ma,[i(S,{src:a.icon,alt:a.name,icon:"i-lucide-puzzle",ui:{root:`size-full rounded-md ${a.icon?"":"bg-primary"}`,icon:"size-7 text-white"}},null,8,["src","alt","ui"])])]),o("div",pa,[o("div",ua,[i(S,{color:"primary",size:"xs",src:a.author?.avatar,ui:{root:"rounded-full bg-primary size-5"}},{default:p(()=>[i(x,{name:"i-lucide-user",class:"size-3 text-white"})]),_:1},8,["src"]),o("div",ga,c(a.author.name||e(t)("extensions.manage.unknownAuthor")),1)]),o("div",fa,[a.isCompatible?g("",!0):(r(),h("div",_a,[i(x,{name:"i-lucide-circle-alert",class:"size-3.5 cursor-pointer"}),o("span",ha,c(s.$t("extensions.manage.incompatible")),1)])),a.type===e(A).APPLICATION&&a.isInstalled&&a.status===e(f).ENABLED&&a.isCompatible?(r(),u(D,{key:1,text:e(t)("extensions.manage.manage")},{default:p(()=>[i(v,{color:"primary",icon:"i-lucide-settings",variant:"soft",size:"sm",label:e(t)("extensions.manage.manage"),onClick:d=>Y(a)},null,8,["label","onClick"])]),_:2},1032,["text"])):g("",!0),a.type===e(A).APPLICATION&&a.isInstalled&&a.status===e(f).DISABLED&&a.isCompatible?(r(),u(D,{key:2,text:e(t)("extensions.manage.enable")},{default:p(()=>[i(v,{color:"primary",icon:"i-lucide-power",variant:"soft",size:"sm",label:e(t)("extensions.manage.enable"),onClick:d=>U(a)},null,8,["label","onClick"])]),_:2},1032,["text"])):g("",!0),!a.isInstalled&&a.isCompatible?(r(),u(v,{key:3,color:"primary",variant:"solid",icon:"i-lucide-download",size:"sm",loading:e(T)[a.identifier],label:s.$t("extensions.manage.install"),onClick:d=>Z(a)},null,8,["loading","label","onClick"])):g("",!0),a.hasUpdate?(r(),u(v,{key:4,color:"info",variant:"subtle",icon:"i-lucide-circle-fading-arrow-up",size:"sm",label:s.$t("extensions.manage.upgrade"),loading:e(k)[a.identifier],disabled:e(k)[a.identifier],onClick:d=>ee(a)},null,8,["label","loading","disabled","onClick"])):g("",!0),a.isInstalled?(r(),u(ne,{key:5,items:[[{label:e(t)("extensions.manage.detail"),icon:"i-lucide-info",onSelect:()=>le(a)},a.isLocal?void 0:{label:e(t)("extensions.manage.logs"),icon:"i-lucide-file-text",onSelect:()=>ie(a)},{label:e(t)("extensions.manage.featureConfig"),icon:"i-lucide-settings",onSelect:()=>oe(a)}].filter(d=>d!==void 0),[{label:a.status===e(f).ENABLED?e(t)("extensions.manage.disable"):e(t)("extensions.manage.enable"),icon:a.status===e(f).ENABLED?"i-lucide-power-off":"i-lucide-power",color:a.status===e(f).ENABLED?"warning":"success",disabled:!a.isCompatible,onSelect:()=>{a.status===e(f).ENABLED?te(a):U(a)}}],[a.isLocal?{label:e(t)("console-common.edit"),icon:"i-lucide-pen-line",onSelect:()=>L(a,!0)}:void 0,{label:e(t)("extensions.manage.uninstall"),icon:"i-lucide-trash-2",color:"error",onSelect:()=>{e(se)(a)}}].filter(d=>d!==void 0)],content:{align:"end",side:"bottom",sideOffset:4},ui:{content:"w-32",itemLeadingIcon:"size-4"}},{default:p(()=>[i(v,{icon:"i-lucide-ellipsis-vertical",color:"neutral",variant:"ghost",size:"sm"})]),_:1},8,["items"])):g("",!0)])])])]))),128))])]),_:1},8,["loading","has-more","loading-text","no-more-text"])]),_:1})]))])}}});export{Ja as default};
