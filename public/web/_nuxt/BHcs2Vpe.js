import{d as D,ar as L,e as T,f as P,i as h,k as m,o as i,l as a,t as r,m as n,q as u,z as j,x as c,c as k,v as E,y as v,D as F,A as G,aV as H}from"#entry";import{_ as J}from"./CsY35JUW.js";import{_ as K}from"./B-p4_8pw.js";import{_ as M}from"./BixMXl5t.js";import{_ as O}from"./DNJQj0yQ.js";import{u as Q}from"./zDgZcZqa.js";import{u as C}from"./Dx01Lm3C.js";import"./DBwQYu6J.js";import"./DnFVE45b.js";import"./DegKy-XA.js";import"./DSCppvl0.js";import"./7d3iyZ8h.js";import"./6WwfWHXT.js";import"./KiG0a5S-.js";import"./CXk2IlXx.js";import"./kRIii9yh.js";import"./B1TeSxwV.js";import"./C6Y-ieo6.js";import"./Ti3HjCpC.js";import"./CyS2mNdj.js";import"./BaKvIqXP.js";import"./cwT2REE1.js";import"./DaC7Nksz.js";import"./DJ9SNVgt.js";import"./CgMDXot0.js";import"./DVSiT9pd.js";import"./CZsOHrUj.js";import"./D_1uxSdv.js";import"./DoL5-2Ox.js";const W={class:"text-secondary-foreground flex items-center text-base font-semibold"},X={class:"line-clamp-1"},Y={class:"text-muted-foreground mr-2 text-sm"},Z={class:"text-muted-foreground text-xs"},ee={class:"border-default border-t border-dashed pt-4 text-center text-xs"},se={class:"grid grid-cols-2 gap-2 gap-y-3 text-left"},te={class:"flex items-center gap-2"},oe={class:"text-muted-foreground"},re={class:"flex items-center gap-2"},ce={key:0,class:"text-muted-foreground"},ae={key:1,class:"text-muted-foreground"},ne={class:"flex items-center gap-2"},ie={class:"text-muted-foreground"},ue={class:"flex items-center gap-2"},le={class:"text-muted-foreground"},de={key:1},Fe=D({__name:"user-card",props:{user:{},selected:{type:Boolean,default:!1}},emits:["select","delete","edit-power"],setup(e,{emit:w}){const f=w,s=e,b=L(),{t}=T(),{hasAccessByCodes:p}=Q(),l=P();function I(o){typeof o=="boolean"&&f("select",s.user,o)}function R(o){switch(o){case 1:return{label:t("user.backend.status.active"),color:"success",icon:"i-lucide-check-circle"};case 0:return{label:t("user.backend.status.inactive"),color:"error",icon:"i-lucide-x-circle"};default:return{label:t("user.backend.status.unknown"),color:"warning",icon:"i-lucide-help-circle"}}}function S(o){switch(o){case 0:return{label:t("user.backend.source.console"),icon:"i-lucide-user-plus"};case 1:return{label:t("user.backend.source.phone"),icon:"i-lucide-smartphone"};case 2:return{label:t("user.backend.source.wechat"),icon:"i-lucide-message-circle"};case 3:return{label:t("user.backend.source.email"),icon:"i-lucide-mail"};case 4:return{label:t("user.backend.source.username"),icon:"i-lucide-user-check"};default:return{label:t("user.backend.source.unknown"),icon:"i-lucide-help-circle"}}}const z=h(()=>{const o=[];return p(["users:update"])&&(s.user.isRoot!==1||l.userInfo?.isRoot===1&&s.user.id===l.userInfo.id)&&(o.push({label:t("user.backend.editProfile"),icon:"i-lucide-user-round-pen",onSelect:()=>b.push({path:C("users:update"),query:{id:s.user.id}})}),o.push({label:t("user.backend.adjustBalance"),icon:"i-lucide-edit",onSelect:()=>f("edit-power",s.user)})),p(["users:delete"])&&s.user.isRoot!==1&&o.push({label:t("user.backend.deleteUser"),icon:"i-lucide-trash-2",color:"error",onSelect:()=>f("delete",s.user)}),o}),_=h(()=>R(s.user.status)),g=h(()=>S(s.user.source));function B(){console.log("handleCardClick",s.user),p(["users:update"])&&(s.user.isRoot!==1||l.userInfo?.isRoot===1&&s.user.id===l.userInfo.id)&&b.push({path:C("users:update"),query:{id:s.user.id}})}return(o,me)=>{const U=F,$=H,A=J,x=K,d=j,y=M,N=O;return i(),m(N,{selectable:s.user.isRoot!==1,"show-actions":"",variant:"outlined",selected:e.selected,actions:u(z),clickable:!0,onSelect:I,onClick:B},{icon:a(({groupHoverClass:V,selectedClass:q})=>[n($,{position:"top-right",color:"success"},{default:a(()=>[n(U,{src:e.user.avatar,alt:e.user.nickname||e.user.username,size:"3xl",ui:{root:"rounded-lg",fallback:"text-inverted"},class:G([V,q,e.user.avatar?"":"bg-primary"])},null,8,["src","alt","class"])]),_:2},1024)]),title:a(()=>[r("h3",W,[n(A,{text:e.user.nickname,delay:0},{default:a(()=>[r("span",X,c(e.user.nickname),1)]),_:1},8,["text"]),r("span",Y,"(@"+c(e.user.username)+")",1),e.user.isRoot?(i(),m(x,{key:0,color:"warning",size:"sm",class:"ml-auto shrink-0"},{default:a(()=>[v(c(o.$t("user.backend.admin")),1)]),_:1})):e.user.role?(i(),m(x,{key:1,color:"primary",size:"sm",class:"ml-auto shrink-0"},{default:a(()=>[v(c(e.user.role.name),1)]),_:1})):E("",!0)])]),description:a(()=>[r("h4",Z,c(o.$t("user.backend.userNo"))+": "+c(e.user.userNo||u(t)("user.backend.notSet")),1)]),details:a(()=>[r("div",ee,[r("div",se,[r("div",te,[n(d,{name:u(_).icon,class:"text-muted-foreground size-3"},null,8,["name"]),r("span",oe,c(u(_).label),1)]),r("div",re,[n(d,{name:u(g).icon,class:"text-muted-foreground size-3"},null,8,["name"]),e.user.isRoot===1?(i(),k("span",ce," - ")):(i(),k("span",ae,c(u(g).label),1))]),r("div",ne,[n(d,{name:"i-lucide-clock",class:"text-muted-foreground size-3"}),r("span",ie,[n(y,{datetime:e.user.createdAt,mode:"date"},null,8,["datetime"])])]),r("div",ue,[n(d,{name:"i-lucide-clock-alert",class:"text-muted-foreground size-3"}),r("span",le,[e.user.lastLoginAt?(i(),m(y,{key:0,datetime:e.user.lastLoginAt,mode:"date"},null,8,["datetime"])):(i(),k("span",de,c(u(t)("user.backend.neverLogin")),1))])])])])]),_:1},8,["selectable","selected","actions"])}}});export{Fe as default};
