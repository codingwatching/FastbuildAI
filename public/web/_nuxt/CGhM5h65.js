import K from"./CDSfhndf.js";import{_ as M}from"./B-p4_8pw.js";import{d as z,s as c,e as E,j as F,k as p,o as n,l as T,t as u,m as d,c as B,bB as k,B as L,q as f,F as C,C as R,_ as j,x as $}from"#entry";import{_ as q}from"./BYm23QKU.js";import{a as A,b as G,c as I,d as S}from"./DyY5B2r8.js";import{u as H}from"./DcxZIiHI.js";import"./DGUAW_1C.js";import"./DDJ79SjH.js";import"./Ti3HjCpC.js";import"./DegKy-XA.js";import"./B1TeSxwV.js";import"./RmzZBBRE.js";import"./C4jlvBh2.js";import"./C-XPfH0G.js";import"./7d3iyZ8h.js";const J={class:"flex flex-wrap gap-2"},re=z({__name:"manage-popup",props:{type:{}},emits:["close"],setup(V,{emit:h}){const x=h,i=V,_=c([]),o=c(""),r=c(-1),s=async()=>{const e=await A({type:i.type});_.value=e},m=async()=>{o.value.trim()&&(await G({name:o.value,type:i.type}),o.value="",s())},U=async e=>{e.name.trim()&&(await I(e.id,{name:e.name,type:i.type}),r.value=-1,s())},{t:g}=E(),b=async e=>{await H({title:g("common.tag.deleteTag"),description:g("common.tag.confirmDeleteTag"),color:"error"})&&(await S(e.id),s())};return F(()=>{s()}),(e,t)=>{const y=K,v=M,D=j,N=q;return n(),p(N,{title:e.$t("common.tag.manageTags"),ui:{content:"max-w-xl"},onClose:t[1]||(t[1]=a=>x("close"))},{default:T(()=>[u("div",J,[d(y,{modelValue:f(o),"onUpdate:modelValue":t[0]||(t[0]=a=>L(o)?o.value=a:null),placeholder:e.$t("common.tag.createNewTag"),onKeydown:k(m,["enter"]),onBlur:m},null,8,["modelValue","placeholder"]),(n(!0),B(C,null,R(f(_),(a,w)=>(n(),B(C,{key:a.id},[f(r)!==w?(n(),p(D,{key:0,color:"neutral",variant:"outline",ui:{base:"gap-2"}},{default:T(()=>[u("span",null,$(a.name),1),u("span",null,$(a.bindingCount),1),d(v,{color:"neutral",icon:"i-lucide-pen-line",variant:"soft",size:"xs",onClick:l=>r.value=w},null,8,["onClick"]),d(v,{color:"neutral",icon:"i-lucide-trash",variant:"soft",size:"xs",onClick:l=>b(a)},null,8,["onClick"])]),_:2},1024)):(n(),p(y,{key:1,modelValue:a.name,"onUpdate:modelValue":l=>a.name=l,autofocus:"",color:"primary",onKeydown:k(m,["enter"]),onBlur:l=>U(a)},null,8,["modelValue","onUpdate:modelValue","onBlur"]))],64))),128))])]),_:1},8,["title"])}}});export{re as default};
