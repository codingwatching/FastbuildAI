import{d as A,l as V,p as D,a2 as R,i as N,k as E,f as O,o as j,w as i,t,A as g,z as p,_ as B,g as e,D as F,aj as G}from"#entry";import{_ as I}from"./B_IAV05G.js";import{_ as Y}from"./D_3bTjYR.js";import z from"./cd55qm53.js";import{_ as M}from"./bvMLy1sv.js";import{_ as H}from"./BtLy_Oaq.js";import{_ as J}from"./LSmoYDCw.js";import{a as L,b as P}from"./B9BC8iq9.js";import{S as Q}from"./td2xDKru.js";import{c as S,a as W,b as n}from"./FTderXKt.js";function U(){return{accessKey:"",arn:"",bucket:"",domain:"",region:"",secretKey:""}}const se=A({__name:"ali-cloud-config",props:{data:{type:Object,required:!0}},emits:["update"],setup(y,{emit:v}){const K=v,b=y,f=V(!1),m=V(!1);D(f,a=>{a&&q()});const q=async()=>{const a=await L(b.data.id);o.isActive=a.isActive,o.config=a.config||U()},{t:d}=N(),$=E("form"),_=S({storageType:n().required(),isActive:W().required(),config:S({bucket:n().required(d("storage-config.form.spaceName.placeholder")),accessKey:n().required(d("storage-config.form.accessKey.placeholder")),secretKey:n().required(d("storage-config.form.secretKey.placeholder")),domain:n().required(d("storage-config.form.spaceDomain.placeholder")),region:n().required(d("storage-config.form.region.placeholder")),arn:n().required(d("storage-config.form.arn.placeholder"))})}),o=R({...b.data,config:U()});console.log(o);async function C(){try{m.value=!0,await P(o),o.isActive&&G().updateStorageType(o.storageType),f.value=!1,K("update")}finally{m.value=!1}}return(a,l)=>{const u=B,k=I,s=Y,c=z,w=M,T=H,h=J;return j(),O(h,{open:e(f),"onUpdate:open":l[9]||(l[9]=r=>F(f)?f.value=r:null),title:a.$t("storage-config.storage.oss"),ui:{footer:"justify-end"},dismissible:e(m)},{body:i(()=>[t(T,{ref_key:"form",ref:$,schema:e(_),state:e(o),class:"space-y-6",onSubmit:C},{default:i(()=>[t(s,{name:"storageType",label:a.$t("storage-config.form.storageType.label"),ui:{description:"py-2"},description:a.$t("storage-config.form.storageType.desc")},{default:i(()=>[t(k,{modelValue:e(o).storageType,"onUpdate:modelValue":l[0]||(l[0]=r=>e(o).storageType=r),items:[{label:a.$t("storage-config.storage.oss"),value:e(Q).OSS}]},null,8,["modelValue","items"])]),_:1},8,["label","description"]),t(s,{required:"",label:a.$t("storage-config.form.spaceName.label"),name:"config.bucket"},{default:i(()=>[t(c,{class:"w-full",modelValue:e(o).config.bucket,"onUpdate:modelValue":l[1]||(l[1]=r=>e(o).config.bucket=r),placeholder:a.$t("storage-config.form.spaceName.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(s,{required:"",label:"ACCESS_KEY",name:"config.accessKey"},{default:i(()=>[t(c,{class:"w-full",modelValue:e(o).config.accessKey,"onUpdate:modelValue":l[2]||(l[2]=r=>e(o).config.accessKey=r),placeholder:a.$t("storage-config.form.accessKey.placeholder")},null,8,["modelValue","placeholder"])]),_:1}),t(s,{required:"",label:"SECRET_KEY",name:"config.secretKey"},{default:i(()=>[t(c,{class:"w-full",modelValue:e(o).config.secretKey,"onUpdate:modelValue":l[3]||(l[3]=r=>e(o).config.secretKey=r),placeholder:a.$t("storage-config.form.secretKey.placeholder")},null,8,["modelValue","placeholder"])]),_:1}),t(s,{required:"",name:"config.domain",ui:{description:"text-xs"},label:a.$t("storage-config.form.spaceDomain.label"),description:a.$t("storage-config.form.spaceDomain.desc")},{default:i(()=>[t(c,{class:"w-full",modelValue:e(o).config.domain,"onUpdate:modelValue":l[4]||(l[4]=r=>e(o).config.domain=r),placeholder:a.$t("storage-config.form.spaceDomain.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label","description"]),t(s,{name:"config.region",label:"REGION",required:""},{default:i(()=>[t(c,{class:"w-full",modelValue:e(o).config.region,"onUpdate:modelValue":l[5]||(l[5]=r=>e(o).config.region=r),placeholder:a.$t("storage-config.form.region.placeholder")},null,8,["modelValue","placeholder"])]),_:1}),t(s,{label:"ARN",name:"config.arn",required:"",ui:{description:"text-xs"},description:a.$t("storage-config.aliCloud.paramDesc")},{default:i(()=>[t(c,{class:"w-full",modelValue:e(o).config.arn,"onUpdate:modelValue":l[6]||(l[6]=r=>e(o).config.arn=r),placeholder:a.$t("storage-config.form.arn.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["description"]),t(s,{label:a.$t("storage-config.form.status"),name:"isActive"},{default:i(()=>[t(w,{modelValue:e(o).isActive,"onUpdate:modelValue":l[7]||(l[7]=r=>e(o).isActive=r),disabled:y.data.isActive},null,8,["modelValue","disabled"])]),_:1},8,["label"])]),_:1},8,["schema","state"])]),footer:i(({close:r})=>[t(u,{color:"neutral",variant:"outline",disabled:e(m),onClick:r},{default:i(()=>[g(p(a.$t("storage-config.cancel")),1)]),_:1},8,["disabled","onClick"]),t(u,{color:"primary",loading:e(m),onClick:l[8]||(l[8]=()=>e($)?.submit())},{default:i(()=>[g(p(a.$t("storage-config.confirm")),1)]),_:1},8,["loading"])]),description:i(()=>[...l[10]||(l[10]=[])]),default:i(()=>[t(u,{variant:"ghost"},{default:i(()=>[g(p(a.$t("storage-config.table.setting")),1)]),_:1})]),_:1},8,["open","title","dismissible"])}}});export{se as _};
