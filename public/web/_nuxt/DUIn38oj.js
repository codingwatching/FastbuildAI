import{_ as N}from"./DNVymXxO.js";import q from"./CDSfhndf.js";import{_ as z}from"./Brlt-NDg.js";import{_ as E}from"./Dp8axn_r.js";import{d as R,e as W,ap as D,s as g,aN as G,aK as T,j as I,c as u,o as d,t as V,m as a,q as t,B as M,l,v as j,F as f,_ as A,y as U,x as k}from"#entry";import{_ as K}from"./Bjbrn0__.js";import{_ as H}from"./Ds48qA85.js";import{a as J,b as O}from"./D0igDNVj.js";import"./CXk2IlXx.js";import"./DegKy-XA.js";import"./cwT2REE1.js";import"./DaC7Nksz.js";import"./CZsOHrUj.js";import"./B-p4_8pw.js";import"./DoL5-2Ox.js";import"./6WwfWHXT.js";import"./KiG0a5S-.js";import"./kRIii9yh.js";import"./DBwQYu6J.js";import"./B1TeSxwV.js";import"./C6Y-ieo6.js";import"./Ti3HjCpC.js";import"./CyS2mNdj.js";import"./BaKvIqXP.js";import"./DnFVE45b.js";import"./DSCppvl0.js";import"./7d3iyZ8h.js";import"./N6rGDb75.js";import"./BMSQkwth.js";import"./DaWZu8wl.js";const P={class:"agreement-container relative"},Q={class:"mb-4 inline-block w-auto"},X={class:"flex space-x-3 pt-4"},Le=R({__name:"index",setup(Y){const{t:s}=W(),p=D(),r=g("0"),x=g([{label:s("system.website.agreement.privacy")},{label:s("system.website.agreement.service")},{label:s("system.website.agreement.payment")}]),e=G({privacyTitle:"",privacyContent:"",serviceTitle:"",serviceContent:"",paymentTitle:"",paymentContent:""}),m=g(null),{lockFn:C,isLock:_}=T(async()=>{try{const n=await J();m.value=n,e.privacyTitle=n.agreement.privacyTitle||s("system.website.agreement.privacy"),e.privacyContent=n.agreement.privacyContent||"",e.serviceTitle=n.agreement.serviceTitle||s("system.website.agreement.service"),e.serviceContent=n.agreement.serviceContent||"",e.paymentTitle=n.agreement.paymentTitle||s("system.website.agreement.payment"),e.paymentContent=n.agreement.paymentContent||""}catch(n){console.error("Get website config failed:",n),p.error(s("system.website.messages.loadFailed"))}}),{lockFn:F,isLock:y}=T(async()=>{try{const n={agreement:{privacyTitle:e.privacyTitle,privacyContent:e.privacyContent,serviceTitle:e.serviceTitle,serviceContent:e.serviceContent,paymentTitle:e.paymentTitle,paymentContent:e.paymentContent}};await O(n),p.success(s("system.website.messages.saveSuccess")),await C()}catch(n){console.error("Save failed:",n),p.error(s("system.website.messages.saveFailed"))}}),L=()=>{m.value?(e.privacyTitle=m.value.agreement.privacyTitle||s("system.website.agreement.privacy"),e.privacyContent=m.value.agreement.privacyContent||"",e.serviceTitle=m.value.agreement.serviceTitle||s("system.website.agreement.service"),e.serviceContent=m.value.agreement.serviceContent||"",e.paymentTitle=m.value.agreement.paymentTitle||s("system.website.agreement.payment"),e.paymentContent=m.value.agreement.paymentContent||"",p.info(s("system.website.messages.resetSuccess"))):(e.privacyTitle=s("system.website.agreement.privacy"),e.privacyContent="",e.serviceTitle=s("system.website.agreement.service"),e.serviceContent="",e.paymentTitle=s("system.website.agreement.payment"),e.paymentContent="",p.info(s("system.website.messages.resetEmpty")))};return I(()=>C()),(n,i)=>{const S=N,v=q,c=z,b=E,w=A,$=K,B=H;return d(),u("div",P,[V("div",Q,[a(S,{modelValue:t(r),"onUpdate:modelValue":i[0]||(i[0]=o=>M(r)?r.value=o:null),items:t(x)},null,8,["modelValue","items"])]),a(B,{state:t(e),onSubmit:t(F)},{default:l(()=>[t(r)==="0"?(d(),u(f,{key:0},[a(c,{name:"privacyTitle",label:t(s)("system.website.agreement.titleLabel"),required:""},{default:l(()=>[a(v,{modelValue:t(e).privacyTitle,"onUpdate:modelValue":i[1]||(i[1]=o=>t(e).privacyTitle=o),size:"xl",ui:{root:"w-full"}},null,8,["modelValue"])]),_:1},8,["label"]),a(c,{name:"privacyContent",label:t(s)("system.website.agreement.contentLabel"),class:"mt-4"},{default:l(()=>[a(b,{modelValue:t(e).privacyContent,"onUpdate:modelValue":i[2]||(i[2]=o=>t(e).privacyContent=o)},null,8,["modelValue"])]),_:1},8,["label"])],64)):t(r)==="1"?(d(),u(f,{key:1},[a(c,{name:"serviceTitle",label:t(s)("system.website.agreement.titleLabel"),required:""},{default:l(()=>[a(v,{modelValue:t(e).serviceTitle,"onUpdate:modelValue":i[3]||(i[3]=o=>t(e).serviceTitle=o),size:"xl",ui:{root:"w-full"}},null,8,["modelValue"])]),_:1},8,["label"]),a(c,{name:"serviceContent",label:t(s)("system.website.agreement.contentLabel"),class:"mt-4"},{default:l(()=>[a(b,{modelValue:t(e).serviceContent,"onUpdate:modelValue":i[4]||(i[4]=o=>t(e).serviceContent=o)},null,8,["modelValue"])]),_:1},8,["label"])],64)):t(r)==="2"?(d(),u(f,{key:2},[a(c,{name:"paymentTitle",label:t(s)("system.website.agreement.titleLabel"),required:""},{default:l(()=>[a(v,{modelValue:t(e).paymentTitle,"onUpdate:modelValue":i[5]||(i[5]=o=>t(e).paymentTitle=o),size:"xl",ui:{root:"w-full"}},null,8,["modelValue"])]),_:1},8,["label"]),a(c,{name:"paymentContent",label:t(s)("system.website.agreement.contentLabel"),class:"mt-4"},{default:l(()=>[a(b,{modelValue:t(e).paymentContent,"onUpdate:modelValue":i[6]||(i[6]=o=>t(e).paymentContent=o)},null,8,["modelValue"])]),_:1},8,["label"])],64)):j("",!0),V("div",X,[a($,{codes:["system-website:setConfig"]},{default:l(()=>[a(w,{type:"submit",color:"primary",loading:t(y),disabled:t(y)||t(_)},{default:l(()=>[U(k(t(y)?t(s)("system.website.actions.saving"):t(s)("system.website.actions.saveChanges")),1)]),_:1},8,["loading","disabled"])]),_:1}),a(w,{type:"reset",color:"neutral",variant:"outline",disabled:t(y)||t(_),onClick:L},{default:l(()=>[U(k(t(s)("system.website.actions.reset")),1)]),_:1},8,["disabled"])])]),_:1},8,["state","onSubmit"])])}}});export{Le as default};
