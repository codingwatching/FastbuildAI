import{d as $,e as j,ap as B,aX as q,aN as N,s as z,aK as _,j as D,c as W,o as A,m as t,l as a,t as d,q as e,z as E,_ as G,y as w,x as y,aY as M}from"#entry";import R from"./CDSfhndf.js";import{_ as T}from"./Brlt-NDg.js";import H from"./BjYsydzc.js";import{_ as K}from"./ilPiIi3f.js";import{_ as X}from"./Bjbrn0__.js";import{_ as Y}from"./Ds48qA85.js";import{a as J,b as O}from"./D0igDNVj.js";import{c as P,a as x}from"./BUyfW8JT.js";import{u as h}from"./UqhBTNL6.js";import"./DoL5-2Ox.js";import"./CjOovgR0.js";import"./DXP7Kkdt.js";import"./BRI4D6WA.js";import"./DlAUqK2U.js";import"./DaWZu8wl.js";const Q={class:"information-container py-8"},Z={class:"flex items-start gap-4"},ee={class:"flex items-start gap-4"},oe={class:"flex items-start gap-4"},se={class:"bg-background sticky bottom-0 flex space-x-3 py-4"},xe=$({__name:"information",setup(te){const{t:s}=j(),r=B(),p=q(),V=P({name:x().required(s("system.website.information.name.required")),description:x().optional()}),o=N({name:"",description:"",icon:"",logo:"",spaLoadingIcon:""}),u=z(null),{lockFn:v,isLock:g}=_(async()=>{try{const n=await J();u.value=n,h(o,n.webinfo)}catch(n){console.error("Get website config failed:",n),r.error(s("system.website.messages.loadFailed"))}}),{lockFn:C,isLock:c}=_(async()=>{try{const n={webinfo:{name:o.name,description:o.description,icon:o.icon||"",logo:o.logo||"",spaLoadingIcon:o.spaLoadingIcon||""}};await O(n),r.success(s("system.website.messages.saveSuccess")),await p.getConfig(),M({title:o.name,link:[{rel:"icon",href:p.siteConfig?.webinfo?.icon||"/favicon.ico"},{rel:"apple-touch-icon",href:p.siteConfig?.webinfo?.logo||"/favicon.ico"}]})}catch(n){console.error("Save failed:",n)}}),L=()=>{u.value?(h(o,u.value.webinfo),r.info(s("system.website.messages.resetSuccess"))):(o.name="",o.description="",o.icon="",o.logo="",o.spaLoadingIcon="",r.info(s("system.website.messages.resetEmpty")))};return D(()=>v()),(n,i)=>{const I=E,U=R,m=T,k=H,f=K,b=G,F=X,S=Y;return A(),W("div",Q,[t(S,{schema:e(V),state:e(o),class:"space-y-6",onSubmit:e(C)},{default:a(()=>[t(m,{label:e(s)("system.website.information.name.label"),name:"name",description:e(s)("system.website.information.name.description"),required:""},{default:a(()=>[t(U,{modelValue:e(o).name,"onUpdate:modelValue":i[0]||(i[0]=l=>e(o).name=l),placeholder:e(s)("system.website.information.name.placeholder"),size:"lg",ui:{root:"w-full sm:w-xs"}},{leading:a(()=>[t(I,{name:"i-heroicons-globe-alt"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","description"]),t(m,{label:e(s)("system.website.information.description.label"),name:"description",description:e(s)("system.website.information.description.description")},{default:a(()=>[t(k,{modelValue:e(o).description,"onUpdate:modelValue":i[1]||(i[1]=l=>e(o).description=l),placeholder:e(s)("system.website.information.description.placeholder"),rows:3,size:"lg",ui:{root:"w-full sm:w-xs"}},null,8,["modelValue","placeholder"])]),_:1},8,["label","description"]),t(m,{label:e(s)("system.website.information.icon.label"),name:"icon",description:e(s)("system.website.information.icon.description")},{default:a(()=>[d("div",Z,[t(f,{modelValue:e(o).icon,"onUpdate:modelValue":i[2]||(i[2]=l=>e(o).icon=l),class:"h-24 w-24",text:e(s)("system.website.information.icon.upload"),icon:"i-lucide-upload",accept:".jpg,.png,.jpeg,.ico",maxCount:1,single:!0},null,8,["modelValue","text"])])]),_:1},8,["label","description"]),t(m,{label:e(s)("system.website.information.logo.label"),name:"logo",description:e(s)("system.website.information.logo.description")},{default:a(()=>[d("div",ee,[t(f,{modelValue:e(o).logo,"onUpdate:modelValue":i[3]||(i[3]=l=>e(o).logo=l),class:"h-24 w-24",text:e(s)("system.website.information.logo.upload"),icon:"i-lucide-upload",accept:".jpg,.png,.jpeg",maxCount:1,single:!0},null,8,["modelValue","text"])])]),_:1},8,["label","description"]),t(m,{label:e(s)("system.website.information.spaLoadingIcon.label"),name:"spaLoadingIcon",description:e(s)("system.website.information.spaLoadingIcon.description")},{default:a(()=>[d("div",oe,[t(f,{modelValue:e(o).spaLoadingIcon,"onUpdate:modelValue":i[4]||(i[4]=l=>e(o).spaLoadingIcon=l),class:"h-24 w-24",text:e(s)("system.website.information.spaLoadingIcon.upload"),icon:"i-lucide-upload",accept:".jpg,.png,.jpeg",maxCount:1,single:!0},null,8,["modelValue","text"])])]),_:1},8,["label","description"]),d("div",se,[t(F,{codes:["system-website:setConfig"]},{default:a(()=>[t(b,{type:"submit",color:"primary",loading:e(c),disabled:e(c)||e(g)},{default:a(()=>[w(y(e(c)?e(s)("system.website.actions.saving"):e(s)("system.website.actions.save")),1)]),_:1},8,["loading","disabled"])]),_:1}),t(b,{type:"reset",loading:e(c),disabled:e(c)||e(g),color:"neutral",variant:"outline",onClick:L},{default:a(()=>[w(y(e(s)("system.website.actions.reset")),1)]),_:1},8,["loading","disabled"])])]),_:1},8,["schema","state","onSubmit"])])}}});export{xe as default};
