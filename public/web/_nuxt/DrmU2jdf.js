import{d as L,i as A,av as w,n as K,l as o,h as t,G as T,_ as x,f as U,o as $}from"#entry";import{_ as B}from"./DBiaUVBh.js";import{_ as D}from"./BTN3Ax-V.js";import{_ as I}from"./o4ws_w_T.js";import{_ as N}from"./tVksIQiG.js";import{u as C}from"./BlyoSzaa.js";import{u as R}from"./CxvgZo8z.js";import"./BKdtdX-7.js";import"./CtosDvS0.js";import"./kRIii9yh.js";import"./DxD6Ynfo.js";import"./BhB8DUPm.js";import"./C6Y-ieo6.js";import"./zlMhJk0P.js";import"./DeCyaT7k.js";import"./D4e4FYoF.js";import"./BCcN9pii.js";import"./CMKSl-Ng.js";import"./CuVAPZQ8.js";import"./psimjGaX.js";import"./B3rWqoNg.js";import"./EK7Wbu3-.js";const ae=L({__name:"user-list",props:{usersList:{default:()=>[]}},setup(i){const{t:s}=A(),{hasAccessByCodes:l}=C(),u=w(),d=i,m=T,n=B,p=D,b=x,f=I,a=K(()=>({userNo:s("user.backend.list.userNo"),username:s("user.backend.list.username"),nickname:s("user.backend.list.nickname"),status:s("user.backend.list.status"),source:s("user.backend.list.source"),createdAt:s("user.backend.list.registerTime"),lastLoginAt:s("user.backend.list.lastLoginAt"),actions:s("user.backend.list.actions"),membershipLevel:s("user.backend.list.level"),endTime:s("user.backend.list.endTime")}));function h(e){switch(e){case 0:return{label:s("user.backend.source.console"),icon:"i-lucide-user-plus"};case 1:return{label:s("user.backend.source.phone"),icon:"i-lucide-smartphone"};case 2:return{label:s("user.backend.source.wechat"),icon:"i-lucide-message-circle"};case 3:return{label:s("user.backend.source.email"),icon:"i-lucide-mail"};case 4:return{label:s("user.backend.source.username"),icon:"i-lucide-user-check"};default:return{label:s("user.backend.source.unknown"),icon:"i-lucide-help-circle"}}}function g(e){switch(e){case 1:return{label:s("user.backend.status.active"),color:"success",icon:"i-lucide-check-circle"};case 0:return{label:s("user.backend.status.inactive"),color:"error",icon:"i-lucide-x-circle"};default:return{label:s("user.backend.status.unknown"),color:"warning",icon:"i-lucide-help-circle"}}}const k=o([{accessorKey:"userNo",header:a.value.userNo},{accessorKey:"nickname",header:a.value.nickname,cell:({row:e})=>t("div",{class:"flex items-center gap-2"},[t(m,{src:e.original.avatar}),e.original.nickname])},{accessorKey:"username",header:a.value.username},{accessorKey:"source",header:a.value.source,cell:({row:e})=>h(e.original.source).label},{accessorKey:"membershipLevel",header:a.value.membershipLevel,cell:({row:e})=>{const r=e.original.membershipLevel;return r?t("span",r.name):t("span","-")}},{accessorKey:"endTime",header:a.value.endTime,cell:({row:e})=>{const r=e.original.membershipLevel?.endTime;if(!r)return t("span","-");const c=new Date(r),y=new Date;return t("span",{class:"flex items-center flex-col gap-2"},[t(n,{datetime:r,mode:"datetime"}),c>y?"":t(f,{color:"error"},s("user.backend.expired"))])}},{accessorKey:"status",header:a.value.status,cell:({row:e})=>g(e.original.status).label},{accessorKey:"createdAt",header:a.value.createdAt,cell:({row:e})=>{const r=e.getValue("createdAt");return t("span",r?t(n,{datetime:r,mode:"datetime"}):"-")}},{accessorKey:"lastLoginAt",header:a.value.lastLoginAt,cell:({row:e})=>{const r=e.getValue("lastLoginAt");return t("span",r?t(n,{datetime:r,mode:"datetime"}):s("user.backend.neverLogin"))}},{accessorKey:"actions",header:a.value.actions,cell:({row:e})=>t(p,{items:v(e.original.id)},()=>t(b,{icon:"i-lucide-ellipsis-vertical",color:"neutral",variant:"ghost",class:"ml-auto"},()=>""))}]);function v(e){const r=[];return l(["users:update"])&&r.push({label:s("console-common.edit"),icon:"i-lucide-edit",onSelect:()=>u.push({path:R("users:update"),query:{id:e}})}),r}const _=o({left:[""],right:["actions"]});return(e,r)=>{const c=N;return $(),U(c,{data:d.usersList,columns:k.value,"column-pinning":_.value,ui:{base:"table-fixed border-separate border-spacing-0",thead:"[&>tr]:bg-elevated/50 [&>tr]:after:content-none",tbody:"[&>tr]:last:[&>td]:border-b-0",th:"py-2 whitespace-nowrap first:rounded-l-lg last:rounded-r-lg border-y border-default first:border-l last:border-r",td:"border-b border-default",tr:"[&:has(>td[colspan])]:hidden"}},null,8,["data","columns","column-pinning"])}}});export{ae as default};
