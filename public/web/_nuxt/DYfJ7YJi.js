const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./uR-PlPFC.js","./Dgvg0_To.js","./6WwfWHXT.js","./KiG0a5S-.js","./CXk2IlXx.js","./kRIii9yh.js","./DBwQYu6J.js","./B1TeSxwV.js","./C6Y-ieo6.js","./Ti3HjCpC.js","./CyS2mNdj.js","./BaKvIqXP.js","./cwT2REE1.js","./DaC7Nksz.js","./DegKy-XA.js","./DnFVE45b.js","./DSCppvl0.js","./7d3iyZ8h.js","./DP4OtQ_W.js","./DXP7Kkdt.js","./BRI4D6WA.js","./t1d_OU1Q.js","./C-XPfH0G.js","./DVuRPXlj.js","./B_bYPYFo.js","./DY-cUyKw.js","./DlAUqK2U.js"])))=>i.map(i=>d[i]);
import{_ as T}from"./DCp0GaG5.js";import{_ as q}from"./U4tKd1qQ.js";import{d as C,i as x,aa as G,q as e,s as z,ar as W,j as J,c as h,o as f,t as i,m as c,A as E,v as w,D as F,_ as H,x as k,l as M,k as A,z as K,R as P,B as S,U as O,aJ as D,bj as Q,a$ as X,b0 as Y}from"#entry";import{_ as Z}from"./BN8W-Pju.js";import{_ as ee}from"./CR9qioUt.js";import{_ as te}from"./tYG64TNz.js";import{q as oe,r as ne}from"./BdGqAD-s.js";import{a as se}from"./DXP7Kkdt.js";import{d as ie}from"./C-XPfH0G.js";import"./yEfNWz_w.js";import{_ as ae}from"./DlAUqK2U.js";import"./t1d_OU1Q.js";/* empty css        */import"./CGkf3lDq.js";import"./r8IkyAmp.js";import"./CHCbUdJ4.js";import"./DegKy-XA.js";import"./CXk2IlXx.js";import"./CgMDXot0.js";import"./C6Y-ieo6.js";import"./B-p4_8pw.js";import"./CvZB4bI9.js";import"./KiG0a5S-.js";import"./kRIii9yh.js";import"./DBwQYu6J.js";import"./B1TeSxwV.js";import"./Ti3HjCpC.js";import"./CyS2mNdj.js";import"./BaKvIqXP.js";import"./cwT2REE1.js";import"./DaC7Nksz.js";import"./DnFVE45b.js";import"./CsY35JUW.js";import"./DSCppvl0.js";import"./7d3iyZ8h.js";import"./BRI4D6WA.js";import"./DDJ79SjH.js";import"./RmzZBBRE.js";import"./C4jlvBh2.js";function I(a,o){return`${a}/${o}`.replace(/\/+/g,"/")}function le(a){return[...a].sort((o,r)=>(o.sort??0)-(r.sort??0))}function re(a,o){return a===o||a.startsWith(`${o}/`)}function L(a){return a.some(o=>o.active||o.children&&L(o.children))}function R(a,o,r="/console",u="/console"){const m=le(a),v=new Map,d=(s,p,n)=>{for(const l of s){const g=I(p,l.path);l.activePath&&v.set(g,I(n,l.activePath)),l.children?.length&&d(l.children,g,n)}};d(a,r,u);const t=v.get(o);return m.filter(s=>!s.hidden).map(s=>{const p=I(r,s.path);let n=t?p===t:re(o,p);const l={label:s.name,icon:s.icon||"i-lucide-file",active:n,defaultOpen:s.defaultOpen};if(s.component&&(l.to=p),s.children?.length){if(l.children=R(s.children,o,p,u),l.children.length===0)return null;const g=L(l.children);g&&(n=!0,l.active=!0),l.defaultOpen=s.defaultOpen||n||g}return l}).filter(s=>s!==null)}const ce={key:0,class:"p-1"},ue={key:0,class:"group/logo relative flex items-center justify-center"},de={key:1,class:"space-y-2"},me={class:"flex items-center justify-between"},pe=["title"],fe=["title"],_e={class:"flex flex-grow flex-col overflow-hidden px-1 py-4"},ve={style:{"--text-color-muted":"var(--color-accent-foreground)","--text-color-dimmed":"var(--color-accent-foreground)"}},ge={class:"bg-sidebar flex h-screen w-64 flex-col p-2 transition-all duration-300"},he={key:0,class:"mt-2 mb-2"},xe={class:"bg-secondary rounded-lg p-2"},be={class:"space-y-1"},ye={class:"flex items-center gap-2"},we=["title"],ke={class:"flex items-center gap-1.5"},Me=["title"],$e={class:"flex flex-grow flex-col overflow-y-auto py-4"},Ie={style:{"--text-color-muted":"var(--color-accent-foreground)","--text-color-dimmed":"var(--color-accent-foreground)"}},ze=C({__name:"sidebar",props:{collapsed:{type:Boolean},mobileMenu:{type:Boolean},manifest:{}},emits:["update:mobileMenu"],setup(a,{emit:o}){const r=P(()=>O(()=>import("./uR-PlPFC.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]),import.meta.url)),u=P(()=>O(()=>import("./DVuRPXlj.js"),__vite__mapDeps([23,1,24,25,26]),import.meta.url)),m=a,d=se(m,"mobileMenu",o),t=x(()=>m.collapsed),s=G("pluginConsoleMenu",x(()=>[]));console.log("navigationItems",s.value);const p=x(()=>{const b=e(s);return b?.length?[b]:[]}),n=z(null);W();const l=()=>{window.location.href="/console/plugins/manage"},g=async()=>{console.log("props.manifest",m.manifest);const b=await oe(m.manifest?.identifier);n.value=b,console.log("pluginInfo",n.value)};return ie({o:()=>d.value=!d.value}),J(()=>g()),(b,y)=>{const $=F,j=H,B=K,U=Z,V=ee,N=te;return f(),h("div",null,[i("aside",{class:E(["bg-sidebar hidden h-screen flex-col p-2 transition-all duration-300 md:flex",{"w-16":e(t),"w-64":!e(t)}])},[e(n)?(f(),h("div",ce,[i("div",{class:E(["bg-secondary rounded-lg p-3 transition-all",e(t)?"flex items-center justify-center bg-transparent! p-1!":""])},[e(t)?(f(),h("div",ue,[c($,{class:"m-1 size-9 opacity-100 group-hover/logo:opacity-0",src:e(n).icon,text:e(n).author?.name,size:"md"},null,8,["src","text"]),c(j,{color:"primary",class:"size-10 rounded-full",icon:"i-lucide-arrow-left",variant:"soft",ui:{base:"flex cursor-pointer absolute inset-0 z-1 justify-center items-center group-hover/logo:opacity-100 opacity-0"},label:e(t)?"":b.$t("layouts.pluginSidebar"),onClick:l},null,8,["label"])])):(f(),h("div",de,[i("div",me,[c(j,{color:"primary",icon:"i-lucide-arrow-left",variant:"soft",class:"rounded-full",onClick:l}),c($,{src:e(n).icon,text:e(n).author?.name,size:"md"},null,8,["src","text"])]),i("h3",{class:"text-foreground mb-0.5! truncate text-sm font-semibold",title:e(n).name},k(e(n).name),9,pe),i("div",{class:"text-muted-foreground text-xs",title:`版本: ${e(n).version}`}," v"+k(e(n).version),9,fe)]))],2)])):w("",!0),c(V,{class:"flex-1"},{default:M(()=>[i("div",_e,[i("div",ve,[c(U,{collapsed:e(t),orientation:"vertical",items:e(p),ui:{label:"text-muted-foreground",list:"navbar-menu",link:e(t)?"justify-center size-10 hover:bg-secondary dark:hover:bg-surface-800 rounded-lg":"justify-start hover:bg-secondary dark:hover:bg-surface-800 p-2 px-3 leading-6 rounded-lg",linkLeadingIcon:e(t)?"size-4.5":"size-4"}},{"item-trailing":M(({item:_})=>[_.children?.length?(f(),A(B,{key:0,name:"i-lucide-chevron-right",class:"iconify iconify--lucide size-4 shrink-0 transform transition-transform duration-200 group-data-[state=open]:rotate-90"})):w("",!0)]),_:1},8,["collapsed","items","ui"])])])]),_:1}),c(e(r),{"hidden-layout":!0,mode:"sidebar",collapsed:e(t),"mobile-menu":!1,"onUpdate:collapsed":y[0]||(y[0]=_=>t.value=_)},null,8,["collapsed"])],2),c(N,{open:e(d),"onUpdate:open":y[2]||(y[2]=_=>S(d)?d.value=_:null),side:"left",ui:{content:"!w-fit flex-0 max-w-fit"}},{content:M(()=>[i("aside",ge,[c(e(u),{layout:"side",collapsed:!1}),e(n)?(f(),h("div",he,[i("div",xe,[i("div",be,[i("div",ye,[c($,{src:e(n).icon,text:e(n).author?.name,size:"xs"},null,8,["src","text"]),i("h3",{class:"text-foreground truncate text-sm font-semibold",title:e(n).name},k(e(n).name),9,we)]),i("div",ke,[i("span",{class:"text-muted-foreground text-xs",title:`版本: ${e(n).version}`}," v"+k(e(n).version),9,Me)])])])])):w("",!0),i("div",$e,[i("div",Ie,[c(U,{collapsed:!1,orientation:"vertical",items:e(p),ui:{list:"navbar-menu",link:"justify-start hover:bg-secondary dark:hover:bg-surface-800 p-2 px-3 leading-6 rounded-lg",linkLeadingIcon:"size-4"}},{"item-trailing":M(({item:_})=>[_.children?.length?(f(),A(B,{key:0,name:"i-lucide-chevron-right",class:"iconify iconify--lucide size-4 shrink-0 transform transition-transform duration-200 group-data-[state=open]:rotate-90"})):w("",!0)]),_:1},8,["items"])])]),c(e(r),{mode:"sidebar",collapsed:e(t),"mobile-menu":!0,"onUpdate:collapsed":y[1]||(y[1]=_=>t.value=_)},null,8,["collapsed"])])]),_:1},8,["open"])])}}}),Ae=ae(ze,[["__scopeId","data-v-db7fb1da"]]),Ce={class:"bg-sidebar flex h-screen w-full overflow-hidden"},je={class:"app-sidebar"},Be={class:"bg-background m-0 flex min-w-0 flex-1 flex-col items-center shadow-lg md:m-2 md:ml-0 md:rounded-xl"},Ue=C({__name:"index",props:{menu:{},manifest:{}},setup(a){const o=a,r=z(!1),u=z(!1),m=()=>{r.value=!r.value},v=()=>{u.value=!0},d=x(()=>{if(!o.menu?.length)return[];const t=D().path;return R(o.menu,t)});return Q("pluginConsoleMenu",d),(t,s)=>(f(),h("div",Ce,[i("div",je,[c(Ae,{collapsed:e(r),manifest:o.manifest,"mobile-menu":e(u),"onUpdate:mobileMenu":s[0]||(s[0]=p=>S(u)?u.value=p:null)},null,8,["collapsed","manifest","mobile-menu"])]),i("div",Be,[c(q,{collapsed:e(r),"mobile-menu":e(u),"navigation-items":e(d),onToggle:m,onOpenMobileMenu:v},null,8,["collapsed","mobile-menu","navigation-items"]),c(T,{layout:"sidebar"})])]))}}),Ee={key:1,class:"flex h-screen items-center justify-center"},xt=C({__name:"extension",async setup(a){let o,r;const u=x(()=>{const t=D().fullPath.match(/\/buildingai\/extension\/([^/]+)\/console/);return t?t[1]:""}),{data:m}=([o,r]=X(()=>Y(`plugin-layout-${u.value}`,()=>{if(!u.value)throw new Error("Extension ID is required");return ne(u.value)},{default:()=>({manifest:null,consoleMenu:null})})),o=await o,r(),o),v=x(()=>{const t=m.value?.manifest;return t?{...t,author:t.author||{name:"",homepage:""}}:null}),d=x(()=>m.value?.consoleMenu);return(t,s)=>e(v)?(f(),A(e(Ue),{key:0,menu:e(d),manifest:e(v)},null,8,["menu","manifest"])):(f(),h("div",Ee,[...s[0]||(s[0]=[i("div",{class:"text-center"},[i("p",{class:"text-lg font-semibold"},"Loading extension layout..."),i("p",{class:"text-sm text-gray-500"},"Waiting for extension configuration...")],-1)])]))}});export{xt as default};
