const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Dfdflb70.js","./Dgvg0_To.js","./BixMXl5t.js","./D4-hkFz_.js","./C4jlvBh2.js","./DDJ79SjH.js","./Ti3HjCpC.js","./DegKy-XA.js","./B1TeSxwV.js","./r_Dti2HQ.js","./BdGqAD-s.js","./4ri8NF9h.js","./B-p4_8pw.js","./XBYuZpdu.js","./u0Yn9pdf.js","./CDSfhndf.js","./Brlt-NDg.js","./DoL5-2Ox.js","./ilPiIi3f.js","./CjOovgR0.js","./DXP7Kkdt.js","./BRI4D6WA.js","./DlAUqK2U.js","./BjYsydzc.js","./tnelovi7.js","./CXk2IlXx.js","./DVSiT9pd.js","./cwT2REE1.js","./DaC7Nksz.js","./D_1uxSdv.js","./CZsOHrUj.js","./CaHBeWuX.js","./DJ9SNVgt.js","./CgMDXot0.js","./Ds48qA85.js","./BYm23QKU.js","./DGUAW_1C.js","./RmzZBBRE.js","./C-XPfH0G.js","./7d3iyZ8h.js","./BUyfW8JT.js","./DaWZu8wl.js","./B7YErg4-.js","./BhyXixVX.js","./CR9qioUt.js","./CvZB4bI9.js","./KiG0a5S-.js","./kRIii9yh.js","./DBwQYu6J.js","./C6Y-ieo6.js","./CyS2mNdj.js","./BaKvIqXP.js","./DnFVE45b.js","./B0g9CpkI.js"])))=>i.map(i=>d[i]);
import{d as re,e as ce,Q as de,ap as me,s as pe,aN as ue,i as ge,au as P,aK as fe,j as _e,c as _,o as r,t as o,m as i,q as e,B as he,I as be,l as h,y as ve,x as c,_ as xe,z as ye,F as M,C as O,k as p,v as u,D as we,bG as Ee,R as T,U as L}from"#entry";import{_ as ke}from"./DNVymXxO.js";import Ie from"./CDSfhndf.js";import{_ as Ce}from"./12pJH7Js.js";import{_ as Te}from"./B-p4_8pw.js";import{_ as Le}from"./CsY35JUW.js";import{_ as De}from"./6WwfWHXT.js";import{_ as Ae}from"./DRoDiArK.js";import{_ as $e}from"./CR9qioUt.js";import{a as D,b as g,E as b}from"./XBYuZpdu.js";import{c as Ne,j as ze,k as Ue,l as Be,m as Ve,n as Se}from"./BdGqAD-s.js";import{u as Pe}from"./C1xCp5oe.js";import"./CXk2IlXx.js";import"./DegKy-XA.js";import"./cwT2REE1.js";import"./DaC7Nksz.js";import"./CZsOHrUj.js";import"./DVSiT9pd.js";import"./DBwQYu6J.js";import"./Ti3HjCpC.js";import"./CyS2mNdj.js";import"./BaKvIqXP.js";import"./B1TeSxwV.js";import"./BstbYvQo.js";import"./DnFVE45b.js";import"./DSCppvl0.js";import"./7d3iyZ8h.js";import"./KiG0a5S-.js";import"./kRIii9yh.js";import"./C6Y-ieo6.js";import"./BRI4D6WA.js";import"./DlAUqK2U.js";const Me={class:"extension-manage-container flex h-full flex-col pb-5"},Oe={class:"header bg-background sticky top-0 z-10 pb-6"},Re={class:"space-y-4"},Fe={class:"flex w-full flex-wrap justify-between gap-4"},je={class:"flex items-end justify-end"},We={class:"flex items-center gap-4"},Ge={key:0,class:"relative grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},Xe={class:"z-10 h-[170px] rounded-lg border border-dashed p-4"},qe={class:"flex flex-col"},He={class:"text-muted-foreground pb-2 pl-2 text-xs font-bold"},Ke={class:"absolute top-0 right-0 bottom-0 left-0 flex h-[calc(100vh-12rem)] items-center justify-center"},Qe={class:"text-muted-foreground text-sm font-medium"},Je={key:1,class:"grid h-[calc(100vh-12rem)]"},Ye={class:"grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},Ze={class:"h-[170px] rounded-lg border border-dashed p-4"},ea={class:"flex flex-col"},aa={class:"text-muted-foreground pb-2 pl-2 text-xs font-bold"},sa={class:"flex h-full w-full cursor-pointer flex-col p-4"},ta={class:"flex justify-between"},oa={class:"flex w-[calc(100%-76px)] flex-col gap-1"},na={class:"flex items-center gap-1"},la={class:"text-foreground truncate text-[16px] leading-[22px] font-[500]"},ia={class:"text-muted-foreground line-clamp-1 text-[14px] leading-[20px] font-normal wrap-break-word"},ra={class:"mt-1.5 flex items-center gap-2"},ca={class:"ml-[12px] h-[64px] w-[64px] flex-none overflow-hidden rounded-[10px]"},da={class:"mt-auto flex items-center justify-between"},ma={class:"flex items-center gap-1 text-xs"},pa={class:"text-nowrap"},ua={class:"bg-background flex items-center gap-2"},ga={key:0,class:"text-error flex items-center gap-1"},fa={class:"text-xs leading-none"},Ka=re({__name:"list",setup(_a){const R=T(()=>L(()=>import("./Dfdflb70.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)),F=T(()=>L(()=>import("./4ri8NF9h.js"),__vite__mapDeps([11,1,12,2,3,4,5,6,7,8,9,13,10]),import.meta.url)),j=T(()=>L(()=>import("./u0Yn9pdf.js"),__vite__mapDeps([14,15,1,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,7,31,32,33,34,35,36,5,6,8,37,4,38,39,13,10,40,41]),import.meta.url)),W=T(()=>L(()=>import("./B7YErg4-.js"),__vite__mapDeps([42,1,12,43,15,44,21,22,45,46,25,47,48,8,49,6,50,51,27,28,7,52,53,35,36,5,37,4,38,39,10]),import.meta.url)),{t:s}=ce(),E=de(),y=me(),G=[{label:s("extensions.manage.tabs.all"),value:"all"},{label:s("extensions.manage.tabs.installed"),value:"installed"},{label:s("extensions.manage.tabs.uninstalled"),value:"uninstalled"}],w=pe("all"),f=ue({type:void 0}),X=t=>({[b.WEB]:s("extensions.modal.terminalTypes.web"),[b.WEIXIN]:s("extensions.modal.terminalTypes.weixin"),[b.H5]:s("extensions.modal.terminalTypes.h5"),[b.MP]:s("extensions.modal.terminalTypes.mp"),[b.API]:s("extensions.modal.terminalTypes.api")})[t]||s("extensions.manage.unknown"),{paging:l,getLists:m}=Pe({fetchFun:Ne,params:f}),q=ge(()=>l.items.length<l.total),H=()=>{l.loading||(l.page++,m({append:!0}))},K=be(()=>{l.page=1,m()},500),Q=t=>{w.value=String(t);const n=w.value;n==="all"?delete f.isInstalled:f.isInstalled=n==="installed",l.page=1,m()},J=t=>{window.open(`${Ee.EXTENSION}/${t.identifier}/buildingai-middleware`,"_blank")},k=P({}),I=P({}),Y=async t=>{if(!k[t.identifier])try{k[t.identifier]=!0,await Ve(t.identifier),l.page=1,await m(),y.success(s("console-common.messages.success"))}catch(n){console.error("安装插件失败:",n)}finally{k[t.identifier]=!1}},Z=async t=>{if(!I[t.identifier])try{I[t.identifier]=!0,await Se(t.identifier),l.page=1,await m(),y.success(s("console-common.messages.success"))}catch(n){console.error("更新插件失败:",n)}finally{I[t.identifier]=!1}},{lockFn:ee}=fe(async t=>{try{await Be(t.identifier),l.page=1,await m(),y.success(s("console-common.messages.success"))}catch(n){console.error("卸载插件失败:",n)}}),$=async t=>{try{await ze(t.id),l.page=1,await m(),y.success(s("console-common.messages.success"))}catch(n){console.error("启用插件失败:",n)}},ae=async t=>{try{await Ue(t.id),l.page=1,await m(),y.success(s("console-common.messages.success"))}catch(n){console.error("禁用插件失败:",n)}},se=t=>{E.create(W).open({extension:t})},C=async(t,n)=>{await E.create(j).open({isEdit:n,id:t.id,initialData:{name:t.name,packName:t.identifier,description:t.description,version:t.version,icon:t.icon,type:t.type,supportTerminal:t.supportTerminal||[],author:t.author||{avatar:"",name:"",homepage:""}}}).result&&(l.page=1,m())},N=()=>{window.open("https://buildingai.cc/plugin")},te=t=>{E.create(F).open({isIdentifier:t.isLocal,extensionId:t.id,identifier:t.identifier})},oe=t=>{E.create(R).open({extension:t,identifier:t.identifier})};return _e(()=>m()),(t,n)=>{const z=ke,U=Ie,B=Ce,v=xe,x=ye,A=Te,V=we,S=Le,ne=De,le=Ae,ie=$e;return r(),_("div",Me,[o("div",Oe,[o("div",Re,[o("div",Fe,[o("div",je,[i(z,{items:G,modelValue:e(w),"onUpdate:modelValue":[n[0]||(n[0]=a=>he(w)?w.value=a:null),Q],class:"block w-auto"},null,8,["modelValue"])]),o("div",We,[i(U,{modelValue:e(f).name,"onUpdate:modelValue":[n[1]||(n[1]=a=>e(f).name=a),e(K)],placeholder:e(s)("extensions.manage.search")},null,8,["modelValue","placeholder","onUpdate:modelValue"]),i(B,{modelValue:e(f).type,"onUpdate:modelValue":n[2]||(n[2]=a=>e(f).type=a),items:[{label:e(s)("extensions.manage.filters.allTypes"),value:void 0},{label:e(s)("extensions.modal.extensionTypes.application"),value:e(D).APPLICATION},{label:e(s)("extensions.modal.extensionTypes.function"),value:e(D).FUNCTIONAL}],class:"block w-auto",placeholder:e(s)("extensions.manage.selectType")},null,8,["modelValue","items","placeholder"]),i(v,{icon:"i-lucide-plus",color:"primary",onClick:n[3]||(n[3]=a=>C({},!1))},{default:h(()=>[ve(c(e(s)("extensions.manage.add")),1)]),_:1})])])])]),!e(l).loading&&e(l).items.length===0?(r(),_("div",Ge,[o("div",Xe,[o("div",qe,[o("h3",He,c(e(s)("extensions.manage.add")),1),o("div",{class:"text-primary hover:bg-primary-50 flex cursor-pointer items-center rounded-lg px-2 py-2 text-sm",onClick:n[4]||(n[4]=a=>C({},!1))},[i(x,{name:"i-lucide-file-plus-2",class:"mr-2 size-4"}),o("span",null,c(e(s)("extensions.manage.add")),1)]),o("div",{class:"text-primary hover:bg-primary-50 flex cursor-pointer items-center rounded-lg px-2 py-2 text-sm",onClick:N},[i(x,{name:"i-lucide-external-link",class:"mr-2 size-4"}),o("span",null,c(e(s)("extensions.manage.store")),1)])])]),o("div",Ke,[o("span",Qe,c(e(s)("extensions.manage.empty.description")),1)])])):(r(),_("div",Je,[i(ie,{class:"h-full",shadow:!1},{default:h(()=>[i(le,{loading:e(l).loading,"has-more":e(q),"loading-text":e(s)("extensions.manage.loadingText"),"no-more-text":e(l).page!==1?e(s)("extensions.manage.noMoreText"):" ",onLoadMore:H},{default:h(()=>[o("div",Ye,[o("div",Ze,[o("div",ea,[o("h3",aa,c(e(s)("extensions.manage.add")),1),o("div",{class:"text-primary hover:bg-primary-50 dark:hover:bg-primary/15 flex cursor-pointer items-center rounded-lg px-2 py-2 text-sm",onClick:n[5]||(n[5]=a=>C({},!1))},[i(x,{name:"i-lucide-file-plus-2",class:"mr-2 size-4"}),o("span",null,c(e(s)("extensions.manage.add")),1)]),o("div",{class:"text-primary hover:bg-primary-50 dark:hover:bg-primary/15 flex cursor-pointer items-center rounded-lg px-2 py-2 text-sm",onClick:N},[i(x,{name:"i-lucide-external-link",class:"mr-2 size-4"}),o("span",null,c(e(s)("extensions.manage.store")),1)])])]),(r(!0),_(M,null,O(e(l).items,a=>(r(),_("div",{key:a.id,class:"bg-background border-muted relative h-[170px] overflow-hidden rounded-[6px] border border-solid transition duration-150 ease-out hover:shadow-[0_6px_8px_0_rgba(28,31,35,6%)]"},[o("div",sa,[o("div",ta,[o("div",oa,[o("div",na,[o("span",la,c(a.name),1)]),o("span",ia,c(a.description||e(s)("extensions.manage.noDescription"))+" "+c(a.description||e(s)("extensions.manage.noDescription"))+" "+c(a.description||e(s)("extensions.manage.noDescription")),1),o("div",ra,[a.version?(r(),p(A,{key:0,color:"neutral",variant:"soft",label:`v${a.version}`},null,8,["label"])):u("",!0),a.isInstalled?(r(),p(A,{key:1,color:a.status===e(g).ENABLED?"success":"neutral",variant:"soft",label:a.status===e(g).ENABLED?e(s)("extensions.manage.enable"):e(s)("extensions.manage.disable")},null,8,["color","label"])):u("",!0),(r(!0),_(M,null,O(a.supportTerminal,d=>(r(),p(A,{color:d===e(b).WEB?"success":d===e(b).API?"info":"neutral",variant:"soft",label:X(d)},null,8,["color","label"]))),256))])]),o("div",ca,[i(V,{src:a.icon,alt:a.name,icon:"i-lucide-puzzle",ui:{root:`size-full rounded-md ${a.icon?"":"bg-primary"}`,icon:"size-7 text-white"}},null,8,["src","alt","ui"])])]),o("div",da,[o("div",ma,[i(V,{color:"primary",size:"xs",src:a.author?.avatar,ui:{root:"rounded-full bg-primary size-5"}},{default:h(()=>[i(x,{name:"i-lucide-user",class:"size-3 text-white"})]),_:1},8,["src"]),o("div",pa,c(a.author.name||e(s)("extensions.manage.unknownAuthor")),1)]),o("div",ua,[a.isCompatible?u("",!0):(r(),_("div",ga,[i(x,{name:"i-lucide-circle-alert",class:"size-3.5 cursor-pointer"}),o("span",fa,c(t.$t("extensions.manage.incompatible")),1)])),a.type===e(D).APPLICATION&&a.isInstalled&&a.status===e(g).ENABLED&&a.isCompatible?(r(),p(S,{key:1,text:e(s)("extensions.manage.manage")},{default:h(()=>[i(v,{color:"primary",icon:"i-lucide-settings",variant:"soft",size:"sm",label:e(s)("extensions.manage.manage"),onClick:d=>J(a)},null,8,["label","onClick"])]),_:2},1032,["text"])):u("",!0),a.type===e(D).APPLICATION&&a.isInstalled&&a.status===e(g).DISABLED&&a.isCompatible?(r(),p(S,{key:2,text:e(s)("extensions.manage.enable")},{default:h(()=>[i(v,{color:"primary",icon:"i-lucide-power",variant:"soft",size:"sm",label:e(s)("extensions.manage.enable"),onClick:d=>$(a)},null,8,["label","onClick"])]),_:2},1032,["text"])):u("",!0),!a.isInstalled&&a.isCompatible?(r(),p(v,{key:3,color:"primary",variant:"solid",icon:"i-lucide-download",size:"sm",loading:e(k)[a.identifier],label:t.$t("extensions.manage.install"),onClick:d=>Y(a)},null,8,["loading","label","onClick"])):u("",!0),a.hasUpdate?(r(),p(v,{key:4,color:"info",variant:"subtle",icon:"i-lucide-circle-fading-arrow-up",size:"sm",loading:e(I)[a.identifier],label:t.$t("extensions.manage.upgrade"),onClick:d=>Z(a)},null,8,["loading","label","onClick"])):u("",!0),a.isInstalled?(r(),p(ne,{key:5,items:[[{label:e(s)("extensions.manage.detail"),icon:"i-lucide-info",onSelect:()=>te(a)},a.isLocal?void 0:{label:e(s)("extensions.manage.logs"),icon:"i-lucide-file-text",onSelect:()=>oe(a)},{label:e(s)("extensions.manage.featureConfig"),icon:"i-lucide-settings",onSelect:()=>se(a)}].filter(d=>d!==void 0),[{label:a.status===e(g).ENABLED?e(s)("extensions.manage.disable"):e(s)("extensions.manage.enable"),icon:a.status===e(g).ENABLED?"i-lucide-power-off":"i-lucide-power",color:a.status===e(g).ENABLED?"warning":"success",disabled:!a.isCompatible,onSelect:()=>{a.status===e(g).ENABLED?ae(a):$(a)}}],[a.isLocal?{label:e(s)("console-common.edit"),icon:"i-lucide-pen-line",onSelect:()=>C(a,!0)}:void 0,{label:e(s)("extensions.manage.uninstall"),icon:"i-lucide-trash-2",color:"error",onSelect:()=>{e(ee)(a)}}].filter(d=>d!==void 0)],content:{align:"end",side:"bottom",sideOffset:4},ui:{content:"w-32",itemLeadingIcon:"size-4"}},{default:h(()=>[i(v,{icon:"i-lucide-ellipsis-vertical",color:"neutral",variant:"ghost",size:"sm"})]),_:1},8,["items"])):u("",!0)])])])]))),128))])]),_:1},8,["loading","has-more","loading-text","no-more-text"])]),_:1})]))])}}});export{Ka as default};
