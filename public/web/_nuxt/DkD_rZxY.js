const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Cpwu_0Xl.js","./CDSfhndf.js","./Dgvg0_To.js","./Brlt-NDg.js","./DoL5-2Ox.js","./tnelovi7.js","./CXk2IlXx.js","./DVSiT9pd.js","./cwT2REE1.js","./DaC7Nksz.js","./D_1uxSdv.js","./CZsOHrUj.js","./DegKy-XA.js","./Ds48qA85.js","./BYm23QKU.js","./DGUAW_1C.js","./DDJ79SjH.js","./Ti3HjCpC.js","./B1TeSxwV.js","./RmzZBBRE.js","./C4jlvBh2.js","./C-XPfH0G.js","./7d3iyZ8h.js","./BUyfW8JT.js","./DaWZu8wl.js","./BHcs2Vpe.js","./CsY35JUW.js","./DBwQYu6J.js","./DnFVE45b.js","./DSCppvl0.js","./B-p4_8pw.js","./BixMXl5t.js","./DNJQj0yQ.js","./6WwfWHXT.js","./KiG0a5S-.js","./kRIii9yh.js","./C6Y-ieo6.js","./CyS2mNdj.js","./BaKvIqXP.js","./DJ9SNVgt.js","./CgMDXot0.js","./zDgZcZqa.js","./Dx01Lm3C.js","./D1OCWyg8.js","./CEOm-hjj.js"])))=>i.map(i=>d[i]);
import{d as W,ar as X,ap as Y,e as Z,Q as ee,aN as te,r as se,s as oe,bP as ae,i as v,j as ne,c as g,o as u,t as r,k as R,v as ie,m as i,q as e,x as l,l as _,_ as re,y as P,B as le,E as D,G as S,F as ce,C as de,R as b,z as me,U as y,bQ as ue,bR as pe}from"#entry";import _e from"./CDSfhndf.js";import{_ as fe}from"./DULnWpIH.js";import{_ as ge}from"./DJ9SNVgt.js";import{_ as he}from"./DSCppvl0.js";import{_ as ve}from"./Bjbrn0__.js";import{_ as be}from"./DNVymXxO.js";import{_ as ye}from"./CR9qioUt.js";import{_ as ke}from"./4yDHJZoY.js";import{u as we}from"./Dx01Lm3C.js";import{u as xe}from"./C1xCp5oe.js";import{u as Ue}from"./DcxZIiHI.js";import"./BzbI-krH.js";import"./KiG0a5S-.js";import"./CXk2IlXx.js";import"./kRIii9yh.js";import"./DBwQYu6J.js";import"./B1TeSxwV.js";import"./C6Y-ieo6.js";import"./Ti3HjCpC.js";import"./CyS2mNdj.js";import"./BaKvIqXP.js";import"./cwT2REE1.js";import"./DaC7Nksz.js";import"./DegKy-XA.js";import"./DnFVE45b.js";import"./CvZB4bI9.js";import"./C-XPfH0G.js";import"./7d3iyZ8h.js";import"./BRI4D6WA.js";import"./CgMDXot0.js";import"./DVSiT9pd.js";import"./CZsOHrUj.js";import"./D_1uxSdv.js";import"./DoL5-2Ox.js";import"./B-p4_8pw.js";import"./DlAUqK2U.js";import"./DhlnS5e0.js";const Ce={class:"user-list-container pb-5"},Re={class:"bg-background sticky top-0 z-10 flex flex-wrap gap-4 pb-2"},Pe={class:"flex items-center gap-2 md:ml-auto"},De={class:"flex items-center gap-2"},Se={class:"text-accent-foreground text-sm"},Te={class:"grid grid-cols-1 gap-6 py-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4"},Ve={key:1,class:"flex h-[calc(100vh-10rem)] items-center justify-center"},ze={class:"flex items-center gap-3"},Ee={class:"text-accent-foreground"},$e={key:2,class:"flex h-[calc(100vh-10rem)] flex-col items-center justify-center"},Ae={class:"text-accent-foreground"},Be={key:3,class:"bg-background sticky bottom-0 z-10 flex items-center justify-between gap-3 py-4"},Ie={class:"text-muted text-sm"},Le={class:"flex items-center gap-1.5"},Ut=W({__name:"list",setup(Me){const T=b(()=>y(()=>import("./Cpwu_0Xl.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url)),V=b(()=>y(()=>import("./BHcs2Vpe.js"),__vite__mapDeps([25,2,26,27,28,12,29,22,30,31,32,33,34,6,35,18,36,17,37,38,8,9,39,40,7,11,10,4,41,42]),import.meta.url)),z=b(()=>y(()=>import("./D1OCWyg8.js"),__vite__mapDeps([43,2,31,33,34,6,35,27,18,36,17,37,38,8,9,12,28,29,22,30,44,41,42]),import.meta.url)),E=X(),$=Y(),{t:d}=Z(),A=ee(),m=te({keyword:"",startTime:"",endTime:""}),f=se(2),B=[{value:2,icon:"i-tabler-list"},{value:1,icon:"i-tabler-layout-grid"}],n=oe(new Set),{paging:a,getLists:p}=xe({fetchFun:ae,params:m}),h=v(()=>a.items.filter(t=>t.isRoot!==1)),I=(t,s)=>{if(typeof s=="boolean"){const c=t.id;s?n.value.add(c):n.value.delete(c)}},L=t=>{t===!0?h.value.forEach(c=>{c.id&&n.value.add(c.id)}):n.value.clear()},k=async t=>{try{await Ue({title:d("user.backend.deleteTitle"),description:d("user.backend.deleteMsg"),color:"error"}),Array.isArray(t)?await ue(t.map(String)):await pe(String(t)),n.value.clear(),p(),$.success(d("user.backend.success"))}catch(s){console.error("Delete failed:",s)}},M=t=>{t.id&&k(t.id)},N=async t=>{await A.create(T).open({user:t}).result&&p()},j=t=>{N(t)},F=()=>{const t=Array.from(n.value);t.length!==0&&k(t)},O=v(()=>h.value.length>0&&h.value.every(t=>t.id&&n.value.has(t.id))),G=v(()=>{const t=a.items.filter(s=>s.id&&n.value.has(s.id)).length;return t>0&&t<a.items.length});return ne(()=>p()),(t,s)=>{const c=_e,w=fe,Q=ge,q=he,x=re,U=ve,K=be,H=ye,C=me,J=ke;return u(),g("div",Ce,[r("div",Re,[i(c,{modelValue:e(m).keyword,"onUpdate:modelValue":s[0]||(s[0]=o=>e(m).keyword=o),placeholder:e(d)("user.backend.keywordInput"),class:"w-80",onChange:e(p)},null,8,["modelValue","placeholder","onChange"]),i(w,{start:e(m).startTime,"onUpdate:start":s[1]||(s[1]=o=>e(m).startTime=o),end:e(m).endTime,"onUpdate:end":s[2]||(s[2]=o=>e(m).endTime=o),"show-time":!0,ui:{root:"w-auto sm:w-xs"},onChange:e(p)},null,8,["start","end","onChange"]),r("div",Pe,[r("div",De,[i(Q,{"model-value":e(O)?!0:e(G)?"indeterminate":!1,"onUpdate:modelValue":L},null,8,["model-value"]),r("span",Se,l(e(n).size)+" / "+l(e(a).items.length)+" "+l(e(d)("console-common.selected")),1)]),i(U,{codes:["users:batch-delete"]},{default:_(()=>[i(x,{color:"error",variant:"subtle",label:e(d)("console-common.batchDelete"),icon:"i-heroicons-trash",disabled:e(n).size===0,onClick:F},{trailing:_(()=>[i(q,null,{default:_(()=>[P(l(e(n).size),1)]),_:1})]),_:1},8,["label","disabled"])]),_:1}),i(U,{codes:["users:create"]},{default:_(()=>[i(x,{icon:"i-heroicons-plus",color:"primary",onClick:s[3]||(s[3]=o=>e(E).push(("useRoutePath"in t?t.useRoutePath:e(we))("users:create")))},{default:_(()=>[P(l(e(d)("user.backend.add")),1)]),_:1})]),_:1}),i(K,{modelValue:e(f),"onUpdate:modelValue":s[4]||(s[4]=o=>le(f)?f.value=o:null),items:B,size:"xs",ui:{root:"gap-0",indicator:"bg-background dark:bg-primary",leadingIcon:"bg-black dark:bg-white"}},null,8,["modelValue"])])]),!e(a).loading&&e(a).items.length>0?(u(),R(H,{key:0,class:"h-[calc(100vh-13rem)]",shadow:!1},{default:_(()=>[D(r("div",Te,[(u(!0),g(ce,null,de(e(a).items,o=>(u(),R(e(V),{key:o.id,user:o,selected:e(n).has(o.id),onEditPower:j,onSelect:I,onDelete:M},null,8,["user","selected"]))),128))],512),[[S,e(f)===1]]),D(i(e(z),{usersList:e(a).items},null,8,["usersList"]),[[S,e(f)===2]])]),_:1})):e(a).loading?(u(),g("div",Ve,[r("div",ze,[i(C,{name:"i-lucide-loader-2",class:"text-primary-500 h-6 w-6 animate-spin"}),r("span",Ee,l(t.$t("common.loading")),1)])])):(u(),g("div",$e,[i(C,{name:"i-lucide-users",class:"text-muted-foreground mb-4 h-16 w-16"}),r("p",Ae,l(t.$t("user.backend.noUsers")),1)])),e(a).total>0?(u(),g("div",Be,[r("div",Ie,l(e(n).size)+" "+l(t.$t("console-common.selected")),1),r("div",Le,[i(J,{page:e(a).page,"onUpdate:page":s[5]||(s[5]=o=>e(a).page=o),size:e(a).pageSize,"onUpdate:size":s[6]||(s[6]=o=>e(a).pageSize=o),total:e(a).total,onChange:e(p)},null,8,["page","size","total","onChange"])])])):ie("",!0)])}}});export{Ut as default};
